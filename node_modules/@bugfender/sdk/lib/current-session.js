/*! For license information please see current-session.js.LICENSE.txt */
!function(e,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports["@bugfender/sdk"]=s():e["@bugfender/sdk"]=s()}(self,(()=>(()=>{"use strict";var e={8177:(e,s)=>{var i,t;Object.defineProperty(s,"__esModule",{value:!0}),s.SessionStorageKey=s.LocalStorageKey=void 0,(t=s.LocalStorageKey||(s.LocalStorageKey={})).AppID="bf_app_id",t.DeviceData="bf_device_data",t.DeviceUDID="bf_device_udid",(i=s.SessionStorageKey||(s.SessionStorageKey={})).SessionUDID="bf_session_udid",i.SessionUUID="bf_session_uuid"}},s={};function i(t){var o=s[t];if(void 0!==o)return o.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,i),n.exports}var t={};return(()=>{var e=t;Object.defineProperty(e,"__esModule",{value:!0}),e.CurrentSession=void 0;const s=i(8177);e.CurrentSession=class{constructor(e,s,i,t,o){this.device=e,this.logger=s,this.sessionStorage=i,this.sessionsTable=t,this.uuidFactory=o,this.reset()}getUUID(){return this.uuid}initSession(){const e=this.device.getUDID();this.logger.log("Init session"),this.uuid=this.uuidFactory.create(),this.sessionStorage.setItem(s.SessionStorageKey.SessionUUID,this.uuid),this.sessionStorage.setItem(s.SessionStorageKey.SessionUDID,e)}reset(){const e=this.sessionStorage.getItem(s.SessionStorageKey.SessionUUID);null===e?(this.logger.log("Session not available"),this.initSession()):(this.uuid=e,this.sessionStorage.getItem(s.SessionStorageKey.SessionUDID)!==this.device.getUDID()?(this.logger.log("Session Device UDID changed"),this.initSession()):this.logger.log(`Session UUID: ${this.uuid}`)),this.sessionsTable.addIfMissing({uuid:this.uuid,udid:this.device.getUDID()})}}})(),t})()));
//# sourceMappingURL=current-session.js.map