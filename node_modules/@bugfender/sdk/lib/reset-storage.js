/*! For license information please see reset-storage.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["@bugfender/sdk"]=t():e["@bugfender/sdk"]=t()}(self,(()=>(()=>{"use strict";var e={6105:function(e,t,o){var s=this&&this.__awaiter||function(e,t,o,s){return new(o||(o=Promise))((function(i,a){function r(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,n)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResetStorage=void 0;const i=o(8177);t.ResetStorage=class{constructor(e,t,o,s,i){this.apiFeatures=e,this.session=t,this.database=o,this.localStorage=s,this.sessionStorage=i}resetIfAppChanged(e){return s(this,void 0,void 0,(function*(){const t=this.localStorage.getItem(i.LocalStorageKey.AppID);if(null!==t&&t!==e){const e=[i.LocalStorageKey.AppID,i.LocalStorageKey.DeviceData,i.LocalStorageKey.DeviceUDID],t=[i.SessionStorageKey.SessionUDID,i.SessionStorageKey.SessionUUID];if(e.forEach((e=>this.localStorage.removeItem(e))),t.forEach((e=>this.sessionStorage.removeItem(e))),this.session.reset(),yield this.apiFeatures.isIndexedDBSupported()){const e=yield this.database.get();yield Promise.all([e.clear("devicekeys"),e.clear("issues"),e.clear("logs"),e.clear("sessions")])}}this.localStorage.setItem(i.LocalStorageKey.AppID,e)}))}}},8177:(e,t)=>{var o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorageKey=t.LocalStorageKey=void 0,(s=t.LocalStorageKey||(t.LocalStorageKey={})).AppID="bf_app_id",s.DeviceData="bf_device_data",s.DeviceUDID="bf_device_udid",(o=t.SessionStorageKey||(t.SessionStorageKey={})).SessionUDID="bf_session_udid",o.SessionUUID="bf_session_uuid"}},t={};return function o(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,o),a.exports}(6105)})()));
//# sourceMappingURL=reset-storage.js.map