{"version":3,"file":"bugfender.js","mappings":"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","sources":["webpack://@bugfender/sdk/webpack/universalModuleDefinition","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/bugfender.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/index.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/log.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/options.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/print-to-console.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/register-error-handler.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/string-formatter.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/type-mappers.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/user-feedback-options-validator.js","webpack://@bugfender/sdk/./node_modules/@bugfender/common/dist/user-feedback.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/broadcast-channel.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/index.es5.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/index.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/leader-election.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/method-chooser.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/methods/indexed-db.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/methods/localstorage.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/methods/native.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/methods/simulate.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/options.js","webpack://@bugfender/sdk/./node_modules/broadcast-channel/dist/lib/util.js","webpack://@bugfender/sdk/./node_modules/call-bind/callBound.js","webpack://@bugfender/sdk/./node_modules/call-bind/index.js","webpack://@bugfender/sdk/./node_modules/foreach/index.js","webpack://@bugfender/sdk/./node_modules/function-bind/implementation.js","webpack://@bugfender/sdk/./node_modules/function-bind/index.js","webpack://@bugfender/sdk/./node_modules/get-intrinsic/index.js","webpack://@bugfender/sdk/./node_modules/has-symbols/index.js","webpack://@bugfender/sdk/./node_modules/has-symbols/shams.js","webpack://@bugfender/sdk/./node_modules/has-tostringtag/node_modules/has-symbols/shams.js","webpack://@bugfender/sdk/./node_modules/has-tostringtag/shams.js","webpack://@bugfender/sdk/./node_modules/has/src/index.js","webpack://@bugfender/sdk/./node_modules/inherits/inherits_browser.js","webpack://@bugfender/sdk/./node_modules/is-arguments/index.js","webpack://@bugfender/sdk/./node_modules/is-generator-function/index.js","webpack://@bugfender/sdk/./node_modules/is-typed-array/index.js","webpack://@bugfender/sdk/./node_modules/oblivious-set/dist/es/index.js","webpack://@bugfender/sdk/./node_modules/process/browser.js","webpack://@bugfender/sdk/./src/api-client.ts","webpack://@bugfender/sdk/./src/browser-integration/event.printer.ts","webpack://@bugfender/sdk/./src/browser-integration/override-console-methods.ts","webpack://@bugfender/sdk/./src/browser-integration/register-browser-events-handler.ts","webpack://@bugfender/sdk/./src/browser-integration/register-events-handler.base.ts","webpack://@bugfender/sdk/./src/browser-integration/register-ui-events-handler.ts","webpack://@bugfender/sdk/./src/bugfender.ts","webpack://@bugfender/sdk/./src/channel.ts","webpack://@bugfender/sdk/./src/commands.ts","webpack://@bugfender/sdk/./src/connection.ts","webpack://@bugfender/sdk/./src/current-session.ts","webpack://@bugfender/sdk/./src/data/database.ts","webpack://@bugfender/sdk/./src/data/device-keys.table.ts","webpack://@bugfender/sdk/./src/data/in-memory.storage.ts","webpack://@bugfender/sdk/./src/data/issues.table.ts","webpack://@bugfender/sdk/./src/data/logs.table.ts","webpack://@bugfender/sdk/./src/data/sessions.table.ts","webpack://@bugfender/sdk/./src/data/table.ts","webpack://@bugfender/sdk/./src/device.ts","webpack://@bugfender/sdk/./src/http-client.ts","webpack://@bugfender/sdk/./src/log-factory.ts","webpack://@bugfender/sdk/./src/logger.ts","webpack://@bugfender/sdk/./src/providers/main.provider.ts","webpack://@bugfender/sdk/./src/reset-storage.ts","webpack://@bugfender/sdk/./src/session-factory.ts","webpack://@bugfender/sdk/./src/storage-guard.ts","webpack://@bugfender/sdk/./src/storage-keys.ts","webpack://@bugfender/sdk/./src/storage-processor.ts","webpack://@bugfender/sdk/./src/storage-writer.handler.ts","webpack://@bugfender/sdk/./src/storage-writer.hub.ts","webpack://@bugfender/sdk/./src/storage-writer.sanitizer.ts","webpack://@bugfender/sdk/./src/storage-writer.ts","webpack://@bugfender/sdk/./src/types/issue.ts","webpack://@bugfender/sdk/./src/utils.ts","webpack://@bugfender/sdk/./node_modules/unload/dist/es/index.js","webpack://@bugfender/sdk/./node_modules/unload/dist/es/node.js","webpack://@bugfender/sdk/./node_modules/unload/dist/es/browser.js","webpack://@bugfender/sdk/./node_modules/util/support/isBufferBrowser.js","webpack://@bugfender/sdk/./node_modules/util/support/types.js","webpack://@bugfender/sdk/./node_modules/util/util.js","webpack://@bugfender/sdk/./node_modules/which-typed-array/index.js","webpack://@bugfender/sdk/./src/storage-writer.worker.ts","webpack://@bugfender/sdk/./node_modules/worker-loader/dist/runtime/inline.js","webpack://@bugfender/sdk/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@bugfender/sdk/./node_modules/available-typed-arrays/index.js","webpack://@bugfender/sdk/./node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js","webpack://@bugfender/sdk/./node_modules/idb/build/wrap-idb-value.js","webpack://@bugfender/sdk/./node_modules/idb/build/index.js","webpack://@bugfender/sdk/./node_modules/idb/build/async-iterators.js","webpack://@bugfender/sdk/webpack/bootstrap","webpack://@bugfender/sdk/webpack/runtime/compat get default export","webpack://@bugfender/sdk/webpack/runtime/define property getters","webpack://@bugfender/sdk/webpack/runtime/global","webpack://@bugfender/sdk/webpack/runtime/hasOwnProperty shorthand","webpack://@bugfender/sdk/webpack/runtime/make namespace object","webpack://@bugfender/sdk/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@bugfender/sdk\"] = factory();\n\telse\n\t\troot[\"@bugfender/sdk\"] = factory();\n})(self, () => {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./bugfender\"), exports);\n__exportStar(require(\"./log\"), exports);\n__exportStar(require(\"./options\"), exports);\n__exportStar(require(\"./print-to-console\"), exports);\n__exportStar(require(\"./register-error-handler\"), exports);\n__exportStar(require(\"./string-formatter\"), exports);\n__exportStar(require(\"./type-mappers\"), exports);\n__exportStar(require(\"./user-feedback\"), exports);\n__exportStar(require(\"./user-feedback-options-validator\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LOG_LEVELS = exports.LogLevel = void 0;\n/**\n * Log Levels\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n    LogLevel[LogLevel[\"Warning\"] = 1] = \"Warning\";\n    LogLevel[LogLevel[\"Error\"] = 2] = \"Error\";\n    LogLevel[LogLevel[\"Trace\"] = 3] = \"Trace\";\n    LogLevel[LogLevel[\"Info\"] = 4] = \"Info\";\n    LogLevel[LogLevel[\"Fatal\"] = 5] = \"Fatal\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n/**\n * @internal\n */\nexports.LOG_LEVELS = [\n    LogLevel.Debug,\n    LogLevel.Warning,\n    LogLevel.Error,\n    LogLevel.Trace,\n    LogLevel.Info,\n    LogLevel.Fatal,\n];\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validate = exports.removeUndefinedProperties = exports.prepareOptions = void 0;\n/**\n * - Clone\n * - Remove undefined properties\n * - Remove empty string options for: `build`, `version`\n *\n * @internal\n * @param options User provided options object\n * @returns Processed options object\n */\nfunction prepareOptions(options) {\n    options = __assign({}, options); // Clone options to avoid user provided object mutation\n    removeUndefinedProperties(options);\n    removeEmptyStringOptions(options, ['build', 'version']);\n    return options;\n}\nexports.prepareOptions = prepareOptions;\n/**\n * Removes `undefined` properties from an object\n * @internal\n * @param object Object to clean-up\n */\nfunction removeUndefinedProperties(object) {\n    Object.entries(object).forEach(function (_a) {\n        var key = _a[0], value = _a[1];\n        if (typeof value === 'undefined') {\n            delete object[key];\n        }\n    });\n}\nexports.removeUndefinedProperties = removeUndefinedProperties;\nfunction removeEmptyStringOptions(options, props) {\n    props.forEach(function (opt) {\n        var option = options[opt];\n        if (typeof option === 'string') {\n            if (option.trim() === '') {\n                delete options[opt];\n            }\n        }\n    });\n}\n/**\n * @internal\n */\nfunction validate(options, rules) {\n    var urlValidator = new RegExp(/^http(s)?:\\/\\//i);\n    Object.entries(rules).forEach(function (_a) {\n        var key = _a[0], rules = _a[1];\n        var value = options[key];\n        rules.forEach(function (rule) {\n            if (rule === 'required') {\n                if (typeof value === 'undefined') {\n                    throw new Error(\"Bugfender requires '\".concat(key, \"' option to initialize.\"));\n                }\n            }\n            else if (rule === 'string') {\n                if (!['string', 'undefined'].includes(typeof value)) {\n                    throw new Error(\"'\".concat(key, \"' option must be a string.\"));\n                }\n            }\n            else if (rule === 'url') {\n                if (typeof value !== 'undefined' && !urlValidator.test(value)) {\n                    throw new Error(\"'\".concat(key, \"' option must be a valid URL.\"));\n                }\n            }\n            else if (rule === 'boolean') {\n                if (!['boolean', 'undefined'].includes(typeof value)) {\n                    throw new Error(\"'\".concat(key, \"' option must be a boolean.\"));\n                }\n            }\n        });\n    });\n}\nexports.validate = validate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PrintToConsole = void 0;\nvar util_1 = require(\"util\");\nvar log_1 = require(\"./log\");\n/**\n * @internal\n */\nvar PrintToConsole = /** @class */ (function () {\n    function PrintToConsole(console) {\n        this.console = console;\n        this.printToConsole = false;\n    }\n    PrintToConsole.prototype.init = function (printToConsole) {\n        this.printToConsole = printToConsole;\n    };\n    PrintToConsole.prototype.error = function () {\n        var _a;\n        var parameters = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            parameters[_i] = arguments[_i];\n        }\n        if (this.printToConsole) {\n            (_a = this.console).error.apply(_a, parameters);\n        }\n    };\n    PrintToConsole.prototype.info = function () {\n        var _a;\n        var parameters = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            parameters[_i] = arguments[_i];\n        }\n        if (this.printToConsole) {\n            (_a = this.console).info.apply(_a, parameters);\n        }\n    };\n    PrintToConsole.prototype.log = function () {\n        var _a;\n        var parameters = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            parameters[_i] = arguments[_i];\n        }\n        if (this.printToConsole) {\n            (_a = this.console).log.apply(_a, parameters);\n        }\n    };\n    PrintToConsole.prototype.debug = function () {\n        var _a;\n        var parameters = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            parameters[_i] = arguments[_i];\n        }\n        if (this.printToConsole) {\n            (_a = this.console).debug.apply(_a, parameters);\n        }\n    };\n    PrintToConsole.prototype.trace = function () {\n        var _a;\n        var parameters = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            parameters[_i] = arguments[_i];\n        }\n        if (this.printToConsole) {\n            (_a = this.console).trace.apply(_a, parameters);\n        }\n    };\n    PrintToConsole.prototype.warn = function () {\n        var _a;\n        var parameters = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            parameters[_i] = arguments[_i];\n        }\n        if (this.printToConsole) {\n            (_a = this.console).warn.apply(_a, parameters);\n        }\n    };\n    PrintToConsole.prototype.printLog = function (log) {\n        if (this.printToConsole) {\n            // Log to browser console\n            // debug, warning, error, trace, info, fatal\n            var levelToMethod = ['log', 'warn', 'error', 'trace', 'info', 'error'];\n            var method = levelToMethod[log.level || log_1.LogLevel.Debug];\n            var tag = log.tag ? \"[\".concat(log.tag, \"] \") : '';\n            var location_1 = [log.file || '', log.method || '', log.line || ''].filter(function (p) { return p !== ''; }).join(':');\n            var message = \"\".concat(tag).concat((0, util_1.format)(log.text), \" \").concat(location_1);\n            this.console[method](message);\n        }\n    };\n    return PrintToConsole;\n}());\nexports.PrintToConsole = PrintToConsole;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RegisterErrorHandler = void 0;\n/**\n * Registers a global error handler that will trigger a crash report in Bugfender\n * @internal\n */\nvar RegisterErrorHandler = /** @class */ (function () {\n    function RegisterErrorHandler(window) {\n        this.window = window;\n        this.rejectionsMap = new Map();\n    }\n    RegisterErrorHandler.prototype.init = function (bugfender) {\n        var _this = this;\n        this.bugfender = bugfender;\n        // Regular errors\n        this.window.addEventListener('error', function (e) {\n            var msg = e.message, line = e.lineno, filename = e.filename, error = e.error;\n            _this.logError(msg, filename, line, error);\n        });\n        // Promise errors\n        // This is not the best solution as it introduces a slight delay in the error reporting.\n        this.window.addEventListener('unhandledrejection', function (e) {\n            // Wait 1ms before reporting the error, this way we report errors that are not being handled in the same \"tick\"\n            var timeoutId = setTimeout(function () {\n                _this.logError(\"Potentially unhandled promise\", undefined, undefined, e.reason);\n            }, 1);\n            // Save the reference to the `setTimeout`\n            _this.rejectionsMap.set(e.promise, timeoutId);\n            e.preventDefault();\n        });\n        this.window.addEventListener('rejectionhandled', function (e) {\n            // Promise has been handled, abort error reporting by clearing the `setTimeout`\n            clearTimeout(_this.rejectionsMap.get(e.promise));\n            _this.rejectionsMap.delete(e.promise);\n        });\n    };\n    RegisterErrorHandler.prototype.logError = function (msg, filename, line, error) {\n        var stack;\n        if (error && error.stack) {\n            stack = error.stack;\n        }\n        if (typeof msg === 'string') {\n            this.bugfender.sendCrash(msg, [\n                \"Error: \".concat(msg),\n                \"URL: \".concat(filename !== null && filename !== void 0 ? filename : 'N/A'),\n                \"Line: \".concat(line !== null && line !== void 0 ? line : 'N/A'),\n                \"Stack: \".concat(stack !== null && stack !== void 0 ? stack : 'N/A'),\n            ].join('\\n'));\n        }\n    };\n    return RegisterErrorHandler;\n}());\nexports.RegisterErrorHandler = RegisterErrorHandler;\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatLogEntryText = exports.format = void 0;\nvar util_1 = require(\"util\");\nvar type_mappers_1 = require(\"./type-mappers\");\n/**\n * @internal\n */\nfunction format(parameters) {\n    var textParams = parameters.slice(1);\n    var textFormat = parameters[0];\n    var text;\n    try {\n        // Our sanitizer gives better results, try with it first\n        textFormat = (0, type_mappers_1.mapToString)(textFormat);\n    }\n    catch (_a) {\n        // Fallback to `format`\n        textFormat = (0, util_1.format)(textFormat);\n    }\n    if (textParams.length > 0) {\n        text = util_1.format.apply(void 0, __spreadArray([textFormat], textParams, false));\n    }\n    else {\n        text = textFormat;\n    }\n    return text;\n}\nexports.format = format;\n/**\n * Format `LogEntry.text`\n *\n * @internal\n * @param value `LogEntry.text` value\n */\nfunction formatLogEntryText(value) {\n    if (typeof value === 'string') {\n        return value;\n    }\n    else if (isUnknownArray(value)) {\n        return format(value);\n    }\n    return '';\n}\nexports.formatLogEntryText = formatLogEntryText;\n/**\n * Type predicate to narrow down to `unknown[]`. If `Array.isArray` is\n * used directly, that narrows to `any[]`.\n *\n * This is a helper for `formatLogEntryText()`.\n */\nfunction isUnknownArray(value) {\n    return Array.isArray(value);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapToString = exports.mapToNumber = void 0;\n/**\n * @internal\n */\nfunction mapToNumber(value) {\n    // Cast to number\n    var number = Number(value);\n    if (!isNaN(number)) {\n        // Could be casted, assign\n        return number;\n    }\n    else {\n        throw new Error(\"Can't be casted to number\");\n    }\n}\nexports.mapToNumber = mapToNumber;\n/**\n * @internal\n */\nfunction mapToString(value) {\n    // Depending on the type we prefer to do `String` or `stringify`\n    var isToString = ['string', 'symbol', 'bigint', 'function'].includes(typeof value) || value instanceof Error;\n    if (isToString) {\n        try {\n            return String(value);\n        }\n        catch (_a) {\n            return JSON.stringify(value);\n        }\n    }\n    else {\n        try {\n            return JSON.stringify(value);\n        }\n        catch (_b) {\n            return String(value);\n        }\n    }\n}\nexports.mapToString = mapToString;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserFeedbackOptionsValidator = void 0;\nvar defaultUserFeedbackOptions = {\n    title: 'Feedback',\n    hint: 'Please insert your feedback here and click send',\n    subjectPlaceholder: 'Subject…',\n    feedbackPlaceholder: 'Your feedback…',\n    submitLabel: 'Send',\n    closeLabel: 'Close',\n};\n/**\n * @internal\n */\nvar UserFeedbackOptionsValidator = /** @class */ (function () {\n    function UserFeedbackOptionsValidator() {\n    }\n    UserFeedbackOptionsValidator.prototype.init = function (options) {\n        return __assign(__assign({}, defaultUserFeedbackOptions), (options !== null && options !== void 0 ? options : {}));\n    };\n    return UserFeedbackOptionsValidator;\n}());\nexports.UserFeedbackOptionsValidator = UserFeedbackOptionsValidator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OPEN_BROADCAST_CHANNELS = exports.BroadcastChannel = void 0;\nexports.clearNodeFolder = clearNodeFolder;\nexports.enforceOptions = enforceOptions;\nvar _util = require(\"./util.js\");\nvar _methodChooser = require(\"./method-chooser.js\");\nvar _options = require(\"./options.js\");\n/**\n * Contains all open channels,\n * used in tests to ensure everything is closed.\n */\nvar OPEN_BROADCAST_CHANNELS = new Set();\nexports.OPEN_BROADCAST_CHANNELS = OPEN_BROADCAST_CHANNELS;\nvar lastId = 0;\nvar BroadcastChannel = function BroadcastChannel(name, options) {\n  // identifier of the channel to debug stuff\n  this.id = lastId++;\n  OPEN_BROADCAST_CHANNELS.add(this);\n  this.name = name;\n  if (ENFORCED_OPTIONS) {\n    options = ENFORCED_OPTIONS;\n  }\n  this.options = (0, _options.fillOptionsWithDefaults)(options);\n  this.method = (0, _methodChooser.chooseMethod)(this.options);\n\n  // isListening\n  this._iL = false;\n\n  /**\n   * _onMessageListener\n   * setting onmessage twice,\n   * will overwrite the first listener\n   */\n  this._onML = null;\n\n  /**\n   * _addEventListeners\n   */\n  this._addEL = {\n    message: [],\n    internal: []\n  };\n\n  /**\n   * Unsent message promises\n   * where the sending is still in progress\n   * @type {Set<Promise>}\n   */\n  this._uMP = new Set();\n\n  /**\n   * _beforeClose\n   * array of promises that will be awaited\n   * before the channel is closed\n   */\n  this._befC = [];\n\n  /**\n   * _preparePromise\n   */\n  this._prepP = null;\n  _prepareChannel(this);\n};\n\n// STATICS\n\n/**\n * used to identify if someone overwrites\n * window.BroadcastChannel with this\n * See methods/native.js\n */\nexports.BroadcastChannel = BroadcastChannel;\nBroadcastChannel._pubkey = true;\n\n/**\n * clears the tmp-folder if is node\n * @return {Promise<boolean>} true if has run, false if not node\n */\nfunction clearNodeFolder(options) {\n  options = (0, _options.fillOptionsWithDefaults)(options);\n  var method = (0, _methodChooser.chooseMethod)(options);\n  if (method.type === 'node') {\n    return method.clearNodeFolder().then(function () {\n      return true;\n    });\n  } else {\n    return _util.PROMISE_RESOLVED_FALSE;\n  }\n}\n\n/**\n * if set, this method is enforced,\n * no mather what the options are\n */\nvar ENFORCED_OPTIONS;\nfunction enforceOptions(options) {\n  ENFORCED_OPTIONS = options;\n}\n\n// PROTOTYPE\nBroadcastChannel.prototype = {\n  postMessage: function postMessage(msg) {\n    if (this.closed) {\n      throw new Error('BroadcastChannel.postMessage(): ' + 'Cannot post message after channel has closed ' +\n      /**\n       * In the past when this error appeared, it was really hard to debug.\n       * So now we log the msg together with the error so it at least\n       * gives some clue about where in your application this happens.\n       */\n      JSON.stringify(msg));\n    }\n    return _post(this, 'message', msg);\n  },\n  postInternal: function postInternal(msg) {\n    return _post(this, 'internal', msg);\n  },\n  set onmessage(fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _removeListenerObject(this, 'message', this._onML);\n    if (fn && typeof fn === 'function') {\n      this._onML = listenObj;\n      _addListenerObject(this, 'message', listenObj);\n    } else {\n      this._onML = null;\n    }\n  },\n  addEventListener: function addEventListener(type, fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _addListenerObject(this, type, listenObj);\n  },\n  removeEventListener: function removeEventListener(type, fn) {\n    var obj = this._addEL[type].find(function (obj) {\n      return obj.fn === fn;\n    });\n    _removeListenerObject(this, type, obj);\n  },\n  close: function close() {\n    var _this = this;\n    if (this.closed) {\n      return;\n    }\n    OPEN_BROADCAST_CHANNELS[\"delete\"](this);\n    this.closed = true;\n    var awaitPrepare = this._prepP ? this._prepP : _util.PROMISE_RESOLVED_VOID;\n    this._onML = null;\n    this._addEL.message = [];\n    return awaitPrepare\n    // wait until all current sending are processed\n    .then(function () {\n      return Promise.all(Array.from(_this._uMP));\n    })\n    // run before-close hooks\n    .then(function () {\n      return Promise.all(_this._befC.map(function (fn) {\n        return fn();\n      }));\n    })\n    // close the channel\n    .then(function () {\n      return _this.method.close(_this._state);\n    });\n  },\n  get type() {\n    return this.method.type;\n  },\n  get isClosed() {\n    return this.closed;\n  }\n};\n\n/**\n * Post a message over the channel\n * @returns {Promise} that resolved when the message sending is done\n */\nfunction _post(broadcastChannel, type, msg) {\n  var time = broadcastChannel.method.microSeconds();\n  var msgObj = {\n    time: time,\n    type: type,\n    data: msg\n  };\n  var awaitPrepare = broadcastChannel._prepP ? broadcastChannel._prepP : _util.PROMISE_RESOLVED_VOID;\n  return awaitPrepare.then(function () {\n    var sendPromise = broadcastChannel.method.postMessage(broadcastChannel._state, msgObj);\n\n    // add/remove to unsent messages list\n    broadcastChannel._uMP.add(sendPromise);\n    sendPromise[\"catch\"]().then(function () {\n      return broadcastChannel._uMP[\"delete\"](sendPromise);\n    });\n    return sendPromise;\n  });\n}\nfunction _prepareChannel(channel) {\n  var maybePromise = channel.method.create(channel.name, channel.options);\n  if ((0, _util.isPromise)(maybePromise)) {\n    channel._prepP = maybePromise;\n    maybePromise.then(function (s) {\n      // used in tests to simulate slow runtime\n      /*if (channel.options.prepareDelay) {\n           await new Promise(res => setTimeout(res, this.options.prepareDelay));\n      }*/\n      channel._state = s;\n    });\n  } else {\n    channel._state = maybePromise;\n  }\n}\nfunction _hasMessageListeners(channel) {\n  if (channel._addEL.message.length > 0) return true;\n  if (channel._addEL.internal.length > 0) return true;\n  return false;\n}\nfunction _addListenerObject(channel, type, obj) {\n  channel._addEL[type].push(obj);\n  _startListening(channel);\n}\nfunction _removeListenerObject(channel, type, obj) {\n  channel._addEL[type] = channel._addEL[type].filter(function (o) {\n    return o !== obj;\n  });\n  _stopListening(channel);\n}\nfunction _startListening(channel) {\n  if (!channel._iL && _hasMessageListeners(channel)) {\n    // someone is listening, start subscribing\n\n    var listenerFn = function listenerFn(msgObj) {\n      channel._addEL[msgObj.type].forEach(function (listenerObject) {\n        /**\n         * Getting the current time in JavaScript has no good precision.\n         * So instead of only listening to events that happened 'after' the listener\n         * was added, we also listen to events that happened 100ms before it.\n         * This ensures that when another process, like a WebWorker, sends events\n         * we do not miss them out because their timestamp is a bit off compared to the main process.\n         * Not doing this would make messages missing when we send data directly after subscribing and awaiting a response.\n         * @link https://johnresig.com/blog/accuracy-of-javascript-time/\n         */\n        var hundredMsInMicro = 100 * 1000;\n        var minMessageTime = listenerObject.time - hundredMsInMicro;\n        if (msgObj.time >= minMessageTime) {\n          listenerObject.fn(msgObj.data);\n        }\n      });\n    };\n    var time = channel.method.microSeconds();\n    if (channel._prepP) {\n      channel._prepP.then(function () {\n        channel._iL = true;\n        channel.method.onMessage(channel._state, listenerFn, time);\n      });\n    } else {\n      channel._iL = true;\n      channel.method.onMessage(channel._state, listenerFn, time);\n    }\n  }\n}\nfunction _stopListening(channel) {\n  if (channel._iL && !_hasMessageListeners(channel)) {\n    // no one is listening, stop subscribing\n    channel._iL = false;\n    var time = channel.method.microSeconds();\n    channel.method.onMessage(channel._state, null, time);\n  }\n}","\"use strict\";\n\nvar _index = require(\"./index.js\");\n/**\n * because babel can only export on default-attribute,\n * we use this for the non-module-build\n * this ensures that users do not have to use\n * var BroadcastChannel = require('broadcast-channel').default;\n * but\n * var BroadcastChannel = require('broadcast-channel');\n */\n\nmodule.exports = {\n  BroadcastChannel: _index.BroadcastChannel,\n  createLeaderElection: _index.createLeaderElection,\n  clearNodeFolder: _index.clearNodeFolder,\n  enforceOptions: _index.enforceOptions,\n  beLeader: _index.beLeader\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"BroadcastChannel\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.BroadcastChannel;\n  }\n});\nObject.defineProperty(exports, \"OPEN_BROADCAST_CHANNELS\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.OPEN_BROADCAST_CHANNELS;\n  }\n});\nObject.defineProperty(exports, \"beLeader\", {\n  enumerable: true,\n  get: function get() {\n    return _leaderElection.beLeader;\n  }\n});\nObject.defineProperty(exports, \"clearNodeFolder\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.clearNodeFolder;\n  }\n});\nObject.defineProperty(exports, \"createLeaderElection\", {\n  enumerable: true,\n  get: function get() {\n    return _leaderElection.createLeaderElection;\n  }\n});\nObject.defineProperty(exports, \"enforceOptions\", {\n  enumerable: true,\n  get: function get() {\n    return _broadcastChannel.enforceOptions;\n  }\n});\nvar _broadcastChannel = require(\"./broadcast-channel.js\");\nvar _leaderElection = require(\"./leader-election.js\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.beLeader = beLeader;\nexports.createLeaderElection = createLeaderElection;\nvar _util = require(\"./util.js\");\nvar _unload = require(\"unload\");\nvar LeaderElection = function LeaderElection(broadcastChannel, options) {\n  var _this = this;\n  this.broadcastChannel = broadcastChannel;\n  this._options = options;\n  this.isLeader = false;\n  this.hasLeader = false;\n  this.isDead = false;\n  this.token = (0, _util.randomToken)();\n\n  /**\n   * Apply Queue,\n   * used to ensure we do not run applyOnce()\n   * in parallel.\n   */\n  this._aplQ = _util.PROMISE_RESOLVED_VOID;\n  // amount of unfinished applyOnce() calls\n  this._aplQC = 0;\n\n  // things to clean up\n  this._unl = []; // _unloads\n  this._lstns = []; // _listeners\n  this._dpL = function () {}; // onduplicate listener\n  this._dpLC = false; // true when onduplicate called\n\n  /**\n   * Even when the own instance is not applying,\n   * we still listen to messages to ensure the hasLeader flag\n   * is set correctly.\n   */\n  var hasLeaderListener = function hasLeaderListener(msg) {\n    if (msg.context === 'leader') {\n      if (msg.action === 'death') {\n        _this.hasLeader = false;\n      }\n      if (msg.action === 'tell') {\n        _this.hasLeader = true;\n      }\n    }\n  };\n  this.broadcastChannel.addEventListener('internal', hasLeaderListener);\n  this._lstns.push(hasLeaderListener);\n};\nLeaderElection.prototype = {\n  /**\n   * Returns true if the instance is leader,\n   * false if not.\n   * @async\n   */\n  applyOnce: function applyOnce(\n  // true if the applyOnce() call came from the fallbackInterval cycle\n  isFromFallbackInterval) {\n    var _this2 = this;\n    if (this.isLeader) {\n      return (0, _util.sleep)(0, true);\n    }\n    if (this.isDead) {\n      return (0, _util.sleep)(0, false);\n    }\n\n    /**\n     * Already applying more than once,\n     * -> wait for the apply queue to be finished.\n     */\n    if (this._aplQC > 1) {\n      return this._aplQ;\n    }\n\n    /**\n     * Add a new apply-run\n     */\n    var applyRun = function applyRun() {\n      /**\n       * Optimization shortcuts.\n       * Directly return if a previous run\n       * has already elected a leader.\n       */\n      if (_this2.isLeader) {\n        return _util.PROMISE_RESOLVED_TRUE;\n      }\n      var stopCriteria = false;\n      var stopCriteriaPromiseResolve;\n      /**\n       * Resolves when a stop criteria is reached.\n       * Uses as a performance shortcut so we do not\n       * have to await the responseTime when it is already clear\n       * that the election failed.\n       */\n      var stopCriteriaPromise = new Promise(function (res) {\n        stopCriteriaPromiseResolve = function stopCriteriaPromiseResolve() {\n          stopCriteria = true;\n          res();\n        };\n      });\n      var handleMessage = function handleMessage(msg) {\n        if (msg.context === 'leader' && msg.token != _this2.token) {\n          if (msg.action === 'apply') {\n            // other is applying\n            if (msg.token > _this2.token) {\n              /**\n               * other has higher token\n               * -> stop applying and let other become leader.\n               */\n              stopCriteriaPromiseResolve();\n            }\n          }\n          if (msg.action === 'tell') {\n            // other is already leader\n            stopCriteriaPromiseResolve();\n            _this2.hasLeader = true;\n          }\n        }\n      };\n      _this2.broadcastChannel.addEventListener('internal', handleMessage);\n\n      /**\n       * If the applyOnce() call came from the fallbackInterval,\n       * we can assume that the election runs in the background and\n       * not critical process is waiting for it.\n       * When this is true, we give the other instances\n       * more time to answer to messages in the election cycle.\n       * This makes it less likely to elect duplicate leaders.\n       * But also it takes longer which is not a problem because we anyway\n       * run in the background.\n       */\n      var waitForAnswerTime = isFromFallbackInterval ? _this2._options.responseTime * 4 : _this2._options.responseTime;\n      return _sendMessage(_this2, 'apply') // send out that this one is applying\n      .then(function () {\n        return Promise.race([(0, _util.sleep)(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      })\n      // send again in case another instance was just created\n      .then(function () {\n        return _sendMessage(_this2, 'apply');\n      })\n      // let others time to respond\n      .then(function () {\n        return Promise.race([(0, _util.sleep)(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      })[\"catch\"](function () {}).then(function () {\n        _this2.broadcastChannel.removeEventListener('internal', handleMessage);\n        if (!stopCriteria) {\n          // no stop criteria -> own is leader\n          return beLeader(_this2).then(function () {\n            return true;\n          });\n        } else {\n          // other is leader\n          return false;\n        }\n      });\n    };\n    this._aplQC = this._aplQC + 1;\n    this._aplQ = this._aplQ.then(function () {\n      return applyRun();\n    }).then(function () {\n      _this2._aplQC = _this2._aplQC - 1;\n    });\n    return this._aplQ.then(function () {\n      return _this2.isLeader;\n    });\n  },\n  awaitLeadership: function awaitLeadership() {\n    if ( /* _awaitLeadershipPromise */\n    !this._aLP) {\n      this._aLP = _awaitLeadershipOnce(this);\n    }\n    return this._aLP;\n  },\n  set onduplicate(fn) {\n    this._dpL = fn;\n  },\n  die: function die() {\n    var _this3 = this;\n    this._lstns.forEach(function (listener) {\n      return _this3.broadcastChannel.removeEventListener('internal', listener);\n    });\n    this._lstns = [];\n    this._unl.forEach(function (uFn) {\n      return uFn.remove();\n    });\n    this._unl = [];\n    if (this.isLeader) {\n      this.hasLeader = false;\n      this.isLeader = false;\n    }\n    this.isDead = true;\n    return _sendMessage(this, 'death');\n  }\n};\n\n/**\n * @param leaderElector {LeaderElector}\n */\nfunction _awaitLeadershipOnce(leaderElector) {\n  if (leaderElector.isLeader) {\n    return _util.PROMISE_RESOLVED_VOID;\n  }\n  return new Promise(function (res) {\n    var resolved = false;\n    function finish() {\n      if (resolved) {\n        return;\n      }\n      resolved = true;\n      leaderElector.broadcastChannel.removeEventListener('internal', whenDeathListener);\n      res(true);\n    }\n\n    // try once now\n    leaderElector.applyOnce().then(function () {\n      if (leaderElector.isLeader) {\n        finish();\n      }\n    });\n\n    /**\n     * Try on fallbackInterval\n     * @recursive\n     */\n    var tryOnFallBack = function tryOnFallBack() {\n      return (0, _util.sleep)(leaderElector._options.fallbackInterval).then(function () {\n        if (leaderElector.isDead || resolved) {\n          return;\n        }\n        if (leaderElector.isLeader) {\n          finish();\n        } else {\n          return leaderElector.applyOnce(true).then(function () {\n            if (leaderElector.isLeader) {\n              finish();\n            } else {\n              tryOnFallBack();\n            }\n          });\n        }\n      });\n    };\n    tryOnFallBack();\n\n    // try when other leader dies\n    var whenDeathListener = function whenDeathListener(msg) {\n      if (msg.context === 'leader' && msg.action === 'death') {\n        leaderElector.hasLeader = false;\n        leaderElector.applyOnce().then(function () {\n          if (leaderElector.isLeader) {\n            finish();\n          }\n        });\n      }\n    };\n    leaderElector.broadcastChannel.addEventListener('internal', whenDeathListener);\n    leaderElector._lstns.push(whenDeathListener);\n  });\n}\n\n/**\n * sends and internal message over the broadcast-channel\n */\nfunction _sendMessage(leaderElector, action) {\n  var msgJson = {\n    context: 'leader',\n    action: action,\n    token: leaderElector.token\n  };\n  return leaderElector.broadcastChannel.postInternal(msgJson);\n}\nfunction beLeader(leaderElector) {\n  leaderElector.isLeader = true;\n  leaderElector.hasLeader = true;\n  var unloadFn = (0, _unload.add)(function () {\n    return leaderElector.die();\n  });\n  leaderElector._unl.push(unloadFn);\n  var isLeaderListener = function isLeaderListener(msg) {\n    if (msg.context === 'leader' && msg.action === 'apply') {\n      _sendMessage(leaderElector, 'tell');\n    }\n    if (msg.context === 'leader' && msg.action === 'tell' && !leaderElector._dpLC) {\n      /**\n       * another instance is also leader!\n       * This can happen on rare events\n       * like when the CPU is at 100% for long time\n       * or the tabs are open very long and the browser throttles them.\n       * @link https://github.com/pubkey/broadcast-channel/issues/414\n       * @link https://github.com/pubkey/broadcast-channel/issues/385\n       */\n      leaderElector._dpLC = true;\n      leaderElector._dpL(); // message the lib user so the app can handle the problem\n      _sendMessage(leaderElector, 'tell'); // ensure other leader also knows the problem\n    }\n  };\n\n  leaderElector.broadcastChannel.addEventListener('internal', isLeaderListener);\n  leaderElector._lstns.push(isLeaderListener);\n  return _sendMessage(leaderElector, 'tell');\n}\nfunction fillOptionsWithDefaults(options, channel) {\n  if (!options) options = {};\n  options = JSON.parse(JSON.stringify(options));\n  if (!options.fallbackInterval) {\n    options.fallbackInterval = 3000;\n  }\n  if (!options.responseTime) {\n    options.responseTime = channel.method.averageResponseTime(channel.options);\n  }\n  return options;\n}\nfunction createLeaderElection(channel, options) {\n  if (channel._leaderElector) {\n    throw new Error('BroadcastChannel already has a leader-elector');\n  }\n  options = fillOptionsWithDefaults(options, channel);\n  var elector = new LeaderElection(channel, options);\n  channel._befC.push(function () {\n    return elector.die();\n  });\n  channel._leaderElector = elector;\n  return elector;\n}","\"use strict\";\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.chooseMethod = chooseMethod;\nvar _native = require(\"./methods/native.js\");\nvar _indexedDb = require(\"./methods/indexed-db.js\");\nvar _localstorage = require(\"./methods/localstorage.js\");\nvar _simulate = require(\"./methods/simulate.js\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n// the line below will be removed from es5/browser builds\n\n// order is important\nvar METHODS = [_native.NativeMethod,\n// fastest\n_indexedDb.IndexedDBMethod, _localstorage.LocalstorageMethod];\nfunction chooseMethod(options) {\n  var chooseMethods = [].concat(options.methods, METHODS).filter(Boolean);\n\n  // the line below will be removed from es5/browser builds\n\n  // directly chosen\n  if (options.type) {\n    if (options.type === 'simulate') {\n      // only use simulate-method if directly chosen\n      return _simulate.SimulateMethod;\n    }\n    var ret = chooseMethods.find(function (m) {\n      return m.type === options.type;\n    });\n    if (!ret) throw new Error('method-type ' + options.type + ' not found');else return ret;\n  }\n\n  /**\n   * if no webworker support is needed,\n   * remove idb from the list so that localstorage will be chosen\n   */\n  if (!options.webWorkerSupport) {\n    chooseMethods = chooseMethods.filter(function (m) {\n      return m.type !== 'idb';\n    });\n  }\n  var useMethod = chooseMethods.find(function (method) {\n    return method.canBeUsed();\n  });\n  if (!useMethod) throw new Error(\"No usable method found in \" + JSON.stringify(METHODS.map(function (m) {\n    return m.type;\n  })));else return useMethod;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TRANSACTION_SETTINGS = exports.IndexedDBMethod = void 0;\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.cleanOldMessages = cleanOldMessages;\nexports.close = close;\nexports.commitIndexedDBTransaction = commitIndexedDBTransaction;\nexports.create = create;\nexports.createDatabase = createDatabase;\nexports.getAllMessages = getAllMessages;\nexports.getIdb = getIdb;\nexports.getMessagesHigherThan = getMessagesHigherThan;\nexports.getOldMessages = getOldMessages;\nexports.microSeconds = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.removeMessagesById = removeMessagesById;\nexports.type = void 0;\nexports.writeMessage = writeMessage;\nvar _util = require(\"../util.js\");\nvar _obliviousSet = require(\"oblivious-set\");\nvar _options = require(\"../options.js\");\n/**\n * this method uses indexeddb to store the messages\n * There is currently no observerAPI for idb\n * @link https://github.com/w3c/IndexedDB/issues/51\n * \n * When working on this, ensure to use these performance optimizations:\n * @link https://rxdb.info/slow-indexeddb.html\n */\n\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar DB_PREFIX = 'pubkey.broadcast-channel-0-';\nvar OBJECT_STORE_ID = 'messages';\n\n/**\n * Use relaxed durability for faster performance on all transactions.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nvar TRANSACTION_SETTINGS = {\n  durability: 'relaxed'\n};\nexports.TRANSACTION_SETTINGS = TRANSACTION_SETTINGS;\nvar type = 'idb';\nexports.type = type;\nfunction getIdb() {\n  if (typeof indexedDB !== 'undefined') return indexedDB;\n  if (typeof window !== 'undefined') {\n    if (typeof window.mozIndexedDB !== 'undefined') return window.mozIndexedDB;\n    if (typeof window.webkitIndexedDB !== 'undefined') return window.webkitIndexedDB;\n    if (typeof window.msIndexedDB !== 'undefined') return window.msIndexedDB;\n  }\n  return false;\n}\n\n/**\n * If possible, we should explicitly commit IndexedDB transactions\n * for better performance.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nfunction commitIndexedDBTransaction(tx) {\n  if (tx.commit) {\n    tx.commit();\n  }\n}\nfunction createDatabase(channelName) {\n  var IndexedDB = getIdb();\n\n  // create table\n  var dbName = DB_PREFIX + channelName;\n\n  /**\n   * All IndexedDB databases are opened without version\n   * because it is a bit faster, especially on firefox\n   * @link http://nparashuram.com/IndexedDB/perf/#Open%20Database%20with%20version\n   */\n  var openRequest = IndexedDB.open(dbName);\n  openRequest.onupgradeneeded = function (ev) {\n    var db = ev.target.result;\n    db.createObjectStore(OBJECT_STORE_ID, {\n      keyPath: 'id',\n      autoIncrement: true\n    });\n  };\n  return new Promise(function (res, rej) {\n    openRequest.onerror = function (ev) {\n      return rej(ev);\n    };\n    openRequest.onsuccess = function () {\n      res(openRequest.result);\n    };\n  });\n}\n\n/**\n * writes the new message to the database\n * so other readers can find it\n */\nfunction writeMessage(db, readerUuid, messageJson) {\n  var time = new Date().getTime();\n  var writeObject = {\n    uuid: readerUuid,\n    time: time,\n    data: messageJson\n  };\n  var tx = db.transaction([OBJECT_STORE_ID], 'readwrite', TRANSACTION_SETTINGS);\n  return new Promise(function (res, rej) {\n    tx.oncomplete = function () {\n      return res();\n    };\n    tx.onerror = function (ev) {\n      return rej(ev);\n    };\n    var objectStore = tx.objectStore(OBJECT_STORE_ID);\n    objectStore.add(writeObject);\n    commitIndexedDBTransaction(tx);\n  });\n}\nfunction getAllMessages(db) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        ret.push(cursor.value);\n        //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n        cursor[\"continue\"]();\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nfunction getMessagesHigherThan(db, lastCursorId) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  var keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n\n  /**\n   * Optimization shortcut,\n   * if getAll() can be used, do not use a cursor.\n   * @link https://rxdb.info/slow-indexeddb.html\n   */\n  if (objectStore.getAll) {\n    var getAllRequest = objectStore.getAll(keyRangeValue);\n    return new Promise(function (res, rej) {\n      getAllRequest.onerror = function (err) {\n        return rej(err);\n      };\n      getAllRequest.onsuccess = function (e) {\n        res(e.target.result);\n      };\n    });\n  }\n  function openCursor() {\n    // Occasionally Safari will fail on IDBKeyRange.bound, this\n    // catches that error, having it open the cursor to the first\n    // item. When it gets data it will advance to the desired key.\n    try {\n      keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n      return objectStore.openCursor(keyRangeValue);\n    } catch (e) {\n      return objectStore.openCursor();\n    }\n  }\n  return new Promise(function (res, rej) {\n    var openCursorRequest = openCursor();\n    openCursorRequest.onerror = function (err) {\n      return rej(err);\n    };\n    openCursorRequest.onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        if (cursor.value.id < lastCursorId + 1) {\n          cursor[\"continue\"](lastCursorId + 1);\n        } else {\n          ret.push(cursor.value);\n          cursor[\"continue\"]();\n        }\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nfunction removeMessagesById(channelState, ids) {\n  if (channelState.closed) {\n    return Promise.resolve([]);\n  }\n  var tx = channelState.db.transaction(OBJECT_STORE_ID, 'readwrite', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  return Promise.all(ids.map(function (id) {\n    var deleteRequest = objectStore[\"delete\"](id);\n    return new Promise(function (res) {\n      deleteRequest.onsuccess = function () {\n        return res();\n      };\n    });\n  }));\n}\nfunction getOldMessages(db, ttl) {\n  var olderThen = new Date().getTime() - ttl;\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        var msgObk = cursor.value;\n        if (msgObk.time < olderThen) {\n          ret.push(msgObk);\n          //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n          cursor[\"continue\"]();\n        } else {\n          // no more old messages,\n          commitIndexedDBTransaction(tx);\n          res(ret);\n        }\n      } else {\n        res(ret);\n      }\n    };\n  });\n}\nfunction cleanOldMessages(channelState) {\n  return getOldMessages(channelState.db, channelState.options.idb.ttl).then(function (tooOld) {\n    return removeMessagesById(channelState, tooOld.map(function (msg) {\n      return msg.id;\n    }));\n  });\n}\nfunction create(channelName, options) {\n  options = (0, _options.fillOptionsWithDefaults)(options);\n  return createDatabase(channelName).then(function (db) {\n    var state = {\n      closed: false,\n      lastCursorId: 0,\n      channelName: channelName,\n      options: options,\n      uuid: (0, _util.randomToken)(),\n      /**\n       * emittedMessagesIds\n       * contains all messages that have been emitted before\n       * @type {ObliviousSet}\n       */\n      eMIs: new _obliviousSet.ObliviousSet(options.idb.ttl * 2),\n      // ensures we do not read messages in parallel\n      writeBlockPromise: _util.PROMISE_RESOLVED_VOID,\n      messagesCallback: null,\n      readQueuePromises: [],\n      db: db\n    };\n\n    /**\n     * Handle abrupt closes that do not originate from db.close().\n     * This could happen, for example, if the underlying storage is\n     * removed or if the user clears the database in the browser's\n     * history preferences.\n     */\n    db.onclose = function () {\n      state.closed = true;\n      if (options.idb.onclose) options.idb.onclose();\n    };\n\n    /**\n     * if service-workers are used,\n     * we have no 'storage'-event if they post a message,\n     * therefore we also have to set an interval\n     */\n    _readLoop(state);\n    return state;\n  });\n}\nfunction _readLoop(state) {\n  if (state.closed) return;\n  readNewMessages(state).then(function () {\n    return (0, _util.sleep)(state.options.idb.fallbackInterval);\n  }).then(function () {\n    return _readLoop(state);\n  });\n}\nfunction _filterMessage(msgObj, state) {\n  if (msgObj.uuid === state.uuid) return false; // send by own\n  if (state.eMIs.has(msgObj.id)) return false; // already emitted\n  if (msgObj.data.time < state.messagesCallbackTime) return false; // older then onMessageCallback\n  return true;\n}\n\n/**\n * reads all new messages from the database and emits them\n */\nfunction readNewMessages(state) {\n  // channel already closed\n  if (state.closed) return _util.PROMISE_RESOLVED_VOID;\n\n  // if no one is listening, we do not need to scan for new messages\n  if (!state.messagesCallback) return _util.PROMISE_RESOLVED_VOID;\n  return getMessagesHigherThan(state.db, state.lastCursorId).then(function (newerMessages) {\n    var useMessages = newerMessages\n    /**\n     * there is a bug in iOS where the msgObj can be undefined sometimes\n     * so we filter them out\n     * @link https://github.com/pubkey/broadcast-channel/issues/19\n     */.filter(function (msgObj) {\n      return !!msgObj;\n    }).map(function (msgObj) {\n      if (msgObj.id > state.lastCursorId) {\n        state.lastCursorId = msgObj.id;\n      }\n      return msgObj;\n    }).filter(function (msgObj) {\n      return _filterMessage(msgObj, state);\n    }).sort(function (msgObjA, msgObjB) {\n      return msgObjA.time - msgObjB.time;\n    }); // sort by time\n    useMessages.forEach(function (msgObj) {\n      if (state.messagesCallback) {\n        state.eMIs.add(msgObj.id);\n        state.messagesCallback(msgObj.data);\n      }\n    });\n    return _util.PROMISE_RESOLVED_VOID;\n  });\n}\nfunction close(channelState) {\n  channelState.closed = true;\n  channelState.db.close();\n}\nfunction postMessage(channelState, messageJson) {\n  channelState.writeBlockPromise = channelState.writeBlockPromise.then(function () {\n    return writeMessage(channelState.db, channelState.uuid, messageJson);\n  }).then(function () {\n    if ((0, _util.randomInt)(0, 10) === 0) {\n      /* await (do not await) */\n      cleanOldMessages(channelState);\n    }\n  });\n  return channelState.writeBlockPromise;\n}\nfunction onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n  readNewMessages(channelState);\n}\nfunction canBeUsed() {\n  return !!getIdb();\n}\nfunction averageResponseTime(options) {\n  return options.idb.fallbackInterval * 2;\n}\nvar IndexedDBMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports.IndexedDBMethod = IndexedDBMethod;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocalstorageMethod = void 0;\nexports.addStorageEventListener = addStorageEventListener;\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports.getLocalStorage = getLocalStorage;\nexports.microSeconds = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.removeStorageEventListener = removeStorageEventListener;\nexports.storageKey = storageKey;\nexports.type = void 0;\nvar _obliviousSet = require(\"oblivious-set\");\nvar _options = require(\"../options.js\");\nvar _util = require(\"../util.js\");\n/**\n * A localStorage-only method which uses localstorage and its 'storage'-event\n * This does not work inside webworkers because they have no access to localstorage\n * This is basically implemented to support IE9 or your grandmother's toaster.\n * @link https://caniuse.com/#feat=namevalue-storage\n * @link https://caniuse.com/#feat=indexeddb\n */\n\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar KEY_PREFIX = 'pubkey.broadcastChannel-';\nvar type = 'localstorage';\n\n/**\n * copied from crosstab\n * @link https://github.com/tejacques/crosstab/blob/master/src/crosstab.js#L32\n */\nexports.type = type;\nfunction getLocalStorage() {\n  var localStorage;\n  if (typeof window === 'undefined') return null;\n  try {\n    localStorage = window.localStorage;\n    localStorage = window['ie8-eventlistener/storage'] || window.localStorage;\n  } catch (e) {\n    // New versions of Firefox throw a Security exception\n    // if cookies are disabled. See\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\n  }\n  return localStorage;\n}\nfunction storageKey(channelName) {\n  return KEY_PREFIX + channelName;\n}\n\n/**\n* writes the new message to the storage\n* and fires the storage-event so other readers can find it\n*/\nfunction postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    (0, _util.sleep)().then(function () {\n      var key = storageKey(channelState.channelName);\n      var writeObj = {\n        token: (0, _util.randomToken)(),\n        time: new Date().getTime(),\n        data: messageJson,\n        uuid: channelState.uuid\n      };\n      var value = JSON.stringify(writeObj);\n      getLocalStorage().setItem(key, value);\n\n      /**\n       * StorageEvent does not fire the 'storage' event\n       * in the window that changes the state of the local storage.\n       * So we fire it manually\n       */\n      var ev = document.createEvent('Event');\n      ev.initEvent('storage', true, true);\n      ev.key = key;\n      ev.newValue = value;\n      window.dispatchEvent(ev);\n      res();\n    });\n  });\n}\nfunction addStorageEventListener(channelName, fn) {\n  var key = storageKey(channelName);\n  var listener = function listener(ev) {\n    if (ev.key === key) {\n      fn(JSON.parse(ev.newValue));\n    }\n  };\n  window.addEventListener('storage', listener);\n  return listener;\n}\nfunction removeStorageEventListener(listener) {\n  window.removeEventListener('storage', listener);\n}\nfunction create(channelName, options) {\n  options = (0, _options.fillOptionsWithDefaults)(options);\n  if (!canBeUsed()) {\n    throw new Error('BroadcastChannel: localstorage cannot be used');\n  }\n  var uuid = (0, _util.randomToken)();\n\n  /**\n   * eMIs\n   * contains all messages that have been emitted before\n   * @type {ObliviousSet}\n   */\n  var eMIs = new _obliviousSet.ObliviousSet(options.localstorage.removeTimeout);\n  var state = {\n    channelName: channelName,\n    uuid: uuid,\n    eMIs: eMIs // emittedMessagesIds\n  };\n\n  state.listener = addStorageEventListener(channelName, function (msgObj) {\n    if (!state.messagesCallback) return; // no listener\n    if (msgObj.uuid === uuid) return; // own message\n    if (!msgObj.token || eMIs.has(msgObj.token)) return; // already emitted\n    if (msgObj.data.time && msgObj.data.time < state.messagesCallbackTime) return; // too old\n\n    eMIs.add(msgObj.token);\n    state.messagesCallback(msgObj.data);\n  });\n  return state;\n}\nfunction close(channelState) {\n  removeStorageEventListener(channelState.listener);\n}\nfunction onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n}\nfunction canBeUsed() {\n  var ls = getLocalStorage();\n  if (!ls) return false;\n  try {\n    var key = '__broadcastchannel_check';\n    ls.setItem(key, 'works');\n    ls.removeItem(key);\n  } catch (e) {\n    // Safari 10 in private mode will not allow write access to local\n    // storage and fail with a QuotaExceededError. See\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API#Private_Browsing_Incognito_modes\n    return false;\n  }\n  return true;\n}\nfunction averageResponseTime() {\n  var defaultTime = 120;\n  var userAgent = navigator.userAgent.toLowerCase();\n  if (userAgent.includes('safari') && !userAgent.includes('chrome')) {\n    // safari is much slower so this time is higher\n    return defaultTime * 2;\n  }\n  return defaultTime;\n}\nvar LocalstorageMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports.LocalstorageMethod = LocalstorageMethod;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NativeMethod = void 0;\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports.microSeconds = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.type = void 0;\nvar _util = require(\"../util.js\");\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar type = 'native';\nexports.type = type;\nfunction create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n  return state;\n}\nfunction close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\nfunction postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return _util.PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\nfunction onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nfunction canBeUsed() {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction averageResponseTime() {\n  return 150;\n}\nvar NativeMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports.NativeMethod = NativeMethod;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimulateMethod = void 0;\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports.microSeconds = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.type = void 0;\nvar _util = require(\"../util.js\");\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar type = 'simulate';\nexports.type = type;\nvar SIMULATE_CHANNELS = new Set();\nfunction create(channelName) {\n  var state = {\n    name: channelName,\n    messagesCallback: null\n  };\n  SIMULATE_CHANNELS.add(state);\n  return state;\n}\nfunction close(channelState) {\n  SIMULATE_CHANNELS[\"delete\"](channelState);\n}\nfunction postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      var channelArray = Array.from(SIMULATE_CHANNELS);\n      channelArray.filter(function (channel) {\n        return channel.name === channelState.name;\n      }).filter(function (channel) {\n        return channel !== channelState;\n      }).filter(function (channel) {\n        return !!channel.messagesCallback;\n      }).forEach(function (channel) {\n        return channel.messagesCallback(messageJson);\n      });\n      res();\n    }, 5);\n  });\n}\nfunction onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nfunction canBeUsed() {\n  return true;\n}\nfunction averageResponseTime() {\n  return 5;\n}\nvar SimulateMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports.SimulateMethod = SimulateMethod;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fillOptionsWithDefaults = fillOptionsWithDefaults;\nfunction fillOptionsWithDefaults() {\n  var originalOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = JSON.parse(JSON.stringify(originalOptions));\n\n  // main\n  if (typeof options.webWorkerSupport === 'undefined') options.webWorkerSupport = true;\n\n  // indexed-db\n  if (!options.idb) options.idb = {};\n  //  after this time the messages get deleted\n  if (!options.idb.ttl) options.idb.ttl = 1000 * 45;\n  if (!options.idb.fallbackInterval) options.idb.fallbackInterval = 150;\n  //  handles abrupt db onclose events.\n  if (originalOptions.idb && typeof originalOptions.idb.onclose === 'function') options.idb.onclose = originalOptions.idb.onclose;\n\n  // localstorage\n  if (!options.localstorage) options.localstorage = {};\n  if (!options.localstorage.removeTimeout) options.localstorage.removeTimeout = 1000 * 60;\n\n  // custom methods\n  if (originalOptions.methods) options.methods = originalOptions.methods;\n\n  // node\n  if (!options.node) options.node = {};\n  if (!options.node.ttl) options.node.ttl = 1000 * 60 * 2; // 2 minutes;\n  /**\n   * On linux use 'ulimit -Hn' to get the limit of open files.\n   * On ubuntu this was 4096 for me, so we use half of that as maxParallelWrites default.\n   */\n  if (!options.node.maxParallelWrites) options.node.maxParallelWrites = 2048;\n  if (typeof options.node.useFastPath === 'undefined') options.node.useFastPath = true;\n  return options;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PROMISE_RESOLVED_VOID = exports.PROMISE_RESOLVED_TRUE = exports.PROMISE_RESOLVED_FALSE = void 0;\nexports.isPromise = isPromise;\nexports.microSeconds = microSeconds;\nexports.randomInt = randomInt;\nexports.randomToken = randomToken;\nexports.sleep = sleep;\n/**\n * returns true if the given object is a promise\n */\nfunction isPromise(obj) {\n  return obj && typeof obj.then === 'function';\n}\nvar PROMISE_RESOLVED_FALSE = Promise.resolve(false);\nexports.PROMISE_RESOLVED_FALSE = PROMISE_RESOLVED_FALSE;\nvar PROMISE_RESOLVED_TRUE = Promise.resolve(true);\nexports.PROMISE_RESOLVED_TRUE = PROMISE_RESOLVED_TRUE;\nvar PROMISE_RESOLVED_VOID = Promise.resolve();\nexports.PROMISE_RESOLVED_VOID = PROMISE_RESOLVED_VOID;\nfunction sleep(time, resolveWith) {\n  if (!time) time = 0;\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      return res(resolveWith);\n    }, time);\n  });\n}\nfunction randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n/**\n * https://stackoverflow.com/a/8084248\n */\nfunction randomToken() {\n  return Math.random().toString(36).substring(2);\n}\nvar lastMs = 0;\nvar additional = 0;\n\n/**\n * returns the current time in micro-seconds,\n * WARNING: This is a pseudo-function\n * Performance.now is not reliable in webworkers, so we just make sure to never return the same time.\n * This is enough in browsers, and this function will not be used in nodejs.\n * The main reason for this hack is to ensure that BroadcastChannel behaves equal to production when it is used in fast-running unit tests.\n */\nfunction microSeconds() {\n  var ms = new Date().getTime();\n  if (ms === lastMs) {\n    additional++;\n    return ms * 1000 + additional;\n  } else {\n    lastMs = ms;\n    additional = 0;\n    return ms * 1000;\n  }\n}","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\nvar $max = GetIntrinsic('%Math.max%');\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = $reflectApply(bind, $call, arguments);\n\tif ($gOPD && $defineProperty) {\n\t\tvar desc = $gOPD(func, 'length');\n\t\tif (desc.configurable) {\n\t\t\t// original length, plus the receiver, minus any additional arguments (after the receiver)\n\t\t\t$defineProperty(\n\t\t\t\tfunc,\n\t\t\t\t'length',\n\t\t\t\t{ value: 1 + $max(0, originalFunction.length - (arguments.length - 1)) }\n\t\t\t);\n\t\t}\n\t}\n\treturn func;\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\n\nmodule.exports = function forEach (obj, fn, ctx) {\n    if (toString.call(fn) !== '[object Function]') {\n        throw new TypeError('iterator must be a function');\n    }\n    var l = obj.length;\n    if (l === +l) {\n        for (var i = 0; i < l; i++) {\n            fn.call(ctx, obj[i], i, obj);\n        }\n    } else {\n        for (var k in obj) {\n            if (hasOwn.call(obj, k)) {\n                fn.call(ctx, obj[k], k, obj);\n            }\n        }\n    }\n};\n\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('has');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar origSymbol = global.Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar GeneratorFunction;\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc ? getProto(generatorFunc) : false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\nvar forEach = require('foreach');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\nvar $slice = callBound('String.prototype.slice');\nvar toStrTags = {};\nvar gOPD = require('es-abstract/helpers/getOwnPropertyDescriptor');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\ttoStrTags[typedArray] = descriptor.get;\n\t\t}\n\t});\n}\n\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\tvar anyTrue = false;\n\tforEach(toStrTags, function (getter, typedArray) {\n\t\tif (!anyTrue) {\n\t\t\ttry {\n\t\t\t\tanyTrue = getter.call(value) === typedArray;\n\t\t\t} catch (e) { /**/ }\n\t\t}\n\t});\n\treturn anyTrue;\n};\n\nmodule.exports = function isTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag || !(Symbol.toStringTag in value)) {\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\treturn $indexOf(typedArrays, tag) > -1;\n\t}\n\tif (!gOPD) { return false; }\n\treturn tryTypedArrays(value);\n};\n","/**\n * this is a set which automatically forgets\n * a given entry when a new entry is set and the ttl\n * of the old one is over\n */\nvar ObliviousSet = /** @class */ (function () {\n    function ObliviousSet(ttl) {\n        this.ttl = ttl;\n        this.map = new Map();\n        /**\n         * Creating calls to setTimeout() is expensive,\n         * so we only do that if there is not timeout already open.\n         */\n        this._to = false;\n    }\n    ObliviousSet.prototype.has = function (value) {\n        return this.map.has(value);\n    };\n    ObliviousSet.prototype.add = function (value) {\n        var _this = this;\n        this.map.set(value, now());\n        /**\n         * When a new value is added,\n         * start the cleanup at the next tick\n         * to not block the cpu for more important stuff\n         * that might happen.\n         */\n        if (!this._to) {\n            this._to = true;\n            setTimeout(function () {\n                _this._to = false;\n                removeTooOldValues(_this);\n            }, 0);\n        }\n    };\n    ObliviousSet.prototype.clear = function () {\n        this.map.clear();\n    };\n    return ObliviousSet;\n}());\nexport { ObliviousSet };\n/**\n * Removes all entries from the set\n * where the TTL has expired\n */\nexport function removeTooOldValues(obliviousSet) {\n    var olderThen = now() - obliviousSet.ttl;\n    var iterator = obliviousSet.map[Symbol.iterator]();\n    /**\n     * Because we can assume the new values are added at the bottom,\n     * we start from the top and stop as soon as we reach a non-too-old value.\n     */\n    while (true) {\n        var next = iterator.next().value;\n        if (!next) {\n            return; // no more elements\n        }\n        var value = next[0];\n        var time = next[1];\n        if (time < olderThen) {\n            obliviousSet.map.delete(value);\n        }\n        else {\n            // We reached a value that is not old enough\n            return;\n        }\n    }\n}\nexport function now() {\n    return new Date().getTime();\n}\n//# sourceMappingURL=index.js.map","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ApiClient = void 0;\nclass ApiClient {\n    constructor(appKey, http) {\n        this.appKey = appKey;\n        this.http = http;\n    }\n    getDeviceStatus(deviceInfo) {\n        const payload = {\n            app_token: this.appKey,\n            device: deviceInfo,\n        };\n        return this.http.post('/app/device-status', payload).then(response => {\n            const hasError = typeof response.error !== 'undefined';\n            const isAppValid = !hasError || hasError && response.error.code !== -1004;\n            const isDeviceEnabled = typeof response.logger_enabled !== 'undefined' ? response.logger_enabled : false;\n            return { isDeviceEnabled, isAppValid };\n        });\n    }\n    sendSession(session) {\n        return this.http.post('/session', session);\n    }\n    sendLogs(sessionId, logs) {\n        return this.http.post('/log/batch', {\n            session_id: sessionId,\n            logs: logs,\n        });\n    }\n    sendIssue(uuid, issueURL, title, text, type, sessionId) {\n        const payload = {\n            uid: uuid,\n            title: title,\n            text: text,\n            app: { key: this.appKey },\n            type: type,\n            session_id: sessionId,\n        };\n        return this.http.post('/issue', payload).then(() => {\n            return { uuid, issueURL };\n        });\n    }\n    setDeviceKey(deviceId, key, value) {\n        return this.http.post('/device/keyvalue', {\n            app_key: this.appKey,\n            device_id: deviceId,\n            key: key,\n            value: value,\n        });\n    }\n}\nexports.ApiClient = ApiClient;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventPrinter = void 0;\nconst utils_1 = require(\"../utils\");\nclass EventPrinter {\n    constructor(console, printToConsole) {\n        this.console = console;\n        this.printToConsole = printToConsole;\n        this.styles = {\n            bold: 'font-weight:bold',\n            icon: 'color:#ff5060',\n            italic: 'font-style:italic',\n            neutral: 'color:#999',\n            regular: 'color:#222',\n        };\n    }\n    print(icon, text, xpath, styles) {\n        if (!this.printToConsole) {\n            return;\n        }\n        const msg = `%c${icon}%c ${text}`;\n        styles = [this.styles.icon, this.styles.regular, ...(styles !== null && styles !== void 0 ? styles : [])];\n        if (xpath) {\n            this.console.info(msg, ...styles, (0, utils_1.getElByXPath)(xpath));\n        }\n        else {\n            this.console.info(msg, ...styles);\n        }\n    }\n    printDeviceKey(key, value) {\n        if (value === null) {\n            this.print('◆', `Device key %c\"${key}\"%c removed`, undefined, [this.styles.italic, this.styles.bold]);\n        }\n        else {\n            this.print('◆', `Device key %c\"${key}\" %cset%c to %c\"${value}\"`, undefined, [this.styles.italic, this.styles.bold, this.styles.regular, this.styles.italic]);\n        }\n    }\n    printJsEvent(log) {\n        const data = JSON.parse(log.text);\n        switch (data.event) {\n            case 'DOMContentLoaded':\n                this.print('●', 'DOM content %cloaded', undefined, [this.styles.bold]);\n                break;\n            case 'PageLoaded':\n                this.print('●', 'Page %cloaded', undefined, [this.styles.bold]);\n                break;\n            case 'hashchange':\n                this.print('#', `URL %chash changed%c to %c\"${data.hash}\"`, undefined, [this.styles.bold, this.styles.regular, this.styles.italic]);\n                break;\n            case 'blur':\n            case 'click':\n            case 'focus':\n            case 'keyup': {\n                const icon = data.event === 'click' ? '⊙' : '▭';\n                const value = (data.text && data.event === 'keyup') ? ` value=${this.truncate(data.text)}` : '';\n                const mapLabel = {\n                    blur: 'blurred',\n                    click: 'clicked',\n                    focus: 'focused',\n                    keyup: 'keyup',\n                };\n                this.print(icon, `Element %c${mapLabel[data.event]}%c${value}%c:`, data.xpath, [this.styles.bold, this.styles.neutral, this.styles.regular]);\n                break;\n            }\n            case 'submit':\n                this.print('↑', 'Form %csubmited', data.xpath, [this.styles.bold]);\n                break;\n            case 'popstate':\n            case 'pushstate': {\n                this.print('↦', 'Navigation %cstate changed', undefined, [this.styles.bold]);\n                break;\n            }\n            default:\n                throw new utils_1.UnreachableCaseError(data);\n        }\n    }\n    truncate(input) {\n        const limit = 15;\n        if (input.length > limit) {\n            return `${input.substring(0, limit)}… [${input.length}]`;\n        }\n        return input;\n    }\n}\nexports.EventPrinter = EventPrinter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OverrideConsoleMethods = void 0;\nconst common_1 = require(\"@bugfender/common\");\nclass OverrideConsoleMethods {\n    constructor(commands, window) {\n        this.commands = commands;\n        this.window = window;\n    }\n    init(printToConsole) {\n        const self = this;\n        const methodToLevel = {\n            log: common_1.LogLevel.Debug,\n            trace: common_1.LogLevel.Trace,\n            info: common_1.LogLevel.Info,\n            warn: common_1.LogLevel.Warning,\n            error: common_1.LogLevel.Error,\n        };\n        this.window.console = function (console) {\n            return Object.assign(Object.assign({}, console), Object.fromEntries(Object.keys(methodToLevel).map((method) => ([\n                method,\n                function (...parameters) {\n                    self.commands.addLogMessage(methodToLevel[method], parameters);\n                    if (!printToConsole) {\n                        console[method](...parameters);\n                    }\n                }\n            ]))));\n        }(this.window.console);\n    }\n}\nexports.OverrideConsoleMethods = OverrideConsoleMethods;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RegisterBrowserEventsHandler = void 0;\nconst register_events_handler_base_1 = require(\"./register-events-handler.base\");\nclass RegisterBrowserEventsHandler extends register_events_handler_base_1.RegisterEventsHandlerBase {\n    constructor(commands, window) {\n        super(commands, window);\n        this.commands = commands;\n        this.window = window;\n    }\n    init() {\n        if (!this.window.document.addEventListener) {\n            return;\n        }\n        const options = this.supportsPassiveEvents() ?\n            { passive: true, capture: true } :\n            true;\n        this.window.addEventListener('load', () => {\n            this.addJsEventLogEntry({\n                event: 'PageLoaded',\n                performance: this.window.performance\n            });\n        }, options);\n        this.window.addEventListener('DOMContentLoaded', () => {\n            this.addJsEventLogEntry({\n                event: 'DOMContentLoaded',\n            });\n        }, options);\n        this.window.addEventListener('popstate', (e) => {\n            this.addJsEventLogEntry({\n                event: 'popstate',\n                location: this.window.location.href,\n                state: JSON.stringify(e.state),\n            });\n        }, options);\n        this.window.addEventListener('hashchange', () => {\n            this.addJsEventLogEntry({\n                event: 'hashchange',\n                hash: this.window.location.hash,\n            });\n        }, options);\n        const historyOverrideFnFactory = (originalFn) => {\n            const self = this;\n            return function (...args) {\n                const url = args.length > 2 ? args[2] : undefined;\n                if (url) {\n                    self.addJsEventLogEntry({\n                        event: 'pushstate',\n                        to: String(url),\n                        state: args.length > 1 ? JSON.stringify(args[1]) : null\n                    });\n                }\n                return originalFn.apply(this, args);\n            };\n        };\n        this.override(this.window.history, 'pushState', historyOverrideFnFactory);\n        this.override(this.window.history, 'replaceState', historyOverrideFnFactory);\n    }\n    override(object, method, overrideFactory) {\n        if (!(method in object)) {\n            return;\n        }\n        const original = object[method];\n        const wrapped = overrideFactory(original);\n        object[method] = wrapped;\n    }\n}\nexports.RegisterBrowserEventsHandler = RegisterBrowserEventsHandler;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RegisterEventsHandlerBase = void 0;\nclass RegisterEventsHandlerBase {\n    constructor(commands, window) {\n        this.commands = commands;\n        this.window = window;\n    }\n    addJsEventLogEntry(event) {\n        const log = {\n            tag: 'js_event',\n            text: JSON.stringify(event),\n            url: this.getURL(),\n        };\n        this.commands.addLogEntry(log);\n    }\n    getURL() {\n        if (this.window) {\n            return this.window.location.href;\n        }\n        return '';\n    }\n    supportsPassiveEvents() {\n        let passiveSupported = false;\n        try {\n            const noop = () => { };\n            const options = {\n                get passive() {\n                    passiveSupported = true;\n                    return false;\n                }\n            };\n            this.window.addEventListener('offline', noop, options);\n            this.window.removeEventListener('offline', noop, false);\n        }\n        catch (err) {\n            passiveSupported = false;\n        }\n        return passiveSupported;\n    }\n}\nexports.RegisterEventsHandlerBase = RegisterEventsHandlerBase;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RegisterUIEventsHandler = void 0;\nconst utils_1 = require(\"../utils\");\nconst register_events_handler_base_1 = require(\"./register-events-handler.base\");\nclass RegisterUIEventsHandler extends register_events_handler_base_1.RegisterEventsHandlerBase {\n    constructor(commands, window) {\n        super(commands, window);\n        this.commands = commands;\n        this.window = window;\n    }\n    init() {\n        if (!this.window.document.addEventListener) {\n            return;\n        }\n        const options = this.supportsPassiveEvents() ?\n            { passive: true, capture: true } :\n            true;\n        document.addEventListener('click', (e) => {\n            if (e.target instanceof Element) {\n                this.addJsEventLogEntry(this.getEventData(e.target, 'click'));\n            }\n        }, options);\n        document.addEventListener('focusin', (e) => {\n            if (e.target instanceof Element) {\n                this.addJsEventLogEntry(this.getEventData(e.target, 'focus'));\n            }\n        }, options);\n        document.addEventListener('focusout', (e) => {\n            if (e.target instanceof Element) {\n                this.addJsEventLogEntry(this.getEventData(e.target, 'blur'));\n            }\n        }, options);\n        this.window.addEventListener('submit', (e) => {\n            if (e.target instanceof Element) {\n                this.addJsEventLogEntry(this.getEventData(e.target, 'submit'));\n            }\n        }, options);\n        const debounceByEl = new utils_1.DebounceByElement(400);\n        const ignoreList = [\n            'Tab', 'Meta', 'MetaLeft', 'MetaRight', 'Alt', 'AltLeft', 'AltRight',\n            'Control', 'ControlLeft', 'ControlRight', 'Shift', 'ShiftLeft', 'ShiftRight',\n            'ArrowLeft', 'ArrowUp', 'ArrowRight', 'ArrowDown',\n            'PageDown', 'PageUp', 'Home', 'End', 'CapsLock',\n        ];\n        this.window.addEventListener('keyup', (e) => {\n            if (!(e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) ||\n                !e.composedPath ||\n                ignoreList.includes(e.code)) {\n                return;\n            }\n            const target = e.target;\n            const path = e.composedPath();\n            debounceByEl.run(target, () => {\n                this.sendKeyupLog(target, path);\n            });\n        }, options);\n    }\n    sendKeyupLog(target, path) {\n        var _a;\n        const isPasswordEl = ((_a = target.getAttribute('type')) !== null && _a !== void 0 ? _a : '').toLowerCase() === 'password';\n        const shouldSkipKeyLogging = path\n            .filter((el) => el instanceof HTMLElement)\n            .some((el) => 'bfIgnoreKeypress' in el.dataset);\n        const shouldOmitText = isPasswordEl || shouldSkipKeyLogging;\n        this.addJsEventLogEntry(Object.assign(Object.assign({}, this.getEventData(target, 'keyup')), { text: shouldOmitText ? undefined : target.value }));\n    }\n    getEventData(target, eventName) {\n        const text = (target.childElementCount <= 1) ? target.textContent : undefined;\n        const form = (target.tagName === 'FORM') ? target : null;\n        return {\n            event: eventName,\n            url: (this.window) ? this.window.location.href : '',\n            xpath: (0, utils_1.getXPath)(target),\n            tag: target.tagName,\n            id: target.id,\n            text: text !== null && text !== void 0 ? text : undefined,\n            action: (form && form.action) ? form.action : '',\n        };\n    }\n}\nexports.RegisterUIEventsHandler = RegisterUIEventsHandler;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Bugfender = void 0;\nconst common_1 = require(\"@bugfender/common\");\nconst issue_1 = require(\"./types/issue\");\nconst main_provider_1 = require(\"./providers/main.provider\");\nconst utils_1 = require(\"./utils\");\nclass Bugfender {\n    constructor(preInitProvider, sdkUserAgent, version) {\n        this.preInitProvider = preInitProvider;\n        this.sdkUserAgent = sdkUserAgent;\n        this.version = version;\n        this.LogLevel = common_1.LogLevel;\n        this.initDeferred = (0, utils_1.createDeferred)();\n        this.commands = this.preInitProvider.provideCommandsQueue();\n    }\n    init(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const operationModes = this.preInitProvider.provideOperationModes();\n            const sdkOptionsValidator = this.preInitProvider.provideSDKOptionsValidator();\n            this.options = sdkOptionsValidator.init(options);\n            this.provider = new main_provider_1.MainProvider(this.options, this.preInitProvider, this.sdkUserAgent, this.version);\n            this.processor = yield this.provider.getStorageProcessor();\n            if (this.options.debug) {\n                const apiFeatures = this.preInitProvider.provideAPIFeatureDetection();\n                const logger = this.provider.getLogger(Bugfender.name);\n                logger.log('DEBUG', {\n                    debug: this.options.debug,\n                    operation: {\n                        mode: yield operationModes.getMode(),\n                        isMultiTab: yield operationModes.isMultiTab(),\n                        isMultiThread: yield operationModes.isMultiThread(),\n                    },\n                    features: {\n                        broadcastChannel: yield apiFeatures.isBroadcastChannelSupported(),\n                        indexedDB: yield apiFeatures.isIndexedDBSupported(),\n                        localStorage: apiFeatures.isLocalStorageSupported(),\n                        sessionStorage: apiFeatures.isSessionStorageSupported(),\n                        worker: apiFeatures.isWorkerSupported(),\n                    }\n                });\n            }\n            const resetStorage = yield this.provider.getResetStorage();\n            yield resetStorage.resetIfAppChanged(this.options.appID);\n            const storage = yield this.provider.getStorageWriterHub();\n            storage.init(this.options);\n            if (this.options.logBrowserEvents) {\n                this.provider.getRegisterBrowserEventsHandler().init();\n            }\n            if (this.options.logUIEvents) {\n                this.provider.getRegisterUIEventsHandler().init();\n            }\n            if (this.options.registerErrorHandler) {\n                this.provider.getRegisterErrorHandler().init(this);\n            }\n            if (this.options.overrideConsoleMethods) {\n                this.provider.getOverrideConsoleMethods().init(this.options.printToConsole);\n            }\n            this.provider.getPrintToConsole().init(this.options.printToConsole);\n            window.addEventListener('beforeunload', () => __awaiter(this, void 0, void 0, function* () {\n                this.processor.run();\n            }));\n            this.commands.init(storage);\n            const browser = this.preInitProvider.provideBrowser();\n            this.setDeviceKey('$browser', browser.getName());\n            this.initDeferred.resolve();\n        });\n    }\n    forceSendOnce() {\n        this.commands.forceSendOnce();\n    }\n    getDeviceURL() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initDeferred.promise;\n            const device = yield this.provider.getDevice();\n            return `${this.options.baseURL}/intent/${this.options.appID}/device/${device.getUDID()}`;\n        });\n    }\n    getSessionURL() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initDeferred.promise;\n            const session = yield this.provider.getCurrentSession();\n            return `${this.options.baseURL}/intent/${this.options.appID}/session/${session.getUUID()}`;\n        });\n    }\n    getUserFeedback(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.preInitProvider.provideUserFeedback().show(options);\n        });\n    }\n    log(...parameters) {\n        this.commands.addLogMessage(common_1.LogLevel.Debug, [...parameters]);\n    }\n    warn(...parameters) {\n        this.commands.addLogMessage(common_1.LogLevel.Warning, [...parameters]);\n    }\n    error(...parameters) {\n        this.commands.addLogMessage(common_1.LogLevel.Error, [...parameters]);\n    }\n    trace(...parameters) {\n        this.commands.addLogMessage(common_1.LogLevel.Trace, [...parameters]);\n    }\n    info(...parameters) {\n        this.commands.addLogMessage(common_1.LogLevel.Info, [...parameters]);\n    }\n    fatal(...parameters) {\n        this.commands.addLogMessage(common_1.LogLevel.Fatal, [...parameters]);\n    }\n    removeDeviceKey(key) {\n        this.commands.setDeviceKey(key, null);\n    }\n    sendLog(log) {\n        this.commands.addLogEntry(log);\n    }\n    sendIssue(title, text) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.commands.addIssue(issue_1.IssueType.Issue, title, text);\n        });\n    }\n    sendCrash(title, text) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.commands.addIssue(issue_1.IssueType.Crash, title, text);\n        });\n    }\n    sendUserFeedback(title, text) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.commands.addIssue(issue_1.IssueType.Feedback, title, text);\n        });\n    }\n    setDeviceKey(key, value) {\n        this.commands.setDeviceKey(key, value);\n    }\n    setForceEnabled(state) {\n        this.initDeferred.promise.then(() => {\n            this.provider.getStorageGuard().setDeviceForceEnabled(state);\n        });\n    }\n}\nexports.Bugfender = Bugfender;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonoChannel = exports.Channel = exports.createBroadcastChannel = exports.MessageType = void 0;\nconst broadcast_channel_1 = require(\"broadcast-channel\");\nvar MessageType;\n(function (MessageType) {\n    MessageType[\"ForceSend\"] = \"force-send\";\n    MessageType[\"Ping\"] = \"ping\";\n    MessageType[\"Pong\"] = \"pong\";\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\nfunction createBroadcastChannel() {\n    return new broadcast_channel_1.BroadcastChannel('bf-sdk');\n}\nexports.createBroadcastChannel = createBroadcastChannel;\nclass Channel {\n    constructor(channel, logger) {\n        this.channel = channel;\n        this.logger = logger;\n        this.leader = false;\n        this.onForceSendCb = () => { };\n        this.sessionsStatus = {};\n        this.channel.onmessage = msg => this.handleMessage(msg);\n        this.elector = (0, broadcast_channel_1.createLeaderElection)(this.channel, {\n            fallbackInterval: 2000,\n            responseTime: 1000,\n        });\n        this.leaderPromise = this.elector.awaitLeadership();\n        this.leaderPromise.then(() => {\n            this.logger.log(`Now I'm the leader. 💪`);\n            this.leader = true;\n        });\n    }\n    setCurrentSession(session) {\n        this.session = session;\n    }\n    handleMessage(msg) {\n        var _a, _b;\n        switch (msg.type) {\n            case MessageType.ForceSend:\n                if (this.leader) {\n                    this.onForceSendCb();\n                }\n                break;\n            case MessageType.Ping:\n                if (msg.toSessionUUID === ((_a = this.session) === null || _a === void 0 ? void 0 : _a.getUUID())) {\n                    this.channel.postMessage({\n                        type: MessageType.Pong,\n                        fromSessionUUID: msg.toSessionUUID,\n                        toSessionUUID: msg.fromSessionUUID,\n                    });\n                }\n                break;\n            case MessageType.Pong:\n                if (msg.toSessionUUID === ((_b = this.session) === null || _b === void 0 ? void 0 : _b.getUUID())) {\n                    this.sessionsStatus[msg.fromSessionUUID] = true;\n                }\n                break;\n        }\n    }\n    isLeader() {\n        return this.leader;\n    }\n    notifyForceSend() {\n        if (this.leader) {\n            this.onForceSendCb();\n        }\n        else {\n            this.channel.postMessage({ type: MessageType.ForceSend });\n        }\n    }\n    onForceSend(cb) {\n        this.onForceSendCb = cb;\n    }\n    onHasBecomeLeader() {\n        return this.leaderPromise;\n    }\n    isSessionActive(sessionUUID) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isSessionReady = !!this.session;\n            if (!isSessionReady || (isSessionReady && this.session.getUUID() === sessionUUID)) {\n                return true;\n            }\n            return new Promise(resolve => {\n                const timeout = 250;\n                this.sessionsStatus[sessionUUID] = false;\n                this.channel.postMessage({\n                    type: MessageType.Ping,\n                    fromSessionUUID: this.session.getUUID(),\n                    toSessionUUID: sessionUUID,\n                });\n                setTimeout(() => resolve(this.sessionsStatus[sessionUUID]), timeout);\n            });\n        });\n    }\n}\nexports.Channel = Channel;\nclass MonoChannel {\n    constructor() {\n        this.onForceSendCb = () => { };\n        this.leaderPromise = Promise.resolve();\n    }\n    setCurrentSession(session) {\n        this.session = session;\n    }\n    isLeader() {\n        return true;\n    }\n    isSessionActive(sessionUUID) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isSessionReady = !!this.session;\n            return !this.session || (isSessionReady && this.session.getUUID() === sessionUUID);\n        });\n    }\n    notifyForceSend() {\n        this.onForceSendCb();\n    }\n    onForceSend(cb) {\n        this.onForceSendCb = cb;\n    }\n    onHasBecomeLeader() {\n        return this.leaderPromise;\n    }\n}\nexports.MonoChannel = MonoChannel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CommandType = void 0;\nvar CommandType;\n(function (CommandType) {\n    CommandType[\"AddIssue\"] = \"add-issue\";\n    CommandType[\"AddLogEntry\"] = \"add-log-entry\";\n    CommandType[\"AddLogMessage\"] = \"add-log-message\";\n    CommandType[\"ForceSendOnce\"] = \"force-send-once\";\n    CommandType[\"SetDeviceKey\"] = \"set-device-key\";\n})(CommandType = exports.CommandType || (exports.CommandType = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Connection = void 0;\nclass Connection {\n    constructor(window) {\n        this.window = window;\n    }\n    isOnline() {\n        return this.window.navigator.onLine;\n    }\n}\nexports.Connection = Connection;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CurrentSession = void 0;\nconst storage_keys_1 = require(\"./storage-keys\");\nclass CurrentSession {\n    constructor(device, logger, sessionStorage, sessionsTable, uuidFactory) {\n        this.device = device;\n        this.logger = logger;\n        this.sessionStorage = sessionStorage;\n        this.sessionsTable = sessionsTable;\n        this.uuidFactory = uuidFactory;\n        this.reset();\n    }\n    getUUID() {\n        return this.uuid;\n    }\n    initSession() {\n        const deviceUDID = this.device.getUDID();\n        this.logger.log('Init session');\n        this.uuid = this.uuidFactory.create();\n        this.sessionStorage.setItem(storage_keys_1.SessionStorageKey.SessionUUID, this.uuid);\n        this.sessionStorage.setItem(storage_keys_1.SessionStorageKey.SessionUDID, deviceUDID);\n    }\n    reset() {\n        const uuid = this.sessionStorage.getItem(storage_keys_1.SessionStorageKey.SessionUUID);\n        if (uuid === null) {\n            this.logger.log('Session not available');\n            this.initSession();\n        }\n        else {\n            this.uuid = uuid;\n            const sessionDeviceUDID = this.sessionStorage.getItem(storage_keys_1.SessionStorageKey.SessionUDID);\n            const hasDeviceUDIDChanged = sessionDeviceUDID !== this.device.getUDID();\n            if (hasDeviceUDIDChanged) {\n                this.logger.log('Session Device UDID changed');\n                this.initSession();\n            }\n            else {\n                this.logger.log(`Session UUID: ${this.uuid}`);\n            }\n        }\n        this.sessionsTable.addIfMissing({\n            uuid: this.uuid,\n            udid: this.device.getUDID(),\n        });\n    }\n}\nexports.CurrentSession = CurrentSession;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Database = void 0;\nconst with_async_ittr_1 = require(\"idb/with-async-ittr\");\nconst utils_1 = require(\"../utils\");\nvar Version;\n(function (Version) {\n    Version[Version[\"New\"] = 0] = \"New\";\n    Version[Version[\"V1\"] = 10] = \"V1\";\n    Version[Version[\"V2\"] = 20] = \"V2\";\n})(Version || (Version = {}));\nclass Database {\n    constructor(name) {\n        this.db = (0, utils_1.createDeferred)();\n        this.name = name !== null && name !== void 0 ? name : 'bf_sdk';\n        this.init();\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const db = yield (0, with_async_ittr_1.openDB)(this.name, Version.V2, {\n                upgrade(db, oldVersion, _newVersion, transaction) {\n                    var _a, e_1, _b, _c;\n                    return __awaiter(this, void 0, void 0, function* () {\n                        if (oldVersion === Version.New) {\n                            db.createObjectStore('devicekeys', { keyPath: 'id', autoIncrement: true })\n                                .createIndex('sessionUUID', 'sessionUUID');\n                            db.createObjectStore('issues', { keyPath: 'id', autoIncrement: true })\n                                .createIndex('sessionUUID', 'sessionUUID');\n                            db.createObjectStore('logs', { keyPath: 'id', autoIncrement: true })\n                                .createIndex('sessionUUID', 'sessionUUID');\n                            db.createObjectStore('sessions', { keyPath: 'uuid' });\n                        }\n                        if (oldVersion === Version.V1) {\n                            const issues = transaction.objectStore('issues');\n                            try {\n                                for (var _d = true, issues_1 = __asyncValues(issues), issues_1_1; issues_1_1 = yield issues_1.next(), _a = issues_1_1.done, !_a;) {\n                                    _c = issues_1_1.value;\n                                    _d = false;\n                                    try {\n                                        const cursor = _c;\n                                        const issue = Object.assign({}, cursor.value);\n                                        issue.data.text = issue.data.markdown;\n                                        delete issue.data.markdown;\n                                        cursor.update(issue);\n                                    }\n                                    finally {\n                                        _d = true;\n                                    }\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (!_d && !_a && (_b = issues_1.return)) yield _b.call(issues_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                        }\n                    });\n                }\n            });\n            this.db.resolve(db);\n        });\n    }\n    get() {\n        return this.db.promise;\n    }\n}\nexports.Database = Database;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemoryDeviceKeysTable = exports.IDBDeviceKeysTable = void 0;\nclass IDBDeviceKeysTable {\n    constructor(table) {\n        this.table = table;\n    }\n    add(item) {\n        return this.table.add(item);\n    }\n    count(sessionUUID) {\n        return this.table.countBy('sessionUUID', sessionUUID);\n    }\n    deleteBatch(batchSize) {\n        return this.table.deleteBatch(0, batchSize);\n    }\n    getAll() {\n        return this.table.getAll();\n    }\n}\nexports.IDBDeviceKeysTable = IDBDeviceKeysTable;\nclass InMemoryDeviceKeysTable {\n    constructor() {\n        this.data = [];\n        this.idCounter = 0;\n    }\n    getNextID() {\n        return this.idCounter++;\n    }\n    add(item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const id = this.getNextID();\n            this.data.push(Object.assign(Object.assign({}, item), { id }));\n        });\n    }\n    count(sessionUUID) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.data.filter(d => d.sessionUUID === sessionUUID).length;\n        });\n    }\n    deleteBatch(batchSize) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.data.splice(0, batchSize);\n        });\n    }\n    getAll() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return [...this.data];\n        });\n    }\n}\nexports.InMemoryDeviceKeysTable = InMemoryDeviceKeysTable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemoryStorage = void 0;\nclass InMemoryStorage {\n    constructor() {\n        this.inMemoryStorage = {};\n    }\n    clear() {\n        this.inMemoryStorage = {};\n    }\n    getItem(key) {\n        if (Object.prototype.hasOwnProperty.call(this.inMemoryStorage, key)) {\n            return this.inMemoryStorage[key];\n        }\n        return null;\n    }\n    key(index) {\n        var _a;\n        return (_a = Object.keys(this.inMemoryStorage)[index]) !== null && _a !== void 0 ? _a : null;\n    }\n    removeItem(key) {\n        delete this.inMemoryStorage[key];\n    }\n    setItem(key, value) {\n        this.inMemoryStorage[key] = String(value);\n    }\n    get length() {\n        return Object.keys(this.inMemoryStorage).length;\n    }\n}\nexports.InMemoryStorage = InMemoryStorage;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemoryIssuesTable = exports.IDBIssuesTable = void 0;\nclass IDBIssuesTable {\n    constructor(table) {\n        this.table = table;\n    }\n    add(item) {\n        return this.table.add(item);\n    }\n    count(sessionUUID) {\n        return this.table.countBy('sessionUUID', sessionUUID);\n    }\n    deleteById(id) {\n        return this.table.deleteByIdx(id);\n    }\n    getBatch(sessionUUID, batchSize) {\n        return this.table.getBatch(sessionUUID, batchSize);\n    }\n}\nexports.IDBIssuesTable = IDBIssuesTable;\nclass InMemoryIssuesTable {\n    constructor() {\n        this.data = [];\n        this.idCounter = 0;\n    }\n    getNextID() {\n        return this.idCounter++;\n    }\n    add(item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const id = this.getNextID();\n            this.data.push(Object.assign(Object.assign({}, item), { id }));\n        });\n    }\n    count(sessionUUID) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.data.filter(d => d.sessionUUID === sessionUUID).length;\n        });\n    }\n    deleteById(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const idx = this.data.findIndex(d => d.id === id);\n            if (idx !== -1) {\n                this.data.splice(idx, 1);\n            }\n        });\n    }\n    getBatch(sessionUUID, batchSize) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.data.filter(d => d.sessionUUID === sessionUUID).slice(0, batchSize);\n        });\n    }\n}\nexports.InMemoryIssuesTable = InMemoryIssuesTable;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemoryLogsTable = exports.IDBLogsTable = void 0;\nclass IDBLogsTable {\n    constructor(table, logFactory) {\n        this.table = table;\n        this.logFactory = logFactory;\n    }\n    add(item) {\n        return this.table.add(item);\n    }\n    count(sessionUUID) {\n        return this.table.countBy('sessionUUID', sessionUUID);\n    }\n    deleteBatch(sessionUUID, batchSize) {\n        return this.table.deleteBatch(0, batchSize, ['sessionUUID', sessionUUID]);\n    }\n    deleteOldLogs(sessionUUID, batchSize = 10) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const logs = yield this.table.getBatch(sessionUUID, batchSize);\n            if (logs.length <= 1) {\n                return;\n            }\n            const log = {\n                sessionUUID,\n                data: this.logFactory.createGapLog(logs.map(e => e.data)),\n            };\n            yield Promise.all([\n                this.table.patchByIdx(logs[0].id, log),\n                this.table.deleteBatch(1, batchSize - 1, ['sessionUUID', sessionUUID]),\n            ]);\n        });\n    }\n    getBatch(sessionUUID, batchSize) {\n        return this.table.getBatch(sessionUUID, batchSize);\n    }\n}\nexports.IDBLogsTable = IDBLogsTable;\nclass InMemoryLogsTable {\n    constructor(logFactory, storageLimit) {\n        this.logFactory = logFactory;\n        this.storageLimit = storageLimit;\n        this.data = [];\n        this.idCounter = 0;\n    }\n    getNextID() {\n        return this.idCounter++;\n    }\n    add(item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.data.length >= this.storageLimit) {\n                const error = new Error('InMemory storage quota exceeded');\n                error.name = 'QuotaExceededError';\n                throw error;\n            }\n            const id = this.getNextID();\n            this.data.push(Object.assign(Object.assign({}, item), { id }));\n        });\n    }\n    count(sessionUUID) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.data.filter(d => d.sessionUUID === sessionUUID).length;\n        });\n    }\n    deleteBatch(sessionUUID, batchSize) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = [];\n            let counter = 0;\n            for (let i = 0; i < this.data.length; i++) {\n                const log = this.data[i];\n                if (log.sessionUUID === sessionUUID && counter < batchSize) {\n                    counter++;\n                }\n                else {\n                    data.push(log);\n                }\n            }\n            this.data = data;\n        });\n    }\n    deleteOldLogs(_sessionUUID) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const logs = this.data.slice(0, 10);\n            if (logs.length <= 1) {\n                return;\n            }\n            this.data[0].data = this.logFactory.createGapLog(logs.map(e => e.data));\n            this.data.splice(1, 9);\n        });\n    }\n    getBatch(sessionUUID, batchSize) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.data.filter(d => d.sessionUUID === sessionUUID).slice(0, batchSize);\n        });\n    }\n}\nexports.InMemoryLogsTable = InMemoryLogsTable;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemorySessionsTable = exports.IDBSessionsTable = void 0;\nclass IDBSessionsTable {\n    constructor(table) {\n        this.table = table;\n    }\n    addIfMissing(item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const count = yield this.table.countBy('uuid', item.uuid);\n            if (count === 0) {\n                return this.table.add(item);\n            }\n        });\n    }\n    delete(uuid) {\n        return this.table.deleteByIdx(uuid);\n    }\n    getAll() {\n        return this.table.getAll();\n    }\n    update(uuid, data) {\n        return this.table.patchByIdx(uuid, data);\n    }\n}\nexports.IDBSessionsTable = IDBSessionsTable;\nclass InMemorySessionsTable {\n    constructor() {\n        this.data = [];\n    }\n    addIfMissing(item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const exists = this.data.some(entry => entry.uuid === item.uuid);\n            if (!exists) {\n                this.data.push(item);\n            }\n        });\n    }\n    delete(uuid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const idx = this.data.findIndex(d => d.uuid === uuid);\n            if (idx !== -1) {\n                this.data.splice(idx, 1);\n            }\n        });\n    }\n    getAll() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return [...this.data];\n        });\n    }\n    update(uuid, data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const idx = this.data.findIndex(d => d.uuid === uuid);\n            if (idx !== -1) {\n                this.data[idx] = Object.assign(Object.assign({}, this.data[idx]), data);\n            }\n        });\n    }\n}\nexports.InMemorySessionsTable = InMemorySessionsTable;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Table = void 0;\nclass Table {\n    constructor(dbPromise, store) {\n        this.dbPromise = dbPromise;\n        this.store = store;\n    }\n    add(data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield (yield this.dbPromise).add(this.store, data);\n        });\n    }\n    clear() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield (yield this.dbPromise).clear(this.store);\n        });\n    }\n    countBy(key, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tx = (yield this.dbPromise).transaction(this.store, 'readonly');\n            let cursor;\n            let count = 0;\n            if (key !== tx.store.keyPath) {\n                const index = tx.store.index(key);\n                const range = IDBKeyRange.only(value);\n                cursor = yield index.openCursor(range);\n            }\n            else {\n                cursor = yield tx.store.openCursor(IDBKeyRange.only(value));\n            }\n            while (cursor) {\n                count++;\n                cursor = yield cursor.continue();\n            }\n            return count;\n        });\n    }\n    deleteBatch(offset, limit, where) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tx = (yield this.dbPromise).transaction(this.store, 'readwrite');\n            let cursor;\n            let count = 0;\n            if (where) {\n                if (where[0] !== tx.store.keyPath) {\n                    const index = tx.store.index(where[0]);\n                    const range = IDBKeyRange.only(where[1]);\n                    cursor = yield index.openCursor(range);\n                }\n                else {\n                    cursor = yield tx.store.openCursor(IDBKeyRange.only(where[1]));\n                }\n            }\n            else {\n                cursor = yield tx.store.openCursor();\n            }\n            while (cursor) {\n                if (count >= offset) {\n                    cursor.delete();\n                }\n                count++;\n                if (count === (offset + limit)) {\n                    break;\n                }\n                else {\n                    cursor = yield cursor.continue();\n                }\n            }\n        });\n    }\n    deleteByIdx(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return (yield this.dbPromise).delete(this.store, id);\n        });\n    }\n    getAll() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return (yield this.dbPromise).getAll(this.store);\n        });\n    }\n    getBatch(sessionUUID, batchSize) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tx = (yield this.dbPromise).transaction(this.store, 'readonly');\n            const index = tx.store.index('sessionUUID');\n            const range = IDBKeyRange.only(sessionUUID);\n            let cursor = yield index.openCursor(range);\n            const result = [];\n            let count = 0;\n            while (cursor) {\n                result.push(cursor.value);\n                count++;\n                if (count === batchSize) {\n                    break;\n                }\n                else {\n                    cursor = yield cursor.continue();\n                }\n            }\n            return result;\n        });\n    }\n    patchByIdx(id, data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tx = (yield this.dbPromise).transaction(this.store, 'readwrite');\n            const entry = yield tx.store.get(id);\n            yield tx.store.put(Object.assign(Object.assign({}, entry), data));\n        });\n    }\n}\nexports.Table = Table;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Device = void 0;\nconst storage_keys_1 = require(\"./storage-keys\");\nclass Device {\n    constructor(browser, localStorage, sdkVersion, uuidFactory) {\n        this.browser = browser;\n        this.localStorage = localStorage;\n        this.sdkVersion = sdkVersion;\n        this.uuidFactory = uuidFactory;\n    }\n    getDeviceData() {\n        let data = this.localStorage.getItem(storage_keys_1.LocalStorageKey.DeviceData);\n        if (data === null) {\n            data = '{}';\n        }\n        return JSON.parse(data);\n    }\n    getInfo(options) {\n        return {\n            udid: this.getUDID(),\n            name: options.deviceName,\n            device_type: '',\n            firebase_test_lab: false,\n            key_values: this.getDeviceData(),\n            language: this.browser.getLanguage(),\n            os_version: this.browser.getOSVersion(),\n            sdk_type: 'web',\n            sdk_version: this.sdkVersion.toString(),\n            build: options.build,\n            version: options.version,\n        };\n    }\n    getUDID() {\n        let udid = this.localStorage.getItem(storage_keys_1.LocalStorageKey.DeviceUDID);\n        if (udid === null) {\n            udid = this.uuidFactory.create();\n            this.localStorage.setItem(storage_keys_1.LocalStorageKey.DeviceUDID, udid);\n        }\n        return udid;\n    }\n    setDeviceKey(key, value) {\n        const data = this.getDeviceData();\n        if (value === null) {\n            delete data[key];\n        }\n        else {\n            data[key] = value;\n        }\n        this.localStorage.setItem(storage_keys_1.LocalStorageKey.DeviceData, JSON.stringify(data));\n    }\n}\nexports.Device = Device;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HttpClient = void 0;\nclass HttpClient {\n    constructor(apiURL, appKey, sdkUserAgent) {\n        this.apiURL = apiURL;\n        this.appKey = appKey;\n        this.sdkUserAgent = sdkUserAgent;\n    }\n    post(endpoint, payload) {\n        const http = new XMLHttpRequest();\n        http.open('POST', this.apiURL + endpoint);\n        http.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        http.setRequestHeader('X-User-Agent', this.sdkUserAgent);\n        http.setRequestHeader('X-App-Token', this.appKey);\n        return new Promise((resolve, reject) => {\n            http.onreadystatechange = () => {\n                if (http.readyState !== 4) {\n                    return;\n                }\n                if (http.status !== 200 && http.status !== 304) {\n                    reject();\n                }\n                else {\n                    resolve(JSON.parse(http.responseText));\n                }\n            };\n            http.send(JSON.stringify(payload));\n        });\n    }\n}\nexports.HttpClient = HttpClient;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogFactory = void 0;\nconst common_1 = require(\"@bugfender/common\");\nclass LogFactory {\n    constructor(maxLogLength = 32000) {\n        this.maxLogLength = maxLogLength;\n    }\n    createFromDeviceKey(key, value, callInfo, time) {\n        return this.createFromEntry({\n            tag: 'bf_key_value',\n            text: `Set device data \"${key}\"=\"${value}\"`,\n        }, callInfo, time);\n    }\n    createFromEntry(log, callInfo, time) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        let text = (_a = log.text) !== null && _a !== void 0 ? _a : '';\n        if (text.length >= this.maxLogLength) {\n            text = text.substring(0, this.maxLogLength) + '…';\n        }\n        return {\n            x: time.iso,\n            t: text,\n            m: (_c = (_b = log.method) !== null && _b !== void 0 ? _b : callInfo.method) !== null && _c !== void 0 ? _c : '',\n            at: time.epoch,\n            tg: (_d = log.tag) !== null && _d !== void 0 ? _d : '',\n            f: (_f = (_e = log.file) !== null && _e !== void 0 ? _e : callInfo.file) !== null && _f !== void 0 ? _f : '',\n            l: (_h = (_g = log.line) !== null && _g !== void 0 ? _g : callInfo.line) !== null && _h !== void 0 ? _h : 0,\n            ll: (_j = log.level) !== null && _j !== void 0 ? _j : common_1.LogLevel.Debug,\n            u: (_k = log.url) !== null && _k !== void 0 ? _k : '',\n        };\n    }\n    createFromIssue(issueUUID, callInfo, time) {\n        return this.createFromEntry({\n            level: common_1.LogLevel.Error,\n            tag: 'bf_issue',\n            text: issueUUID,\n        }, callInfo, time);\n    }\n    createGapLog(logs) {\n        const text = JSON.stringify({\n            bf_start_date: logs[0].at,\n            bf_end_date: logs[logs.length - 1].at,\n        });\n        return {\n            x: logs[0].x,\n            t: text,\n            m: '',\n            at: logs[0].at,\n            tg: 'bf_gap_log',\n            f: '',\n            l: 0,\n            ll: 0,\n            u: logs[0].u,\n        };\n    }\n}\nexports.LogFactory = LogFactory;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NoopLogger = exports.ConsoleLogger = void 0;\nclass ConsoleLogger {\n    constructor(console, tag) {\n        this.console = console;\n        this.tag = tag;\n    }\n    error(msg, data) {\n        const tag = this.tag ? `[${this.tag}] ` : '';\n        msg = `[BF-SDK]${tag}${msg}`;\n        if (data) {\n            this.console.log(msg, data);\n        }\n        else {\n            this.console.log(msg);\n        }\n    }\n    getTagged(tag) {\n        return new ConsoleLogger(this.console, tag);\n    }\n    log(msg, data) {\n        const tag = this.tag ? `[${this.tag}] ` : '';\n        msg = `[BF-SDK]${tag}${msg}`;\n        if (data) {\n            this.console.log(msg, data);\n        }\n        else {\n            this.console.log(msg);\n        }\n    }\n}\nexports.ConsoleLogger = ConsoleLogger;\nclass NoopLogger {\n    error() {\n        return;\n    }\n    getTagged() {\n        return new NoopLogger();\n    }\n    log() {\n        return;\n    }\n}\nexports.NoopLogger = NoopLogger;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MainProvider = void 0;\nconst common_1 = require(\"@bugfender/common\");\nconst api_client_1 = require(\"../api-client\");\nconst override_console_methods_1 = require(\"../browser-integration/override-console-methods\");\nconst register_browser_events_handler_1 = require(\"../browser-integration/register-browser-events-handler\");\nconst register_ui_events_handler_1 = require(\"../browser-integration/register-ui-events-handler\");\nconst channel_1 = require(\"../channel\");\nconst connection_1 = require(\"../connection\");\nconst current_session_1 = require(\"../current-session\");\nconst database_1 = require(\"../data/database\");\nconst table_1 = require(\"../data/table\");\nconst device_keys_table_1 = require(\"../data/device-keys.table\");\nconst in_memory_storage_1 = require(\"../data/in-memory.storage\");\nconst issues_table_1 = require(\"../data/issues.table\");\nconst logs_table_1 = require(\"../data/logs.table\");\nconst sessions_table_1 = require(\"../data/sessions.table\");\nconst device_1 = require(\"../device\");\nconst http_client_1 = require(\"../http-client\");\nconst log_factory_1 = require(\"../log-factory\");\nconst logger_1 = require(\"../logger\");\nconst reset_storage_1 = require(\"../reset-storage\");\nconst session_factory_1 = require(\"../session-factory\");\nconst storage_guard_1 = require(\"../storage-guard\");\nconst storage_processor_1 = require(\"../storage-processor\");\nconst storage_writer_1 = require(\"../storage-writer\");\nconst storage_writer_handler_1 = require(\"../storage-writer.handler\");\nconst storage_writer_hub_1 = require(\"../storage-writer.hub\");\nconst utils_1 = require(\"../utils\");\nconst storage_writer_worker_1 = __importDefault(require(\"../storage-writer.worker\"));\nconst event_printer_1 = require(\"../browser-integration/event.printer\");\nconst cache = new Map();\nconst Cached = (0, utils_1.CacheDecoratorFactory)(cache);\nclass MainProvider {\n    constructor(options, preInitProvider, sdkUserAgent, version) {\n        this.options = options;\n        this.preInitProvider = preInitProvider;\n        this.sdkUserAgent = sdkUserAgent;\n        this.version = version;\n        this.apiFeatures = this.preInitProvider.provideAPIFeatureDetection();\n        this.commandsQueue = this.preInitProvider.provideCommandsQueue();\n        this.console = this.preInitProvider.provideWindow().console;\n        this.operationModes = this.preInitProvider.provideOperationModes();\n        this.uuidFactory = this.preInitProvider.provideUUIDFactory();\n        this.window = this.preInitProvider.provideWindow();\n    }\n    getApiClient() {\n        const httpClient = new http_client_1.HttpClient(this.options.apiURL, this.options.appKey, this.sdkUserAgent);\n        return new api_client_1.ApiClient(this.options.appKey, httpClient);\n    }\n    getChannel() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let channel;\n            if (yield this.operationModes.isMultiTab()) {\n                channel = new channel_1.Channel((0, channel_1.createBroadcastChannel)(), this.getLogger('Channel'));\n            }\n            else {\n                channel = new channel_1.MonoChannel();\n            }\n            this.getCurrentSession().then((currentSession) => {\n                channel.setCurrentSession(currentSession);\n            });\n            return channel;\n        });\n    }\n    getConnection() {\n        return new connection_1.Connection(this.window);\n    }\n    getCurrentSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new current_session_1.CurrentSession(this.getDevice(), this.getLogger('CurrentSession'), this.getSessionStorage(), yield this.getSessionsTable(), this.uuidFactory);\n        });\n    }\n    getDatabase() {\n        return new database_1.Database();\n    }\n    getDevice() {\n        return new device_1.Device(this.preInitProvider.provideBrowser(), this.getLocalStorage(), this.version, this.uuidFactory);\n    }\n    getInitDeferred() {\n        return (0, utils_1.createDeferred)();\n    }\n    getDeviceKeysTable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (yield this.operationModes.isMultiTab()) {\n                return new device_keys_table_1.IDBDeviceKeysTable(new table_1.Table(this.getDatabase().get(), 'devicekeys'));\n            }\n            else {\n                return new device_keys_table_1.InMemoryDeviceKeysTable();\n            }\n        });\n    }\n    getIssuesTable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (yield this.operationModes.isMultiTab()) {\n                return new issues_table_1.IDBIssuesTable(new table_1.Table(this.getDatabase().get(), 'issues'));\n            }\n            else {\n                return new issues_table_1.InMemoryIssuesTable();\n            }\n        });\n    }\n    getLogger(tag) {\n        if (this.options.debug) {\n            return new logger_1.ConsoleLogger(this.console, tag);\n        }\n        else {\n            return new logger_1.NoopLogger();\n        }\n    }\n    getLogsTable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (yield this.operationModes.isMultiTab()) {\n                return new logs_table_1.IDBLogsTable(new table_1.Table(this.getDatabase().get(), 'logs'), new log_factory_1.LogFactory());\n            }\n            else {\n                return new logs_table_1.InMemoryLogsTable(new log_factory_1.LogFactory(), 3000);\n            }\n        });\n    }\n    getOverrideConsoleMethods() {\n        return new override_console_methods_1.OverrideConsoleMethods(this.commandsQueue, this.window);\n    }\n    getPrintToConsole() {\n        return new common_1.PrintToConsole(this.console);\n    }\n    getRegisterBrowserEventsHandler() {\n        return new register_browser_events_handler_1.RegisterBrowserEventsHandler(this.commandsQueue, this.window);\n    }\n    getRegisterErrorHandler() {\n        return new common_1.RegisterErrorHandler(this.window);\n    }\n    getRegisterUIEventsHandler() {\n        return new register_ui_events_handler_1.RegisterUIEventsHandler(this.commandsQueue, this.window);\n    }\n    getResetStorage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new reset_storage_1.ResetStorage(this.apiFeatures, yield this.getCurrentSession(), this.getDatabase(), this.getLocalStorage(), this.getSessionStorage());\n        });\n    }\n    getStorageGuard() {\n        return new storage_guard_1.StorageGuard(this.getApiClient(), this.getDevice(), this.getLogger('StorageGuard'), this.options);\n    }\n    getStorageProcessor() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const sessionFactory = new session_factory_1.SessionFactory(this.getDevice(), this.version, this.window);\n            return new storage_processor_1.StorageProcessor(this.getApiClient(), yield this.getChannel(), this.getConnection(), this.getLogger('StorageProcessor'), this.getDevice(), yield this.getDeviceKeysTable(), yield this.getIssuesTable(), yield this.getLogsTable(), this.options, sessionFactory, yield this.getSessionsTable(), yield this.getStorageGuard());\n        });\n    }\n    getStorageWriterHub() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isMultiThread = yield this.operationModes.isMultiThread();\n            let handler;\n            if (isMultiThread) {\n                handler = new storage_writer_worker_1.default();\n            }\n            else {\n                handler = new storage_writer_handler_1.MainThreadStorageWriterHandler(new storage_writer_1.StorageWriter(yield this.getDeviceKeysTable(), yield this.getIssuesTable(), new log_factory_1.LogFactory(), yield this.getLogsTable()));\n            }\n            return new storage_writer_hub_1.StorageWriterHub(yield this.getChannel(), this.getDevice(), handler, new event_printer_1.EventPrinter(this.console, this.options.printToConsole), this.options, this.getPrintToConsole(), yield this.getCurrentSession(), yield this.getStorageGuard(), this.uuidFactory, this.window);\n        });\n    }\n    getLocalStorage() {\n        if (this.apiFeatures.isLocalStorageSupported()) {\n            return this.window.localStorage;\n        }\n        else {\n            return new in_memory_storage_1.InMemoryStorage();\n        }\n    }\n    getSessionStorage() {\n        if (this.apiFeatures.isSessionStorageSupported()) {\n            return this.window.sessionStorage;\n        }\n        else {\n            return new in_memory_storage_1.InMemoryStorage();\n        }\n    }\n    getSessionsTable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (yield this.operationModes.isMultiTab()) {\n                return new sessions_table_1.IDBSessionsTable(new table_1.Table(this.getDatabase().get(), 'sessions'));\n            }\n            else {\n                return new sessions_table_1.InMemorySessionsTable();\n            }\n        });\n    }\n}\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Object)\n], MainProvider.prototype, \"getApiClient\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getChannel\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", connection_1.Connection)\n], MainProvider.prototype, \"getConnection\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getCurrentSession\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", database_1.Database)\n], MainProvider.prototype, \"getDatabase\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Object)\n], MainProvider.prototype, \"getDevice\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Object)\n], MainProvider.prototype, \"getInitDeferred\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getDeviceKeysTable\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getIssuesTable\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getLogsTable\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", override_console_methods_1.OverrideConsoleMethods)\n], MainProvider.prototype, \"getOverrideConsoleMethods\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", common_1.PrintToConsole)\n], MainProvider.prototype, \"getPrintToConsole\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", register_browser_events_handler_1.RegisterBrowserEventsHandler)\n], MainProvider.prototype, \"getRegisterBrowserEventsHandler\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", common_1.RegisterErrorHandler)\n], MainProvider.prototype, \"getRegisterErrorHandler\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", register_ui_events_handler_1.RegisterUIEventsHandler)\n], MainProvider.prototype, \"getRegisterUIEventsHandler\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getResetStorage\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Object)\n], MainProvider.prototype, \"getStorageGuard\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getStorageProcessor\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getStorageWriterHub\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Storage)\n], MainProvider.prototype, \"getLocalStorage\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Storage)\n], MainProvider.prototype, \"getSessionStorage\", null);\n__decorate([\n    Cached(),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", Promise)\n], MainProvider.prototype, \"getSessionsTable\", null);\nexports.MainProvider = MainProvider;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResetStorage = void 0;\nconst storage_keys_1 = require(\"./storage-keys\");\nclass ResetStorage {\n    constructor(apiFeatures, session, database, localStorage, sessionStorage) {\n        this.apiFeatures = apiFeatures;\n        this.session = session;\n        this.database = database;\n        this.localStorage = localStorage;\n        this.sessionStorage = sessionStorage;\n    }\n    resetIfAppChanged(appID) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cachedAppID = this.localStorage.getItem(storage_keys_1.LocalStorageKey.AppID);\n            if (cachedAppID !== null && cachedAppID !== appID) {\n                const localStorageKeys = [storage_keys_1.LocalStorageKey.AppID, storage_keys_1.LocalStorageKey.DeviceData, storage_keys_1.LocalStorageKey.DeviceUDID];\n                const sessionStorageKeys = [storage_keys_1.SessionStorageKey.SessionUDID, storage_keys_1.SessionStorageKey.SessionUUID];\n                localStorageKeys.forEach(key => this.localStorage.removeItem(key));\n                sessionStorageKeys.forEach(key => this.sessionStorage.removeItem(key));\n                this.session.reset();\n                if (yield this.apiFeatures.isIndexedDBSupported()) {\n                    const db = yield this.database.get();\n                    yield Promise.all([\n                        db.clear('devicekeys'),\n                        db.clear('issues'),\n                        db.clear('logs'),\n                        db.clear('sessions'),\n                    ]);\n                }\n            }\n            this.localStorage.setItem(storage_keys_1.LocalStorageKey.AppID, appID);\n        });\n    }\n}\nexports.ResetStorage = ResetStorage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionFactory = void 0;\nclass SessionFactory {\n    constructor(device, sdkVersion, window) {\n        this.device = device;\n        this.sdkVersion = sdkVersion;\n        this.window = window;\n    }\n    create(uuid, options) {\n        return {\n            device: this.device.getInfo(options),\n            orientation: 0,\n            batteryLevel: -1,\n            ram_total: 0,\n            ram_free: 0,\n            ram_used: 0,\n            language: this.window.navigator.language,\n            time: new Date().toISOString(),\n            sdk_type: 'web',\n            sdk_version: this.sdkVersion,\n            session_uid: uuid,\n            app_version: {\n                app: { key: options.appKey },\n                version: options.version,\n                build: options.build,\n            },\n        };\n    }\n}\nexports.SessionFactory = SessionFactory;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageGuard = void 0;\nclass StorageGuard {\n    constructor(api, device, logger, options) {\n        this.api = api;\n        this.device = device;\n        this.logger = logger;\n        this.options = options;\n        this.deviceForceEnabled = false;\n        this.isAppValid = true;\n        this.isDeviceEnabled = false;\n        const checkIsDeviceEnabledIntervalMs = 5 * 60 * 1000;\n        this.checkIsDeviceEnabled();\n        setInterval(this.checkIsDeviceEnabled.bind(this), checkIsDeviceEnabledIntervalMs);\n    }\n    canProcess() {\n        this.logger.log('canProcess', { isAppValid: this.isAppValid, isDeviceEnabled: this.isDeviceEnabled, deviceForceEnabled: this.deviceForceEnabled });\n        return this.isAppValid && (this.isDeviceEnabled || this.deviceForceEnabled);\n    }\n    canWrite() {\n        return this.isAppValid;\n    }\n    checkIsDeviceEnabled() {\n        const deviceInfo = this.device.getInfo(this.options);\n        return this.api.getDeviceStatus(deviceInfo).then((status) => {\n            this.isAppValid = status.isAppValid;\n            this.isDeviceEnabled = status.isDeviceEnabled;\n        }, () => {\n        });\n    }\n    setDeviceForceEnabled(state) {\n        this.deviceForceEnabled = state;\n    }\n}\nexports.StorageGuard = StorageGuard;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionStorageKey = exports.LocalStorageKey = void 0;\nvar LocalStorageKey;\n(function (LocalStorageKey) {\n    LocalStorageKey[\"AppID\"] = \"bf_app_id\";\n    LocalStorageKey[\"DeviceData\"] = \"bf_device_data\";\n    LocalStorageKey[\"DeviceUDID\"] = \"bf_device_udid\";\n})(LocalStorageKey = exports.LocalStorageKey || (exports.LocalStorageKey = {}));\nvar SessionStorageKey;\n(function (SessionStorageKey) {\n    SessionStorageKey[\"SessionUDID\"] = \"bf_session_udid\";\n    SessionStorageKey[\"SessionUUID\"] = \"bf_session_uuid\";\n})(SessionStorageKey = exports.SessionStorageKey || (exports.SessionStorageKey = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageProcessor = void 0;\nclass StorageProcessor {\n    constructor(api, channel, connection, logger, device, deviceKeysTable, issuesTable, logsTable, options, sessionFactory, sessionsTable, storageGuard) {\n        this.api = api;\n        this.channel = channel;\n        this.connection = connection;\n        this.logger = logger;\n        this.device = device;\n        this.deviceKeysTable = deviceKeysTable;\n        this.issuesTable = issuesTable;\n        this.logsTable = logsTable;\n        this.options = options;\n        this.sessionFactory = sessionFactory;\n        this.sessionsTable = sessionsTable;\n        this.storageGuard = storageGuard;\n        this.BATCH_SIZE = 500;\n        this.runIntervalMs = 15000;\n        this.forceSend = false;\n        this.isRunning = false;\n        setInterval(this.run.bind(this), this.runIntervalMs);\n        this.channel.onHasBecomeLeader().then(() => {\n            this.run();\n        });\n        this.channel.onForceSend(() => {\n            this.forceSend = true;\n        });\n    }\n    cleanupSessions(sessions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const session of sessions) {\n                const hasActiveTab = yield this.channel.isSessionActive(session.uuid);\n                const hasData = yield this.hasData(session);\n                const shouldDelete = !hasActiveTab && !hasData;\n                if (shouldDelete) {\n                    try {\n                        yield this.sessionsTable.delete(session.uuid);\n                    }\n                    catch (err) {\n                    }\n                }\n            }\n        });\n    }\n    hasData(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const [logsCount, issuesCount, deviceKeysCount] = yield Promise.all([\n                    this.logsTable.count(session.uuid),\n                    this.issuesTable.count(session.uuid),\n                    this.deviceKeysTable.count(session.uuid),\n                ]);\n                return logsCount > 0 || issuesCount > 0 || deviceKeysCount > 0;\n            }\n            catch (err) {\n                return true;\n            }\n        });\n    }\n    registerSession(sessionIDB) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!sessionIDB.id) {\n                const session = this.sessionFactory.create(sessionIDB.uuid, this.options);\n                const { id } = yield this.api.sendSession(session);\n                sessionIDB.id = id;\n                this.sessionsTable.update(sessionIDB.uuid, { id });\n            }\n            return sessionIDB;\n        });\n    }\n    canRun() {\n        return (this.connection.isOnline() &&\n            this.channel.isLeader() &&\n            !this.isRunning);\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const canRun = this.canRun();\n            this.logger.log('Processing...', {\n                forceSend: this.forceSend,\n                isRunning: this.isRunning,\n                isLeader: this.channel.isLeader(),\n                isOnline: this.connection.isOnline(),\n                canRun,\n            });\n            if (!canRun) {\n                this.logger.log('Aborted.');\n                return;\n            }\n            this.isRunning = true;\n            const isForceSend = this.forceSend;\n            const sessions = yield this.sessionsTable.getAll();\n            const apiPromises = [];\n            const shouldProcess = this.storageGuard.canProcess() || this.forceSend;\n            let hadIssues = false;\n            this.logger.log(`Should process device: ${shouldProcess ? 'Yes' : 'No'}`);\n            this.logger.log(`${sessions.length} session/s found`);\n            sessions.sort((a, b) => Number(!!b.id) - Number(!!a.id));\n            for (const partialSession of sessions) {\n                const session = yield this.registerSession(partialSession);\n                const sessionHasIssues = yield this.sendIssues(session);\n                hadIssues = hadIssues || sessionHasIssues;\n                if (sessionHasIssues || shouldProcess) {\n                    apiPromises.push(this.sendLogs(session));\n                    this.logger.log(`Session processed. ID: ${session.id}`, { sessionHasIssues });\n                }\n                else {\n                    this.logger.log(`Session skipped. ID: ${session.id}`);\n                }\n            }\n            if (hadIssues || shouldProcess) {\n                apiPromises.push(this.sendDeviceData());\n            }\n            yield Promise.all(apiPromises);\n            yield this.cleanupSessions(sessions);\n            this.isRunning = false;\n            if (isForceSend) {\n                this.forceSend = false;\n            }\n            this.logger.log('Done');\n        });\n    }\n    sendDeviceData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const deviceKeyChanges = {};\n                const deviceKeys = yield this.deviceKeysTable.getAll();\n                deviceKeys.forEach(entry => {\n                    deviceKeyChanges[entry.data.key] = entry.data.value;\n                });\n                if (deviceKeys.length) {\n                    yield Promise.all(Object.entries(deviceKeyChanges)\n                        .map(([key, value]) => this.api.setDeviceKey(this.device.getUDID(), key, value)));\n                    yield this.deviceKeysTable.deleteBatch(deviceKeys.length);\n                }\n            }\n            catch (err) {\n                this.logger.error('sendDeviceData error', err);\n            }\n        });\n    }\n    sendIssues(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const entries = yield this.issuesTable.getBatch(session.uuid, this.BATCH_SIZE);\n                for (const entry of entries) {\n                    const issue = entry.data;\n                    const issueURL = `${this.options.baseURL}/intent/${this.options.appID}/issue/${issue.uuid}`;\n                    yield this.api.sendIssue(issue.uuid, issueURL, issue.title, issue.text, issue.type, session.id);\n                    yield this.issuesTable.deleteById(entry.id);\n                }\n                return entries.length > 0;\n            }\n            catch (err) {\n                this.logger.error('sendIssues error', err);\n                return false;\n            }\n        });\n    }\n    sendLogs(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const entries = yield this.logsTable.getBatch(session.uuid, this.BATCH_SIZE);\n                const logs = entries.map(entry => entry.data);\n                if (logs.length) {\n                    yield this.api.sendLogs(session.id, logs);\n                    yield this.logsTable.deleteBatch(session.uuid, logs.length);\n                }\n            }\n            catch (err) {\n                this.logger.error('sendLogs error', err);\n            }\n        });\n    }\n}\nexports.StorageProcessor = StorageProcessor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MainThreadStorageWriterHandler = void 0;\nclass MainThreadStorageWriterHandler {\n    constructor(storageWriter) {\n        this.storageWriter = storageWriter;\n    }\n    postMessage(msg) {\n        this.storageWriter.handleMessage(msg);\n    }\n}\nexports.MainThreadStorageWriterHandler = MainThreadStorageWriterHandler;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageWriterHub = void 0;\nconst common_1 = require(\"@bugfender/common\");\nconst storage_writer_sanitizer_1 = require(\"./storage-writer.sanitizer\");\nconst commands_1 = require(\"./commands\");\nconst issue_1 = require(\"./types/issue\");\nclass StorageWriterHub {\n    constructor(channel, device, handler, eventPrinter, options, printToConsole, session, storageGuard, uuidFactory, window) {\n        this.channel = channel;\n        this.device = device;\n        this.handler = handler;\n        this.eventPrinter = eventPrinter;\n        this.options = options;\n        this.printToConsole = printToConsole;\n        this.session = session;\n        this.storageGuard = storageGuard;\n        this.uuidFactory = uuidFactory;\n        this.window = window;\n        this.sanitizer = new storage_writer_sanitizer_1.StorageWriterSanitizer();\n    }\n    init(options) {\n        const sessionUUID = this.session.getUUID();\n        this.options = options;\n        this.postMessage({\n            type: 'init',\n            data: { options, sessionUUID },\n        }, false);\n    }\n    postMessage(message, checkStorageGuard = true) {\n        if (checkStorageGuard && !this.storageGuard.canWrite()) {\n            return;\n        }\n        try {\n            this.handler.postMessage(this.sanitizer.sanitize(message));\n        }\n        catch (err) {\n        }\n    }\n    addDeviceKey(cmd) {\n        if (typeof cmd.key !== 'string') {\n            throw new Error(`The device-key 'key' must be a string.`);\n        }\n        this.device.setDeviceKey(cmd.key, cmd.value);\n        this.postMessage({\n            type: 'device-key',\n            data: {\n                key: cmd.key,\n                value: cmd.value,\n                callInfo: cmd.callInfo,\n                time: cmd.time,\n            },\n        });\n        this.eventPrinter.printDeviceKey(cmd.key, cmd.value);\n    }\n    addLogEntry(cmd, printLog = true) {\n        var _a;\n        cmd.log.url = ((_a = cmd.log.url) !== null && _a !== void 0 ? _a : (this.window)) ? this.window.location.href : '';\n        const log = this.mapToLogEntryText(cmd.log);\n        this.postMessage({\n            type: 'log-entry',\n            data: {\n                log,\n                callInfo: cmd.callInfo,\n                time: cmd.time,\n            },\n        });\n        if (printLog) {\n            if (this.isJsEventLogEntry(log)) {\n                this.eventPrinter.printJsEvent(log);\n            }\n            else {\n                this.printToConsole.printLog(log);\n            }\n        }\n    }\n    isJsEventLogEntry(log) {\n        return (log.tag === 'js_event' &&\n            typeof log.text === 'string' &&\n            typeof log.url === 'string');\n    }\n    mapToLogEntryText(log) {\n        if (log.text) {\n            log.text = (0, common_1.formatLogEntryText)(log.text);\n        }\n        return log;\n    }\n    addLogMessage(cmd) {\n        const log = {};\n        log.level = cmd.level;\n        log.text = (0, common_1.format)(cmd.parameters);\n        log.url = (this.window) ? this.window.location.href : undefined;\n        this.addLogEntry({\n            type: commands_1.CommandType.AddLogEntry,\n            log,\n            callInfo: cmd.callInfo,\n            time: cmd.time,\n        }, false);\n        switch (cmd.level) {\n            case common_1.LogLevel.Debug:\n                this.printToConsole.log(...cmd.parameters);\n                break;\n            case common_1.LogLevel.Warning:\n                this.printToConsole.warn(...cmd.parameters);\n                break;\n            case common_1.LogLevel.Error:\n                this.printToConsole.error(...cmd.parameters);\n                break;\n            case common_1.LogLevel.Trace:\n                this.printToConsole.trace(...cmd.parameters);\n                break;\n            case common_1.LogLevel.Info:\n                this.printToConsole.info(...cmd.parameters);\n                break;\n            case common_1.LogLevel.Fatal:\n                this.printToConsole.error(...cmd.parameters);\n                break;\n        }\n    }\n    addIssue(cmd) {\n        if (typeof cmd.title !== 'string') {\n            throw new Error(`The crash/issue/feedback 'title' must be a string.`);\n        }\n        this.postMessage({\n            type: 'issue',\n            data: {\n                type: cmd.issueType,\n                title: cmd.title,\n                uuid: cmd.uuid,\n                text: cmd.text,\n                callInfo: cmd.callInfo,\n                time: cmd.time,\n            },\n        });\n        this.forceSendOnce();\n        cmd.url.resolve(`${this.options.baseURL}/intent/${this.options.appID}/issue/${cmd.uuid}`);\n        switch (cmd.issueType) {\n            case issue_1.IssueType.Issue:\n                this.printToConsole.warn(`Issue: ${cmd.title}.\\n${cmd.text}`);\n                break;\n            case issue_1.IssueType.Crash:\n                this.printToConsole.error(`Crash: ${cmd.title}.\\n${cmd.text}`);\n                break;\n            case issue_1.IssueType.Feedback:\n                this.printToConsole.info(`User Feedback: ${cmd.title}.\\n${cmd.text}`);\n                break;\n        }\n    }\n    forceSendOnce() {\n        this.channel.notifyForceSend();\n    }\n}\nexports.StorageWriterHub = StorageWriterHub;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageWriterSanitizer = void 0;\nconst common_1 = require(\"@bugfender/common\");\nclass StorageWriterSanitizer {\n    sanitize(message) {\n        switch (message.type) {\n            case 'device-key': {\n                const isValidValue = ['boolean', 'number', 'string'].includes(typeof message.data.value);\n                message.data.key = (0, common_1.mapToString)(message.data.key);\n                if (!isValidValue) {\n                    message.data.value = (0, common_1.mapToString)(message.data.value);\n                }\n                break;\n            }\n            case 'issue': {\n                message.data.title = (0, common_1.mapToString)(message.data.title);\n                message.data.text = (0, common_1.mapToString)(message.data.text);\n                break;\n            }\n            case 'log-entry': {\n                const strings = ['tag', 'method', 'file', 'text', 'url'];\n                const hasLine = 'line' in message.data.log && typeof message.data.log.line !== 'undefined';\n                const isValidLine = hasLine && typeof message.data.log.line === 'number';\n                const hasLevel = 'level' in message.data.log && typeof message.data.log.level !== 'undefined';\n                const isValidLevel = hasLevel && common_1.LOG_LEVELS.includes(message.data.log.level);\n                strings.forEach(key => {\n                    const hasValue = key in message.data.log && typeof message.data.log[key] !== 'undefined';\n                    if (hasValue) {\n                        try {\n                            message.data.log[key] = (0, common_1.mapToString)(message.data.log[key]);\n                        }\n                        catch (_a) {\n                            delete message.data.log[key];\n                        }\n                    }\n                });\n                if (hasLine && !isValidLine) {\n                    try {\n                        message.data.log.line = (0, common_1.mapToNumber)(message.data.log.line);\n                    }\n                    catch (_a) {\n                        delete message.data.log.line;\n                    }\n                }\n                if (hasLevel && !isValidLevel) {\n                    try {\n                        message.data.log.level = (0, common_1.mapToNumber)(message.data.log.level);\n                        if (!common_1.LOG_LEVELS.includes(message.data.log.level)) {\n                            delete message.data.log.level;\n                        }\n                    }\n                    catch (_b) {\n                        delete message.data.log.level;\n                    }\n                }\n                break;\n            }\n        }\n        return message;\n    }\n}\nexports.StorageWriterSanitizer = StorageWriterSanitizer;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageWriter = void 0;\nclass StorageWriter {\n    constructor(deviceKeysTable, issuesTable, logFactory, logsTable) {\n        this.deviceKeysTable = deviceKeysTable;\n        this.issuesTable = issuesTable;\n        this.logFactory = logFactory;\n        this.logsTable = logsTable;\n        this.isClearingSpace = false;\n        this.logsQueue = [];\n    }\n    handleMessage(msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            switch (msg.type) {\n                case 'device-key':\n                    return this.addDeviceKey(msg.data.key, msg.data.value, msg.data.callInfo, msg.data.time);\n                case 'init': {\n                    this.options = msg.data.options;\n                    this.sessionUUID = msg.data.sessionUUID;\n                    break;\n                }\n                case 'issue':\n                    return this.addIssue(msg.data.type, msg.data.title, msg.data.text, msg.data.uuid, msg.data.callInfo, msg.data.time);\n                case 'log-entry':\n                    return this.addLogEntry(msg.data.log, msg.data.callInfo, msg.data.time);\n            }\n        });\n    }\n    addDeviceKey(key, value, callInfo, time) {\n        this.deviceKeysTable.add({\n            sessionUUID: this.sessionUUID,\n            data: { key, value },\n        });\n        this.addLog(this.logFactory.createFromDeviceKey(key, value, callInfo, time));\n    }\n    addLog(log) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const entry = {\n                sessionUUID: this.sessionUUID,\n                data: log,\n            };\n            if (this.isClearingSpace) {\n                this.logsQueue.push(entry);\n            }\n            else {\n                try {\n                    yield this.logsTable.add(entry);\n                }\n                catch (err) {\n                    if (this.isQuotaExceededError(err)) {\n                        this.logsQueue.push(entry);\n                        this.isClearingSpace = true;\n                        yield this.logsTable.deleteOldLogs(this.sessionUUID);\n                        yield this.processLogsQueue();\n                        this.isClearingSpace = false;\n                    }\n                }\n            }\n        });\n    }\n    addLogEntry(log, callInfo, time) {\n        this.addLog(this.logFactory.createFromEntry(log, callInfo, time));\n    }\n    addIssue(type, title, text, uuid, callInfo, time) {\n        this.issuesTable.add({\n            sessionUUID: this.sessionUUID,\n            data: { title, text, type, uuid },\n        });\n        this.addLog(this.logFactory.createFromIssue(uuid, callInfo, time));\n    }\n    isQuotaExceededError(err) {\n        var _a;\n        return ((err.name === 'QuotaExceededError') ||\n            (((_a = err.inner) === null || _a === void 0 ? void 0 : _a.name) === 'QuotaExceededError'));\n    }\n    processLogsQueue() {\n        return __awaiter(this, void 0, void 0, function* () {\n            while (this.logsQueue.length > 0) {\n                const entry = this.logsQueue[0];\n                try {\n                    yield this.logsTable.add(entry);\n                    this.logsQueue.shift();\n                }\n                catch (err) {\n                    if (this.isQuotaExceededError(err)) {\n                        yield this.logsTable.deleteOldLogs(this.sessionUUID);\n                    }\n                }\n            }\n        });\n    }\n}\nexports.StorageWriter = StorageWriter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IssueType = void 0;\nvar IssueType;\n(function (IssueType) {\n    IssueType[\"Issue\"] = \"issue\";\n    IssueType[\"Crash\"] = \"crash\";\n    IssueType[\"Feedback\"] = \"user-feedback\";\n})(IssueType = exports.IssueType || (exports.IssueType = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElByXPath = exports.getXPath = exports.DebounceByElement = exports.UnreachableCaseError = exports.CacheDecoratorFactory = exports.createDeferred = void 0;\nfunction createDeferred() {\n    const deferred = {\n        isFulfilled: false,\n        isRejected: false,\n        isResolved: false,\n    };\n    deferred.promise = new Promise((resolve, reject) => {\n        deferred.resolve = (value) => {\n            const resolved = deferred;\n            resolved.isFulfilled = true;\n            resolved.isRejected = false;\n            resolved.isResolved = true;\n            resolved.value = value;\n            resolve(value);\n        };\n        deferred.reject = (reason) => {\n            const rejected = deferred;\n            rejected.isFulfilled = true;\n            rejected.isRejected = true;\n            rejected.isResolved = false;\n            rejected.err = reason;\n            reject(reason);\n        };\n    });\n    return deferred;\n}\nexports.createDeferred = createDeferred;\nfunction CacheDecoratorFactory(cache) {\n    return function CacheDecorator() {\n        return function (_, propertyKey, descriptor) {\n            const method = descriptor.value;\n            descriptor.value = function () {\n                if (!cache.has(propertyKey)) {\n                    cache.set(propertyKey, method.apply(this));\n                }\n                return cache.get(propertyKey);\n            };\n        };\n    };\n}\nexports.CacheDecoratorFactory = CacheDecoratorFactory;\nclass UnreachableCaseError extends Error {\n    constructor(val) {\n        super(`Unreachable case: ${JSON.stringify(val)}`);\n    }\n}\nexports.UnreachableCaseError = UnreachableCaseError;\nclass DebounceByElement {\n    constructor(wait) {\n        this.wait = wait;\n        this.timers = new Map();\n    }\n    run(el, cb) {\n        if (this.timers.has(el)) {\n            clearTimeout(this.timers.get(el));\n        }\n        this.timers.set(el, setTimeout(() => {\n            cb();\n            this.timers.delete(el);\n        }, this.wait));\n    }\n}\nexports.DebounceByElement = DebounceByElement;\nfunction getXPath(el) {\n    let nodeElem = el;\n    if (nodeElem instanceof Element && nodeElem.id) {\n        return `//*[@id=\"` + nodeElem.id + `\"]`;\n    }\n    const parts = [];\n    while (nodeElem && nodeElem instanceof Element) {\n        const currEl = nodeElem;\n        let nbOfPreviousSiblings = 0;\n        let hasNextSiblings = false;\n        let sibling = currEl.previousSibling;\n        while (sibling) {\n            if (sibling.nodeType !== Node.DOCUMENT_TYPE_NODE &&\n                sibling.nodeName === currEl.nodeName) {\n                nbOfPreviousSiblings++;\n            }\n            sibling = sibling.previousSibling;\n        }\n        sibling = currEl.nextSibling;\n        while (sibling) {\n            if (sibling.nodeName === currEl.nodeName) {\n                hasNextSiblings = true;\n                break;\n            }\n            sibling = sibling.nextSibling;\n        }\n        const prefix = currEl.prefix ? currEl.prefix + ':' : '';\n        const nth = nbOfPreviousSiblings || hasNextSiblings\n            ? `[${nbOfPreviousSiblings + 1}]`\n            : '';\n        parts.push(prefix + currEl.localName + nth);\n        nodeElem = currEl.parentNode;\n    }\n    return parts.length ? '/' + parts.reverse().join('/') : '';\n}\nexports.getXPath = getXPath;\nfunction getElByXPath(xpath) {\n    var _a;\n    return (_a = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue) !== null && _a !== void 0 ? _a : undefined;\n}\nexports.getElByXPath = getElByXPath;\n","import { addBrowser } from './browser.js';\nimport { addNode } from './node.js';\n\n/**\n * Use the code directly to prevent import problems\n * with the detect-node package.\n * @link https://github.com/iliakan/detect-node/blob/master/index.js\n */\nvar isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nvar USE_METHOD = isNode ? addNode : addBrowser;\nvar LISTENERS = new Set();\nvar startedListening = false;\nfunction startListening() {\n  if (startedListening) {\n    return;\n  }\n  startedListening = true;\n  USE_METHOD(runAll);\n}\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') {\n    throw new Error('Listener is no function');\n  }\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}","export function addNode(fn) {\n  process.on('exit', function () {\n    return fn();\n  });\n\n  /**\n   * on the following events,\n   * the process will not end if there are\n   * event-handlers attached,\n   * therefore we have to call process.exit()\n   */\n  process.on('beforeExit', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches ctrl+c event\n  process.on('SIGINT', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches uncaught exceptions\n  process.on('uncaughtException', function (err) {\n    return fn().then(function () {\n      console.trace(err);\n      process.exit(101);\n    });\n  });\n}","/* global WorkerGlobalScope */\n\nexport function addBrowser(fn) {\n  if (typeof WorkerGlobalScope === 'function' && self instanceof WorkerGlobalScope) {\n    /**\n     * Because killing a worker does directly stop the excution\n     * of the code, our only chance is to overwrite the close function\n     * which could work some times.\n     * @link https://stackoverflow.com/q/72903255/3443137\n     */\n    var oldClose = self.close.bind(self);\n    self.close = function () {\n      fn();\n      return oldClose();\n    };\n  } else {\n    /**\n     * if we are on react-native, there is no window.addEventListener\n     * @link https://github.com/pubkey/unload/issues/6\n     */\n    if (typeof window.addEventListener !== 'function') {\n      return;\n    }\n\n    /**\n     * for normal browser-windows, we use the beforeunload-event\n     */\n    window.addEventListener('beforeunload', function () {\n      fn();\n    }, true);\n\n    /**\n     * for iframes, we have to use the unload-event\n     * @link https://stackoverflow.com/q/47533670/3443137\n     */\n    window.addEventListener('unload', function () {\n      fn();\n    }, true);\n  }\n\n  /**\n   * TODO add fallback for safari-mobile\n   * @link https://stackoverflow.com/a/26193516/3443137\n   */\n}","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').slice(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.slice(1, -1);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","'use strict';\n\nvar forEach = require('foreach');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar toStrTags = {};\nvar gOPD = require('es-abstract/helpers/getOwnPropertyDescriptor');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tif (typeof g[typedArray] === 'function') {\n\t\t\tvar arr = new g[typedArray]();\n\t\t\tif (Symbol.toStringTag in arr) {\n\t\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\t\tif (!descriptor) {\n\t\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t\t}\n\t\t\t\ttoStrTags[typedArray] = descriptor.get;\n\t\t\t}\n\t\t}\n\t});\n}\n\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\tvar foundName = false;\n\tforEach(toStrTags, function (getter, typedArray) {\n\t\tif (!foundName) {\n\t\t\ttry {\n\t\t\t\tvar name = getter.call(value);\n\t\t\t\tif (name === typedArray) {\n\t\t\t\t\tfoundName = name;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\t});\n\treturn foundName;\n};\n\nvar isTypedArray = require('is-typed-array');\n\nmodule.exports = function whichTypedArray(value) {\n\tif (!isTypedArray(value)) { return false; }\n\tif (!hasToStringTag || !(Symbol.toStringTag in value)) { return $slice($toString(value), 8, -1); }\n\treturn tryTypedArrays(value);\n};\n","\nimport worker from \"!!../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"/*! For license information please see storage-writer.worker.worker.js.LICENSE.txt */\\n(()=>{var e={496:(e,t)=>{\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},431:function(e,t,r){\\\"use strict\\\";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!(\\\"get\\\"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)\\\"default\\\"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),o(r(496),t),o(r(704),t),o(r(596),t),o(r(836),t),o(r(758),t),o(r(922),t),o(r(287),t),o(r(484),t),o(r(929),t)},704:(e,t)=>{\\\"use strict\\\";var r;Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.LOG_LEVELS=t.LogLevel=void 0,function(e){e[e.Debug=0]=\\\"Debug\\\",e[e.Warning=1]=\\\"Warning\\\",e[e.Error=2]=\\\"Error\\\",e[e.Trace=3]=\\\"Trace\\\",e[e.Info=4]=\\\"Info\\\",e[e.Fatal=5]=\\\"Fatal\\\"}(r=t.LogLevel||(t.LogLevel={})),t.LOG_LEVELS=[r.Debug,r.Warning,r.Error,r.Trace,r.Info,r.Fatal]},596:function(e,t){\\\"use strict\\\";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function n(e){Object.entries(e).forEach((function(t){var r=t[0];void 0===t[1]&&delete e[r]}))}Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.validate=t.removeUndefinedProperties=t.prepareOptions=void 0,t.prepareOptions=function(e){return n(e=r({},e)),function(e,t){[\\\"build\\\",\\\"version\\\"].forEach((function(t){var r=e[t];\\\"string\\\"==typeof r&&\\\"\\\"===r.trim()&&delete e[t]}))}(e),e},t.removeUndefinedProperties=n,t.validate=function(e,t){var r=new RegExp(/^http(s)?:\\\\/\\\\//i);Object.entries(t).forEach((function(t){var n=t[0],o=t[1],i=e[n];o.forEach((function(e){if(\\\"required\\\"===e){if(void 0===i)throw new Error(\\\"Bugfender requires '\\\".concat(n,\\\"' option to initialize.\\\"))}else if(\\\"string\\\"===e){if(![\\\"string\\\",\\\"undefined\\\"].includes(typeof i))throw new Error(\\\"'\\\".concat(n,\\\"' option must be a string.\\\"))}else if(\\\"url\\\"===e){if(void 0!==i&&!r.test(i))throw new Error(\\\"'\\\".concat(n,\\\"' option must be a valid URL.\\\"))}else if(\\\"boolean\\\"===e&&![\\\"boolean\\\",\\\"undefined\\\"].includes(typeof i))throw new Error(\\\"'\\\".concat(n,\\\"' option must be a boolean.\\\"))}))}))}},836:(e,t,r)=>{\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.PrintToConsole=void 0;var n=r(539),o=r(704),i=function(){function e(e){this.console=e,this.printToConsole=!1}return e.prototype.init=function(e){this.printToConsole=e},e.prototype.error=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.printToConsole&&(e=this.console).error.apply(e,t)},e.prototype.info=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.printToConsole&&(e=this.console).info.apply(e,t)},e.prototype.log=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.printToConsole&&(e=this.console).log.apply(e,t)},e.prototype.debug=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.printToConsole&&(e=this.console).debug.apply(e,t)},e.prototype.trace=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.printToConsole&&(e=this.console).trace.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.printToConsole&&(e=this.console).warn.apply(e,t)},e.prototype.printLog=function(e){if(this.printToConsole){var t=[\\\"log\\\",\\\"warn\\\",\\\"error\\\",\\\"trace\\\",\\\"info\\\",\\\"error\\\"][e.level||o.LogLevel.Debug],r=e.tag?\\\"[\\\".concat(e.tag,\\\"] \\\"):\\\"\\\",i=[e.file||\\\"\\\",e.method||\\\"\\\",e.line||\\\"\\\"].filter((function(e){return\\\"\\\"!==e})).join(\\\":\\\"),a=\\\"\\\".concat(r).concat((0,n.format)(e.text),\\\" \\\").concat(i);this.console[t](a)}},e}();t.PrintToConsole=i},758:(e,t)=>{\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.RegisterErrorHandler=void 0;var r=function(){function e(e){this.window=e,this.rejectionsMap=new Map}return e.prototype.init=function(e){var t=this;this.bugfender=e,this.window.addEventListener(\\\"error\\\",(function(e){var r=e.message,n=e.lineno,o=e.filename,i=e.error;t.logError(r,o,n,i)})),this.window.addEventListener(\\\"unhandledrejection\\\",(function(e){var r=setTimeout((function(){t.logError(\\\"Potentially unhandled promise\\\",void 0,void 0,e.reason)}),1);t.rejectionsMap.set(e.promise,r),e.preventDefault()})),this.window.addEventListener(\\\"rejectionhandled\\\",(function(e){clearTimeout(t.rejectionsMap.get(e.promise)),t.rejectionsMap.delete(e.promise)}))},e.prototype.logError=function(e,t,r,n){var o;n&&n.stack&&(o=n.stack),\\\"string\\\"==typeof e&&this.bugfender.sendCrash(e,[\\\"Error: \\\".concat(e),\\\"URL: \\\".concat(null!=t?t:\\\"N/A\\\"),\\\"Line: \\\".concat(null!=r?r:\\\"N/A\\\"),\\\"Stack: \\\".concat(null!=o?o:\\\"N/A\\\")].join(\\\"\\\\n\\\"))},e}();t.RegisterErrorHandler=r},922:function(e,t,r){\\\"use strict\\\";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.formatLogEntryText=t.format=void 0;var o=r(539),i=r(287);function a(e){var t=e.slice(1),r=e[0];try{r=(0,i.mapToString)(r)}catch(e){r=(0,o.format)(r)}return t.length>0?o.format.apply(void 0,n([r],t,!1)):r}t.format=a,t.formatLogEntryText=function(e){return\\\"string\\\"==typeof e?e:function(e){return Array.isArray(e)}(e)?a(e):\\\"\\\"}},287:(e,t)=>{\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.mapToString=t.mapToNumber=void 0,t.mapToNumber=function(e){var t=Number(e);if(isNaN(t))throw new Error(\\\"Can't be casted to number\\\");return t},t.mapToString=function(e){if([\\\"string\\\",\\\"symbol\\\",\\\"bigint\\\",\\\"function\\\"].includes(typeof e)||e instanceof Error)try{return String(e)}catch(t){return JSON.stringify(e)}else try{return JSON.stringify(e)}catch(t){return String(e)}}},929:function(e,t){\\\"use strict\\\";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.UserFeedbackOptionsValidator=void 0;var n={title:\\\"Feedback\\\",hint:\\\"Please insert your feedback here and click send\\\",subjectPlaceholder:\\\"Subject…\\\",feedbackPlaceholder:\\\"Your feedback…\\\",submitLabel:\\\"Send\\\",closeLabel:\\\"Close\\\"},o=function(){function e(){}return e.prototype.init=function(e){return r(r({},n),null!=e?e:{})},e}();t.UserFeedbackOptionsValidator=o},484:(e,t)=>{\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},924:(e,t,r)=>{\\\"use strict\\\";var n=r(210),o=r(559),i=o(n(\\\"String.prototype.indexOf\\\"));e.exports=function(e,t){var r=n(e,!!t);return\\\"function\\\"==typeof r&&i(e,\\\".prototype.\\\")>-1?o(r):r}},559:(e,t,r)=>{\\\"use strict\\\";var n=r(612),o=r(210),i=o(\\\"%Function.prototype.apply%\\\"),a=o(\\\"%Function.prototype.call%\\\"),s=o(\\\"%Reflect.apply%\\\",!0)||n.call(a,i),c=o(\\\"%Object.getOwnPropertyDescriptor%\\\",!0),u=o(\\\"%Object.defineProperty%\\\",!0),l=o(\\\"%Math.max%\\\");if(u)try{u({},\\\"a\\\",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,a,arguments);if(c&&u){var r=c(t,\\\"length\\\");r.configurable&&u(t,\\\"length\\\",{value:1+l(0,e.length-(arguments.length-1))})}return t};var f=function(){return s(n,i,arguments)};u?u(e.exports,\\\"apply\\\",{value:f}):e.exports.apply=f},804:e=>{var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,n,o){if(\\\"[object Function]\\\"!==r.call(n))throw new TypeError(\\\"iterator must be a function\\\");var i=e.length;if(i===+i)for(var a=0;a<i;a++)n.call(o,e[a],a,e);else for(var s in e)t.call(e,s)&&n.call(o,e[s],s,e)}},648:e=>{\\\"use strict\\\";var t=\\\"Function.prototype.bind called on incompatible \\\",r=Array.prototype.slice,n=Object.prototype.toString,o=\\\"[object Function]\\\";e.exports=function(e){var i=this;if(\\\"function\\\"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),c=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},u=Math.max(0,i.length-s.length),l=[],f=0;f<u;f++)l.push(\\\"$\\\"+f);if(a=Function(\\\"binder\\\",\\\"return function (\\\"+l.join(\\\",\\\")+\\\"){ return binder.apply(this,arguments); }\\\")(c),i.prototype){var p=function(){};p.prototype=i.prototype,a.prototype=new p,p.prototype=null}return a}},612:(e,t,r)=>{\\\"use strict\\\";var n=r(648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{\\\"use strict\\\";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('\\\"use strict\\\"; return ('+e+\\\").constructor;\\\")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},\\\"\\\")}catch(e){c=null}var u=function(){throw new a},l=c?function(){try{return u}catch(e){try{return c(arguments,\\\"callee\\\").get}catch(e){return u}}}():u,f=r(405)(),p=Object.getPrototypeOf||function(e){return e.__proto__},y={},d=\\\"undefined\\\"==typeof Uint8Array?n:p(Uint8Array),h={\\\"%AggregateError%\\\":\\\"undefined\\\"==typeof AggregateError?n:AggregateError,\\\"%Array%\\\":Array,\\\"%ArrayBuffer%\\\":\\\"undefined\\\"==typeof ArrayBuffer?n:ArrayBuffer,\\\"%ArrayIteratorPrototype%\\\":f?p([][Symbol.iterator]()):n,\\\"%AsyncFromSyncIteratorPrototype%\\\":n,\\\"%AsyncFunction%\\\":y,\\\"%AsyncGenerator%\\\":y,\\\"%AsyncGeneratorFunction%\\\":y,\\\"%AsyncIteratorPrototype%\\\":y,\\\"%Atomics%\\\":\\\"undefined\\\"==typeof Atomics?n:Atomics,\\\"%BigInt%\\\":\\\"undefined\\\"==typeof BigInt?n:BigInt,\\\"%Boolean%\\\":Boolean,\\\"%DataView%\\\":\\\"undefined\\\"==typeof DataView?n:DataView,\\\"%Date%\\\":Date,\\\"%decodeURI%\\\":decodeURI,\\\"%decodeURIComponent%\\\":decodeURIComponent,\\\"%encodeURI%\\\":encodeURI,\\\"%encodeURIComponent%\\\":encodeURIComponent,\\\"%Error%\\\":Error,\\\"%eval%\\\":eval,\\\"%EvalError%\\\":EvalError,\\\"%Float32Array%\\\":\\\"undefined\\\"==typeof Float32Array?n:Float32Array,\\\"%Float64Array%\\\":\\\"undefined\\\"==typeof Float64Array?n:Float64Array,\\\"%FinalizationRegistry%\\\":\\\"undefined\\\"==typeof FinalizationRegistry?n:FinalizationRegistry,\\\"%Function%\\\":i,\\\"%GeneratorFunction%\\\":y,\\\"%Int8Array%\\\":\\\"undefined\\\"==typeof Int8Array?n:Int8Array,\\\"%Int16Array%\\\":\\\"undefined\\\"==typeof Int16Array?n:Int16Array,\\\"%Int32Array%\\\":\\\"undefined\\\"==typeof Int32Array?n:Int32Array,\\\"%isFinite%\\\":isFinite,\\\"%isNaN%\\\":isNaN,\\\"%IteratorPrototype%\\\":f?p(p([][Symbol.iterator]())):n,\\\"%JSON%\\\":\\\"object\\\"==typeof JSON?JSON:n,\\\"%Map%\\\":\\\"undefined\\\"==typeof Map?n:Map,\\\"%MapIteratorPrototype%\\\":\\\"undefined\\\"!=typeof Map&&f?p((new Map)[Symbol.iterator]()):n,\\\"%Math%\\\":Math,\\\"%Number%\\\":Number,\\\"%Object%\\\":Object,\\\"%parseFloat%\\\":parseFloat,\\\"%parseInt%\\\":parseInt,\\\"%Promise%\\\":\\\"undefined\\\"==typeof Promise?n:Promise,\\\"%Proxy%\\\":\\\"undefined\\\"==typeof Proxy?n:Proxy,\\\"%RangeError%\\\":RangeError,\\\"%ReferenceError%\\\":ReferenceError,\\\"%Reflect%\\\":\\\"undefined\\\"==typeof Reflect?n:Reflect,\\\"%RegExp%\\\":RegExp,\\\"%Set%\\\":\\\"undefined\\\"==typeof Set?n:Set,\\\"%SetIteratorPrototype%\\\":\\\"undefined\\\"!=typeof Set&&f?p((new Set)[Symbol.iterator]()):n,\\\"%SharedArrayBuffer%\\\":\\\"undefined\\\"==typeof SharedArrayBuffer?n:SharedArrayBuffer,\\\"%String%\\\":String,\\\"%StringIteratorPrototype%\\\":f?p(\\\"\\\"[Symbol.iterator]()):n,\\\"%Symbol%\\\":f?Symbol:n,\\\"%SyntaxError%\\\":o,\\\"%ThrowTypeError%\\\":l,\\\"%TypedArray%\\\":d,\\\"%TypeError%\\\":a,\\\"%Uint8Array%\\\":\\\"undefined\\\"==typeof Uint8Array?n:Uint8Array,\\\"%Uint8ClampedArray%\\\":\\\"undefined\\\"==typeof Uint8ClampedArray?n:Uint8ClampedArray,\\\"%Uint16Array%\\\":\\\"undefined\\\"==typeof Uint16Array?n:Uint16Array,\\\"%Uint32Array%\\\":\\\"undefined\\\"==typeof Uint32Array?n:Uint32Array,\\\"%URIError%\\\":URIError,\\\"%WeakMap%\\\":\\\"undefined\\\"==typeof WeakMap?n:WeakMap,\\\"%WeakRef%\\\":\\\"undefined\\\"==typeof WeakRef?n:WeakRef,\\\"%WeakSet%\\\":\\\"undefined\\\"==typeof WeakSet?n:WeakSet},g=function e(t){var r;if(\\\"%AsyncFunction%\\\"===t)r=s(\\\"async function () {}\\\");else if(\\\"%GeneratorFunction%\\\"===t)r=s(\\\"function* () {}\\\");else if(\\\"%AsyncGeneratorFunction%\\\"===t)r=s(\\\"async function* () {}\\\");else if(\\\"%AsyncGenerator%\\\"===t){var n=e(\\\"%AsyncGeneratorFunction%\\\");n&&(r=n.prototype)}else if(\\\"%AsyncIteratorPrototype%\\\"===t){var o=e(\\\"%AsyncGenerator%\\\");o&&(r=p(o.prototype))}return h[t]=r,r},b={\\\"%ArrayBufferPrototype%\\\":[\\\"ArrayBuffer\\\",\\\"prototype\\\"],\\\"%ArrayPrototype%\\\":[\\\"Array\\\",\\\"prototype\\\"],\\\"%ArrayProto_entries%\\\":[\\\"Array\\\",\\\"prototype\\\",\\\"entries\\\"],\\\"%ArrayProto_forEach%\\\":[\\\"Array\\\",\\\"prototype\\\",\\\"forEach\\\"],\\\"%ArrayProto_keys%\\\":[\\\"Array\\\",\\\"prototype\\\",\\\"keys\\\"],\\\"%ArrayProto_values%\\\":[\\\"Array\\\",\\\"prototype\\\",\\\"values\\\"],\\\"%AsyncFunctionPrototype%\\\":[\\\"AsyncFunction\\\",\\\"prototype\\\"],\\\"%AsyncGenerator%\\\":[\\\"AsyncGeneratorFunction\\\",\\\"prototype\\\"],\\\"%AsyncGeneratorPrototype%\\\":[\\\"AsyncGeneratorFunction\\\",\\\"prototype\\\",\\\"prototype\\\"],\\\"%BooleanPrototype%\\\":[\\\"Boolean\\\",\\\"prototype\\\"],\\\"%DataViewPrototype%\\\":[\\\"DataView\\\",\\\"prototype\\\"],\\\"%DatePrototype%\\\":[\\\"Date\\\",\\\"prototype\\\"],\\\"%ErrorPrototype%\\\":[\\\"Error\\\",\\\"prototype\\\"],\\\"%EvalErrorPrototype%\\\":[\\\"EvalError\\\",\\\"prototype\\\"],\\\"%Float32ArrayPrototype%\\\":[\\\"Float32Array\\\",\\\"prototype\\\"],\\\"%Float64ArrayPrototype%\\\":[\\\"Float64Array\\\",\\\"prototype\\\"],\\\"%FunctionPrototype%\\\":[\\\"Function\\\",\\\"prototype\\\"],\\\"%Generator%\\\":[\\\"GeneratorFunction\\\",\\\"prototype\\\"],\\\"%GeneratorPrototype%\\\":[\\\"GeneratorFunction\\\",\\\"prototype\\\",\\\"prototype\\\"],\\\"%Int8ArrayPrototype%\\\":[\\\"Int8Array\\\",\\\"prototype\\\"],\\\"%Int16ArrayPrototype%\\\":[\\\"Int16Array\\\",\\\"prototype\\\"],\\\"%Int32ArrayPrototype%\\\":[\\\"Int32Array\\\",\\\"prototype\\\"],\\\"%JSONParse%\\\":[\\\"JSON\\\",\\\"parse\\\"],\\\"%JSONStringify%\\\":[\\\"JSON\\\",\\\"stringify\\\"],\\\"%MapPrototype%\\\":[\\\"Map\\\",\\\"prototype\\\"],\\\"%NumberPrototype%\\\":[\\\"Number\\\",\\\"prototype\\\"],\\\"%ObjectPrototype%\\\":[\\\"Object\\\",\\\"prototype\\\"],\\\"%ObjProto_toString%\\\":[\\\"Object\\\",\\\"prototype\\\",\\\"toString\\\"],\\\"%ObjProto_valueOf%\\\":[\\\"Object\\\",\\\"prototype\\\",\\\"valueOf\\\"],\\\"%PromisePrototype%\\\":[\\\"Promise\\\",\\\"prototype\\\"],\\\"%PromiseProto_then%\\\":[\\\"Promise\\\",\\\"prototype\\\",\\\"then\\\"],\\\"%Promise_all%\\\":[\\\"Promise\\\",\\\"all\\\"],\\\"%Promise_reject%\\\":[\\\"Promise\\\",\\\"reject\\\"],\\\"%Promise_resolve%\\\":[\\\"Promise\\\",\\\"resolve\\\"],\\\"%RangeErrorPrototype%\\\":[\\\"RangeError\\\",\\\"prototype\\\"],\\\"%ReferenceErrorPrototype%\\\":[\\\"ReferenceError\\\",\\\"prototype\\\"],\\\"%RegExpPrototype%\\\":[\\\"RegExp\\\",\\\"prototype\\\"],\\\"%SetPrototype%\\\":[\\\"Set\\\",\\\"prototype\\\"],\\\"%SharedArrayBufferPrototype%\\\":[\\\"SharedArrayBuffer\\\",\\\"prototype\\\"],\\\"%StringPrototype%\\\":[\\\"String\\\",\\\"prototype\\\"],\\\"%SymbolPrototype%\\\":[\\\"Symbol\\\",\\\"prototype\\\"],\\\"%SyntaxErrorPrototype%\\\":[\\\"SyntaxError\\\",\\\"prototype\\\"],\\\"%TypedArrayPrototype%\\\":[\\\"TypedArray\\\",\\\"prototype\\\"],\\\"%TypeErrorPrototype%\\\":[\\\"TypeError\\\",\\\"prototype\\\"],\\\"%Uint8ArrayPrototype%\\\":[\\\"Uint8Array\\\",\\\"prototype\\\"],\\\"%Uint8ClampedArrayPrototype%\\\":[\\\"Uint8ClampedArray\\\",\\\"prototype\\\"],\\\"%Uint16ArrayPrototype%\\\":[\\\"Uint16Array\\\",\\\"prototype\\\"],\\\"%Uint32ArrayPrototype%\\\":[\\\"Uint32Array\\\",\\\"prototype\\\"],\\\"%URIErrorPrototype%\\\":[\\\"URIError\\\",\\\"prototype\\\"],\\\"%WeakMapPrototype%\\\":[\\\"WeakMap\\\",\\\"prototype\\\"],\\\"%WeakSetPrototype%\\\":[\\\"WeakSet\\\",\\\"prototype\\\"]},v=r(612),m=r(642),w=v.call(Function.call,Array.prototype.concat),O=v.call(Function.apply,Array.prototype.splice),S=v.call(Function.call,String.prototype.replace),j=v.call(Function.call,String.prototype.slice),P=/[^%.[\\\\]]+|\\\\[(?:(-?\\\\d+(?:\\\\.\\\\d+)?)|([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2)\\\\]|(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|%$))/g,A=/\\\\\\\\(\\\\\\\\)?/g,I=function(e){var t=j(e,0,1),r=j(e,-1);if(\\\"%\\\"===t&&\\\"%\\\"!==r)throw new o(\\\"invalid intrinsic syntax, expected closing `%`\\\");if(\\\"%\\\"===r&&\\\"%\\\"!==t)throw new o(\\\"invalid intrinsic syntax, expected opening `%`\\\");var n=[];return S(e,P,(function(e,t,r,o){n[n.length]=r?S(o,A,\\\"$1\\\"):t||e})),n},E=function(e,t){var r,n=e;if(m(b,n)&&(n=\\\"%\\\"+(r=b[n])[0]+\\\"%\\\"),m(h,n)){var i=h[n];if(i===y&&(i=g(n)),void 0===i&&!t)throw new a(\\\"intrinsic \\\"+e+\\\" exists, but is not available. Please file an issue!\\\");return{alias:r,name:n,value:i}}throw new o(\\\"intrinsic \\\"+e+\\\" does not exist!\\\")};e.exports=function(e,t){if(\\\"string\\\"!=typeof e||0===e.length)throw new a(\\\"intrinsic name must be a non-empty string\\\");if(arguments.length>1&&\\\"boolean\\\"!=typeof t)throw new a('\\\"allowMissing\\\" argument must be a boolean');var r=I(e),n=r.length>0?r[0]:\\\"\\\",i=E(\\\"%\\\"+n+\\\"%\\\",t),s=i.name,u=i.value,l=!1,f=i.alias;f&&(n=f[0],O(r,w([0,1],f)));for(var p=1,y=!0;p<r.length;p+=1){var d=r[p],g=j(d,0,1),b=j(d,-1);if(('\\\"'===g||\\\"'\\\"===g||\\\"`\\\"===g||'\\\"'===b||\\\"'\\\"===b||\\\"`\\\"===b)&&g!==b)throw new o(\\\"property names with quotes must have matching quotes\\\");if(\\\"constructor\\\"!==d&&y||(l=!0),m(h,s=\\\"%\\\"+(n+=\\\".\\\"+d)+\\\"%\\\"))u=h[s];else if(null!=u){if(!(d in u)){if(!t)throw new a(\\\"base intrinsic for \\\"+e+\\\" exists, but the property is not available.\\\");return}if(c&&p+1>=r.length){var v=c(u,d);u=(y=!!v)&&\\\"get\\\"in v&&!(\\\"originalValue\\\"in v.get)?v.get:u[d]}else y=m(u,d),u=u[d];y&&!l&&(h[s]=u)}}return u}},405:(e,t,r)=>{\\\"use strict\\\";var n=r.g.Symbol,o=r(419);e.exports=function(){return\\\"function\\\"==typeof n&&\\\"function\\\"==typeof Symbol&&\\\"symbol\\\"==typeof n(\\\"foo\\\")&&\\\"symbol\\\"==typeof Symbol(\\\"bar\\\")&&o()}},419:e=>{\\\"use strict\\\";e.exports=function(){if(\\\"function\\\"!=typeof Symbol||\\\"function\\\"!=typeof Object.getOwnPropertySymbols)return!1;if(\\\"symbol\\\"==typeof Symbol.iterator)return!0;var e={},t=Symbol(\\\"test\\\"),r=Object(t);if(\\\"string\\\"==typeof t)return!1;if(\\\"[object Symbol]\\\"!==Object.prototype.toString.call(t))return!1;if(\\\"[object Symbol]\\\"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if(\\\"function\\\"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if(\\\"function\\\"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(\\\"function\\\"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},608:e=>{\\\"use strict\\\";e.exports=function(){if(\\\"function\\\"!=typeof Symbol||\\\"function\\\"!=typeof Object.getOwnPropertySymbols)return!1;if(\\\"symbol\\\"==typeof Symbol.iterator)return!0;var e={},t=Symbol(\\\"test\\\"),r=Object(t);if(\\\"string\\\"==typeof t)return!1;if(\\\"[object Symbol]\\\"!==Object.prototype.toString.call(t))return!1;if(\\\"[object Symbol]\\\"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if(\\\"function\\\"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if(\\\"function\\\"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(\\\"function\\\"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},410:(e,t,r)=>{\\\"use strict\\\";var n=r(608);e.exports=function(){return n()&&!!Symbol.toStringTag}},642:(e,t,r)=>{\\\"use strict\\\";var n=r(612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},717:e=>{\\\"function\\\"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},584:(e,t,r)=>{\\\"use strict\\\";var n=r(410)(),o=r(924)(\\\"Object.prototype.toString\\\"),i=function(e){return!(n&&e&&\\\"object\\\"==typeof e&&Symbol.toStringTag in e)&&\\\"[object Arguments]\\\"===o(e)},a=function(e){return!!i(e)||null!==e&&\\\"object\\\"==typeof e&&\\\"number\\\"==typeof e.length&&e.length>=0&&\\\"[object Array]\\\"!==o(e)&&\\\"[object Function]\\\"===o(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a},662:(e,t,r)=>{\\\"use strict\\\";var n,o=Object.prototype.toString,i=Function.prototype.toString,a=/^\\\\s*(?:function)?\\\\*/,s=r(410)(),c=Object.getPrototypeOf;e.exports=function(e){if(\\\"function\\\"!=typeof e)return!1;if(a.test(i.call(e)))return!0;if(!s)return\\\"[object GeneratorFunction]\\\"===o.call(e);if(!c)return!1;if(void 0===n){var t=function(){if(!s)return!1;try{return Function(\\\"return function*() {}\\\")()}catch(e){}}();n=!!t&&c(t)}return c(e)===n}},692:(e,t,r)=>{\\\"use strict\\\";var n=r(804),o=r(83),i=r(924),a=i(\\\"Object.prototype.toString\\\"),s=r(410)(),c=\\\"undefined\\\"==typeof globalThis?r.g:globalThis,u=o(),l=i(\\\"Array.prototype.indexOf\\\",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},f=i(\\\"String.prototype.slice\\\"),p={},y=r(882),d=Object.getPrototypeOf;s&&y&&d&&n(u,(function(e){var t=new c[e];if(Symbol.toStringTag in t){var r=d(t),n=y(r,Symbol.toStringTag);if(!n){var o=d(r);n=y(o,Symbol.toStringTag)}p[e]=n.get}})),e.exports=function(e){if(!e||\\\"object\\\"!=typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=f(a(e),8,-1);return l(u,t)>-1}return!!y&&function(e){var t=!1;return n(p,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}},155:e=>{var t,r,n=e.exports={};function o(){throw new Error(\\\"setTimeout has not been defined\\\")}function i(){throw new Error(\\\"clearTimeout has not been defined\\\")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t=\\\"function\\\"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r=\\\"function\\\"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,c=[],u=!1,l=-1;function f(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new y(e,t)),1!==c.length||u||a(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},n.title=\\\"browser\\\",n.browser=!0,n.env={},n.argv=[],n.version=\\\"\\\",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(e){return[]},n.binding=function(e){throw new Error(\\\"process.binding is not supported\\\")},n.cwd=function(){return\\\"/\\\"},n.chdir=function(e){throw new Error(\\\"process.chdir is not supported\\\")},n.umask=function(){return 0}},422:function(e,t,r){\\\"use strict\\\";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError(\\\"Symbol.asyncIterator is not defined.\\\");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=\\\"function\\\"==typeof __values?__values(e):e[Symbol.iterator](),t={},n(\\\"next\\\"),n(\\\"throw\\\"),n(\\\"return\\\"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.Database=void 0;const i=r(998),a=r(593);var s;!function(e){e[e.New=0]=\\\"New\\\",e[e.V1=10]=\\\"V1\\\",e[e.V2=20]=\\\"V2\\\"}(s||(s={})),t.Database=class{constructor(e){this.db=(0,a.createDeferred)(),this.name=null!=e?e:\\\"bf_sdk\\\",this.init()}init(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.openDB)(this.name,s.V2,{upgrade(e,t,r,i){var a,c,u,l;return n(this,void 0,void 0,(function*(){if(t===s.New&&(e.createObjectStore(\\\"devicekeys\\\",{keyPath:\\\"id\\\",autoIncrement:!0}).createIndex(\\\"sessionUUID\\\",\\\"sessionUUID\\\"),e.createObjectStore(\\\"issues\\\",{keyPath:\\\"id\\\",autoIncrement:!0}).createIndex(\\\"sessionUUID\\\",\\\"sessionUUID\\\"),e.createObjectStore(\\\"logs\\\",{keyPath:\\\"id\\\",autoIncrement:!0}).createIndex(\\\"sessionUUID\\\",\\\"sessionUUID\\\"),e.createObjectStore(\\\"sessions\\\",{keyPath:\\\"uuid\\\"})),t===s.V1){const e=i.objectStore(\\\"issues\\\");try{for(var r,n=!0,f=o(e);r=yield f.next(),!(a=r.done);){l=r.value,n=!1;try{const e=l,t=Object.assign({},e.value);t.data.text=t.data.markdown,delete t.data.markdown,e.update(t)}finally{n=!0}}}catch(e){c={error:e}}finally{try{n||a||!(u=f.return)||(yield u.call(f))}finally{if(c)throw c.error}}}}))}});this.db.resolve(e)}))}get(){return this.db.promise}}},177:function(e,t){\\\"use strict\\\";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.InMemoryDeviceKeysTable=t.IDBDeviceKeysTable=void 0,t.IDBDeviceKeysTable=class{constructor(e){this.table=e}add(e){return this.table.add(e)}count(e){return this.table.countBy(\\\"sessionUUID\\\",e)}deleteBatch(e){return this.table.deleteBatch(0,e)}getAll(){return this.table.getAll()}},t.InMemoryDeviceKeysTable=class{constructor(){this.data=[],this.idCounter=0}getNextID(){return this.idCounter++}add(e){return r(this,void 0,void 0,(function*(){const t=this.getNextID();this.data.push(Object.assign(Object.assign({},e),{id:t}))}))}count(e){return r(this,void 0,void 0,(function*(){return this.data.filter((t=>t.sessionUUID===e)).length}))}deleteBatch(e){return r(this,void 0,void 0,(function*(){this.data.splice(0,e)}))}getAll(){return r(this,void 0,void 0,(function*(){return[...this.data]}))}}},941:function(e,t){\\\"use strict\\\";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.InMemoryIssuesTable=t.IDBIssuesTable=void 0,t.IDBIssuesTable=class{constructor(e){this.table=e}add(e){return this.table.add(e)}count(e){return this.table.countBy(\\\"sessionUUID\\\",e)}deleteById(e){return this.table.deleteByIdx(e)}getBatch(e,t){return this.table.getBatch(e,t)}},t.InMemoryIssuesTable=class{constructor(){this.data=[],this.idCounter=0}getNextID(){return this.idCounter++}add(e){return r(this,void 0,void 0,(function*(){const t=this.getNextID();this.data.push(Object.assign(Object.assign({},e),{id:t}))}))}count(e){return r(this,void 0,void 0,(function*(){return this.data.filter((t=>t.sessionUUID===e)).length}))}deleteById(e){return r(this,void 0,void 0,(function*(){const t=this.data.findIndex((t=>t.id===e));-1!==t&&this.data.splice(t,1)}))}getBatch(e,t){return r(this,void 0,void 0,(function*(){return this.data.filter((t=>t.sessionUUID===e)).slice(0,t)}))}}},856:function(e,t){\\\"use strict\\\";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.InMemoryLogsTable=t.IDBLogsTable=void 0,t.IDBLogsTable=class{constructor(e,t){this.table=e,this.logFactory=t}add(e){return this.table.add(e)}count(e){return this.table.countBy(\\\"sessionUUID\\\",e)}deleteBatch(e,t){return this.table.deleteBatch(0,t,[\\\"sessionUUID\\\",e])}deleteOldLogs(e,t=10){return r(this,void 0,void 0,(function*(){const r=yield this.table.getBatch(e,t);if(r.length<=1)return;const n={sessionUUID:e,data:this.logFactory.createGapLog(r.map((e=>e.data)))};yield Promise.all([this.table.patchByIdx(r[0].id,n),this.table.deleteBatch(1,t-1,[\\\"sessionUUID\\\",e])])}))}getBatch(e,t){return this.table.getBatch(e,t)}},t.InMemoryLogsTable=class{constructor(e,t){this.logFactory=e,this.storageLimit=t,this.data=[],this.idCounter=0}getNextID(){return this.idCounter++}add(e){return r(this,void 0,void 0,(function*(){if(this.data.length>=this.storageLimit){const e=new Error(\\\"InMemory storage quota exceeded\\\");throw e.name=\\\"QuotaExceededError\\\",e}const t=this.getNextID();this.data.push(Object.assign(Object.assign({},e),{id:t}))}))}count(e){return r(this,void 0,void 0,(function*(){return this.data.filter((t=>t.sessionUUID===e)).length}))}deleteBatch(e,t){return r(this,void 0,void 0,(function*(){const r=[];let n=0;for(let o=0;o<this.data.length;o++){const i=this.data[o];i.sessionUUID===e&&n<t?n++:r.push(i)}this.data=r}))}deleteOldLogs(e){return r(this,void 0,void 0,(function*(){const e=this.data.slice(0,10);e.length<=1||(this.data[0].data=this.logFactory.createGapLog(e.map((e=>e.data))),this.data.splice(1,9))}))}getBatch(e,t){return r(this,void 0,void 0,(function*(){return this.data.filter((t=>t.sessionUUID===e)).slice(0,t)}))}}},967:function(e,t){\\\"use strict\\\";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.Table=void 0,t.Table=class{constructor(e,t){this.dbPromise=e,this.store=t}add(e){return r(this,void 0,void 0,(function*(){yield(yield this.dbPromise).add(this.store,e)}))}clear(){return r(this,void 0,void 0,(function*(){yield(yield this.dbPromise).clear(this.store)}))}countBy(e,t){return r(this,void 0,void 0,(function*(){const r=(yield this.dbPromise).transaction(this.store,\\\"readonly\\\");let n,o=0;if(e!==r.store.keyPath){const o=r.store.index(e),i=IDBKeyRange.only(t);n=yield o.openCursor(i)}else n=yield r.store.openCursor(IDBKeyRange.only(t));for(;n;)o++,n=yield n.continue();return o}))}deleteBatch(e,t,n){return r(this,void 0,void 0,(function*(){const r=(yield this.dbPromise).transaction(this.store,\\\"readwrite\\\");let o,i=0;if(n)if(n[0]!==r.store.keyPath){const e=r.store.index(n[0]),t=IDBKeyRange.only(n[1]);o=yield e.openCursor(t)}else o=yield r.store.openCursor(IDBKeyRange.only(n[1]));else o=yield r.store.openCursor();for(;o&&(i>=e&&o.delete(),i++,i!==e+t);)o=yield o.continue()}))}deleteByIdx(e){return r(this,void 0,void 0,(function*(){return(yield this.dbPromise).delete(this.store,e)}))}getAll(){return r(this,void 0,void 0,(function*(){return(yield this.dbPromise).getAll(this.store)}))}getBatch(e,t){return r(this,void 0,void 0,(function*(){const r=(yield this.dbPromise).transaction(this.store,\\\"readonly\\\").store.index(\\\"sessionUUID\\\"),n=IDBKeyRange.only(e);let o=yield r.openCursor(n);const i=[];let a=0;for(;o&&(i.push(o.value),a++,a!==t);)o=yield o.continue();return i}))}patchByIdx(e,t){return r(this,void 0,void 0,(function*(){const r=(yield this.dbPromise).transaction(this.store,\\\"readwrite\\\"),n=yield r.store.get(e);yield r.store.put(Object.assign(Object.assign({},n),t))}))}}},572:(e,t,r)=>{\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.LogFactory=void 0;const n=r(431);t.LogFactory=class{constructor(e=32e3){this.maxLogLength=e}createFromDeviceKey(e,t,r,n){return this.createFromEntry({tag:\\\"bf_key_value\\\",text:`Set device data \\\"${e}\\\"=\\\"${t}\\\"`},r,n)}createFromEntry(e,t,r){var o,i,a,s,c,u,l,f,p,y;let d=null!==(o=e.text)&&void 0!==o?o:\\\"\\\";return d.length>=this.maxLogLength&&(d=d.substring(0,this.maxLogLength)+\\\"…\\\"),{x:r.iso,t:d,m:null!==(a=null!==(i=e.method)&&void 0!==i?i:t.method)&&void 0!==a?a:\\\"\\\",at:r.epoch,tg:null!==(s=e.tag)&&void 0!==s?s:\\\"\\\",f:null!==(u=null!==(c=e.file)&&void 0!==c?c:t.file)&&void 0!==u?u:\\\"\\\",l:null!==(f=null!==(l=e.line)&&void 0!==l?l:t.line)&&void 0!==f?f:0,ll:null!==(p=e.level)&&void 0!==p?p:n.LogLevel.Debug,u:null!==(y=e.url)&&void 0!==y?y:\\\"\\\"}}createFromIssue(e,t,r){return this.createFromEntry({level:n.LogLevel.Error,tag:\\\"bf_issue\\\",text:e},t,r)}createGapLog(e){const t=JSON.stringify({bf_start_date:e[0].at,bf_end_date:e[e.length-1].at});return{x:e[0].x,t,m:\\\"\\\",at:e[0].at,tg:\\\"bf_gap_log\\\",f:\\\"\\\",l:0,ll:0,u:e[0].u}}}},41:function(e,t){\\\"use strict\\\";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.StorageWriter=void 0,t.StorageWriter=class{constructor(e,t,r,n){this.deviceKeysTable=e,this.issuesTable=t,this.logFactory=r,this.logsTable=n,this.isClearingSpace=!1,this.logsQueue=[]}handleMessage(e){return r(this,void 0,void 0,(function*(){switch(e.type){case\\\"device-key\\\":return this.addDeviceKey(e.data.key,e.data.value,e.data.callInfo,e.data.time);case\\\"init\\\":this.options=e.data.options,this.sessionUUID=e.data.sessionUUID;break;case\\\"issue\\\":return this.addIssue(e.data.type,e.data.title,e.data.text,e.data.uuid,e.data.callInfo,e.data.time);case\\\"log-entry\\\":return this.addLogEntry(e.data.log,e.data.callInfo,e.data.time)}}))}addDeviceKey(e,t,r,n){this.deviceKeysTable.add({sessionUUID:this.sessionUUID,data:{key:e,value:t}}),this.addLog(this.logFactory.createFromDeviceKey(e,t,r,n))}addLog(e){return r(this,void 0,void 0,(function*(){const t={sessionUUID:this.sessionUUID,data:e};if(this.isClearingSpace)this.logsQueue.push(t);else try{yield this.logsTable.add(t)}catch(e){this.isQuotaExceededError(e)&&(this.logsQueue.push(t),this.isClearingSpace=!0,yield this.logsTable.deleteOldLogs(this.sessionUUID),yield this.processLogsQueue(),this.isClearingSpace=!1)}}))}addLogEntry(e,t,r){this.addLog(this.logFactory.createFromEntry(e,t,r))}addIssue(e,t,r,n,o,i){this.issuesTable.add({sessionUUID:this.sessionUUID,data:{title:t,text:r,type:e,uuid:n}}),this.addLog(this.logFactory.createFromIssue(n,o,i))}isQuotaExceededError(e){var t;return\\\"QuotaExceededError\\\"===e.name||\\\"QuotaExceededError\\\"===(null===(t=e.inner)||void 0===t?void 0:t.name)}processLogsQueue(){return r(this,void 0,void 0,(function*(){for(;this.logsQueue.length>0;){const e=this.logsQueue[0];try{yield this.logsTable.add(e),this.logsQueue.shift()}catch(e){this.isQuotaExceededError(e)&&(yield this.logsTable.deleteOldLogs(this.sessionUUID))}}}))}}},593:(e,t)=>{\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.getElByXPath=t.getXPath=t.DebounceByElement=t.UnreachableCaseError=t.CacheDecoratorFactory=t.createDeferred=void 0,t.createDeferred=function(){const e={isFulfilled:!1,isRejected:!1,isResolved:!1};return e.promise=new Promise(((t,r)=>{e.resolve=r=>{const n=e;n.isFulfilled=!0,n.isRejected=!1,n.isResolved=!0,n.value=r,t(r)},e.reject=t=>{const n=e;n.isFulfilled=!0,n.isRejected=!0,n.isResolved=!1,n.err=t,r(t)}})),e},t.CacheDecoratorFactory=function(e){return function(){return function(t,r,n){const o=n.value;n.value=function(){return e.has(r)||e.set(r,o.apply(this)),e.get(r)}}}};class r extends Error{constructor(e){super(`Unreachable case: ${JSON.stringify(e)}`)}}t.UnreachableCaseError=r,t.DebounceByElement=class{constructor(e){this.wait=e,this.timers=new Map}run(e,t){this.timers.has(e)&&clearTimeout(this.timers.get(e)),this.timers.set(e,setTimeout((()=>{t(),this.timers.delete(e)}),this.wait))}},t.getXPath=function(e){let t=e;if(t instanceof Element&&t.id)return'//*[@id=\\\"'+t.id+'\\\"]';const r=[];for(;t&&t instanceof Element;){const e=t;let n=0,o=!1,i=e.previousSibling;for(;i;)i.nodeType!==Node.DOCUMENT_TYPE_NODE&&i.nodeName===e.nodeName&&n++,i=i.previousSibling;for(i=e.nextSibling;i;){if(i.nodeName===e.nodeName){o=!0;break}i=i.nextSibling}const a=e.prefix?e.prefix+\\\":\\\":\\\"\\\",s=n||o?`[${n+1}]`:\\\"\\\";r.push(a+e.localName+s),t=e.parentNode}return r.length?\\\"/\\\"+r.reverse().join(\\\"/\\\"):\\\"\\\"},t.getElByXPath=function(e){var t;return null!==(t=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)&&void 0!==t?t:void 0}},384:e=>{e.exports=function(e){return e&&\\\"object\\\"==typeof e&&\\\"function\\\"==typeof e.copy&&\\\"function\\\"==typeof e.fill&&\\\"function\\\"==typeof e.readUInt8}},955:(e,t,r)=>{\\\"use strict\\\";var n=r(584),o=r(662),i=r(430),a=r(692);function s(e){return e.call.bind(e)}var c=\\\"undefined\\\"!=typeof BigInt,u=\\\"undefined\\\"!=typeof Symbol,l=s(Object.prototype.toString),f=s(Number.prototype.valueOf),p=s(String.prototype.valueOf),y=s(Boolean.prototype.valueOf);if(c)var d=s(BigInt.prototype.valueOf);if(u)var h=s(Symbol.prototype.valueOf);function g(e,t){if(\\\"object\\\"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function b(e){return\\\"[object Map]\\\"===l(e)}function v(e){return\\\"[object Set]\\\"===l(e)}function m(e){return\\\"[object WeakMap]\\\"===l(e)}function w(e){return\\\"[object WeakSet]\\\"===l(e)}function O(e){return\\\"[object ArrayBuffer]\\\"===l(e)}function S(e){return\\\"undefined\\\"!=typeof ArrayBuffer&&(O.working?O(e):e instanceof ArrayBuffer)}function j(e){return\\\"[object DataView]\\\"===l(e)}function P(e){return\\\"undefined\\\"!=typeof DataView&&(j.working?j(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=a,t.isPromise=function(e){return\\\"undefined\\\"!=typeof Promise&&e instanceof Promise||null!==e&&\\\"object\\\"==typeof e&&\\\"function\\\"==typeof e.then&&\\\"function\\\"==typeof e.catch},t.isArrayBufferView=function(e){return\\\"undefined\\\"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||P(e)},t.isUint8Array=function(e){return\\\"Uint8Array\\\"===i(e)},t.isUint8ClampedArray=function(e){return\\\"Uint8ClampedArray\\\"===i(e)},t.isUint16Array=function(e){return\\\"Uint16Array\\\"===i(e)},t.isUint32Array=function(e){return\\\"Uint32Array\\\"===i(e)},t.isInt8Array=function(e){return\\\"Int8Array\\\"===i(e)},t.isInt16Array=function(e){return\\\"Int16Array\\\"===i(e)},t.isInt32Array=function(e){return\\\"Int32Array\\\"===i(e)},t.isFloat32Array=function(e){return\\\"Float32Array\\\"===i(e)},t.isFloat64Array=function(e){return\\\"Float64Array\\\"===i(e)},t.isBigInt64Array=function(e){return\\\"BigInt64Array\\\"===i(e)},t.isBigUint64Array=function(e){return\\\"BigUint64Array\\\"===i(e)},b.working=\\\"undefined\\\"!=typeof Map&&b(new Map),t.isMap=function(e){return\\\"undefined\\\"!=typeof Map&&(b.working?b(e):e instanceof Map)},v.working=\\\"undefined\\\"!=typeof Set&&v(new Set),t.isSet=function(e){return\\\"undefined\\\"!=typeof Set&&(v.working?v(e):e instanceof Set)},m.working=\\\"undefined\\\"!=typeof WeakMap&&m(new WeakMap),t.isWeakMap=function(e){return\\\"undefined\\\"!=typeof WeakMap&&(m.working?m(e):e instanceof WeakMap)},w.working=\\\"undefined\\\"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},O.working=\\\"undefined\\\"!=typeof ArrayBuffer&&O(new ArrayBuffer),t.isArrayBuffer=S,j.working=\\\"undefined\\\"!=typeof ArrayBuffer&&\\\"undefined\\\"!=typeof DataView&&j(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=P;var A=\\\"undefined\\\"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function I(e){return\\\"[object SharedArrayBuffer]\\\"===l(e)}function E(e){return void 0!==A&&(void 0===I.working&&(I.working=I(new A)),I.working?I(e):e instanceof A)}function D(e){return g(e,f)}function x(e){return g(e,p)}function U(e){return g(e,y)}function B(e){return c&&g(e,d)}function T(e){return u&&g(e,h)}t.isSharedArrayBuffer=E,t.isAsyncFunction=function(e){return\\\"[object AsyncFunction]\\\"===l(e)},t.isMapIterator=function(e){return\\\"[object Map Iterator]\\\"===l(e)},t.isSetIterator=function(e){return\\\"[object Set Iterator]\\\"===l(e)},t.isGeneratorObject=function(e){return\\\"[object Generator]\\\"===l(e)},t.isWebAssemblyCompiledModule=function(e){return\\\"[object WebAssembly.Module]\\\"===l(e)},t.isNumberObject=D,t.isStringObject=x,t.isBooleanObject=U,t.isBigIntObject=B,t.isSymbolObject=T,t.isBoxedPrimitive=function(e){return D(e)||x(e)||U(e)||B(e)||T(e)},t.isAnyArrayBuffer=function(e){return\\\"undefined\\\"!=typeof Uint8Array&&(S(e)||E(e))},[\\\"isProxy\\\",\\\"isExternal\\\",\\\"isModuleNamespaceObject\\\"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+\\\" is not supported in userland\\\")}})}))},539:(e,t,r)=>{var n=r(155),o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(\\\" \\\")}r=1;for(var n=arguments,o=n.length,a=String(e).replace(i,(function(e){if(\\\"%%\\\"===e)return\\\"%\\\";if(r>=o)return e;switch(e){case\\\"%s\\\":return String(n[r++]);case\\\"%d\\\":return Number(n[r++]);case\\\"%j\\\":try{return JSON.stringify(n[r++])}catch(e){return\\\"[Circular]\\\"}default:return e}})),s=n[r];r<o;s=n[++r])b(s)||!S(s)?a+=\\\" \\\"+s:a+=\\\" \\\"+u(s);return a},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return e.apply(this,arguments)}};var a={},s=/^$/;if(n.env.NODE_DEBUG){var c=n.env.NODE_DEBUG;c=c.replace(/[|\\\\\\\\{}()[\\\\]^$+?.]/g,\\\"\\\\\\\\$&\\\").replace(/\\\\*/g,\\\".*\\\").replace(/,/g,\\\"$|^\\\").toUpperCase(),s=new RegExp(\\\"^\\\"+c+\\\"$\\\",\\\"i\\\")}function u(e,r){var n={seen:[],stylize:f};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),p(n,e,n.depth)}function l(e,t){var r=u.styles[t];return r?\\\"\\u001b[\\\"+u.colors[r][0]+\\\"m\\\"+e+\\\"\\u001b[\\\"+u.colors[r][1]+\\\"m\\\":e}function f(e,t){return e}function p(e,r,n){if(e.customInspect&&r&&A(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return m(o)||(o=p(e,o,n)),o}var i=function(e,t){if(w(t))return e.stylize(\\\"undefined\\\",\\\"undefined\\\");if(m(t)){var r=\\\"'\\\"+JSON.stringify(t).replace(/^\\\"|\\\"$/g,\\\"\\\").replace(/'/g,\\\"\\\\\\\\'\\\").replace(/\\\\\\\\\\\"/g,'\\\"')+\\\"'\\\";return e.stylize(r,\\\"string\\\")}return v(t)?e.stylize(\\\"\\\"+t,\\\"number\\\"):g(t)?e.stylize(\\\"\\\"+t,\\\"boolean\\\"):b(t)?e.stylize(\\\"null\\\",\\\"null\\\"):void 0}(e,r);if(i)return i;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),P(r)&&(a.indexOf(\\\"message\\\")>=0||a.indexOf(\\\"description\\\")>=0))return y(r);if(0===a.length){if(A(r)){var c=r.name?\\\": \\\"+r.name:\\\"\\\";return e.stylize(\\\"[Function\\\"+c+\\\"]\\\",\\\"special\\\")}if(O(r))return e.stylize(RegExp.prototype.toString.call(r),\\\"regexp\\\");if(j(r))return e.stylize(Date.prototype.toString.call(r),\\\"date\\\");if(P(r))return y(r)}var u,l=\\\"\\\",f=!1,S=[\\\"{\\\",\\\"}\\\"];return h(r)&&(f=!0,S=[\\\"[\\\",\\\"]\\\"]),A(r)&&(l=\\\" [Function\\\"+(r.name?\\\": \\\"+r.name:\\\"\\\")+\\\"]\\\"),O(r)&&(l=\\\" \\\"+RegExp.prototype.toString.call(r)),j(r)&&(l=\\\" \\\"+Date.prototype.toUTCString.call(r)),P(r)&&(l=\\\" \\\"+y(r)),0!==a.length||f&&0!=r.length?n<0?O(r)?e.stylize(RegExp.prototype.toString.call(r),\\\"regexp\\\"):e.stylize(\\\"[Object]\\\",\\\"special\\\"):(e.seen.push(r),u=f?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)U(t,String(a))?i.push(d(e,t,r,n,String(a),!0)):i.push(\\\"\\\");return o.forEach((function(o){o.match(/^\\\\d+$/)||i.push(d(e,t,r,n,o,!0))})),i}(e,r,n,s,a):a.map((function(t){return d(e,r,n,s,t,f)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf(\\\"\\\\n\\\"),e+t.replace(/\\\\u001b\\\\[\\\\d\\\\d?m/g,\\\"\\\").length+1}),0)>60?r[0]+(\\\"\\\"===t?\\\"\\\":t+\\\"\\\\n \\\")+\\\" \\\"+e.join(\\\",\\\\n  \\\")+\\\" \\\"+r[1]:r[0]+t+\\\" \\\"+e.join(\\\", \\\")+\\\" \\\"+r[1]}(u,l,S)):S[0]+l+S[1]}function y(e){return\\\"[\\\"+Error.prototype.toString.call(e)+\\\"]\\\"}function d(e,t,r,n,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize(\\\"[Getter/Setter]\\\",\\\"special\\\"):e.stylize(\\\"[Getter]\\\",\\\"special\\\"):c.set&&(s=e.stylize(\\\"[Setter]\\\",\\\"special\\\")),U(n,o)||(a=\\\"[\\\"+o+\\\"]\\\"),s||(e.seen.indexOf(c.value)<0?(s=b(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf(\\\"\\\\n\\\")>-1&&(s=i?s.split(\\\"\\\\n\\\").map((function(e){return\\\"  \\\"+e})).join(\\\"\\\\n\\\").slice(2):\\\"\\\\n\\\"+s.split(\\\"\\\\n\\\").map((function(e){return\\\"   \\\"+e})).join(\\\"\\\\n\\\")):s=e.stylize(\\\"[Circular]\\\",\\\"special\\\")),w(a)){if(i&&o.match(/^\\\\d+$/))return s;(a=JSON.stringify(\\\"\\\"+o)).match(/^\\\"([a-zA-Z_][a-zA-Z_0-9]*)\\\"$/)?(a=a.slice(1,-1),a=e.stylize(a,\\\"name\\\")):(a=a.replace(/'/g,\\\"\\\\\\\\'\\\").replace(/\\\\\\\\\\\"/g,'\\\"').replace(/(^\\\"|\\\"$)/g,\\\"'\\\"),a=e.stylize(a,\\\"string\\\"))}return a+\\\": \\\"+s}function h(e){return Array.isArray(e)}function g(e){return\\\"boolean\\\"==typeof e}function b(e){return null===e}function v(e){return\\\"number\\\"==typeof e}function m(e){return\\\"string\\\"==typeof e}function w(e){return void 0===e}function O(e){return S(e)&&\\\"[object RegExp]\\\"===I(e)}function S(e){return\\\"object\\\"==typeof e&&null!==e}function j(e){return S(e)&&\\\"[object Date]\\\"===I(e)}function P(e){return S(e)&&(\\\"[object Error]\\\"===I(e)||e instanceof Error)}function A(e){return\\\"function\\\"==typeof e}function I(e){return Object.prototype.toString.call(e)}function E(e){return e<10?\\\"0\\\"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!a[e])if(s.test(e)){var r=n.pid;a[e]=function(){var n=t.format.apply(t,arguments);console.error(\\\"%s %d: %s\\\",e,r,n)}}else a[e]=function(){};return a[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:\\\"cyan\\\",number:\\\"yellow\\\",boolean:\\\"yellow\\\",undefined:\\\"grey\\\",null:\\\"bold\\\",string:\\\"green\\\",date:\\\"magenta\\\",regexp:\\\"red\\\"},t.types=r(955),t.isArray=h,t.isBoolean=g,t.isNull=b,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=m,t.isSymbol=function(e){return\\\"symbol\\\"==typeof e},t.isUndefined=w,t.isRegExp=O,t.types.isRegExp=O,t.isObject=S,t.isDate=j,t.types.isDate=j,t.isError=P,t.types.isNativeError=P,t.isFunction=A,t.isPrimitive=function(e){return null===e||\\\"boolean\\\"==typeof e||\\\"number\\\"==typeof e||\\\"string\\\"==typeof e||\\\"symbol\\\"==typeof e||void 0===e},t.isBuffer=r(384);var D=[\\\"Jan\\\",\\\"Feb\\\",\\\"Mar\\\",\\\"Apr\\\",\\\"May\\\",\\\"Jun\\\",\\\"Jul\\\",\\\"Aug\\\",\\\"Sep\\\",\\\"Oct\\\",\\\"Nov\\\",\\\"Dec\\\"];function x(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(\\\":\\\");return[e.getDate(),D[e.getMonth()],t].join(\\\" \\\")}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log(\\\"%s - %s\\\",x(),t.format.apply(t,arguments))},t.inherits=r(717),t._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var B=\\\"undefined\\\"!=typeof Symbol?Symbol(\\\"util.promisify.custom\\\"):void 0;function T(e,t){if(!e){var r=new Error(\\\"Promise was rejected with a falsy value\\\");r.reason=e,e=r}return t(e)}t.promisify=function(e){if(\\\"function\\\"!=typeof e)throw new TypeError('The \\\"original\\\" argument must be of type Function');if(B&&e[B]){var t;if(\\\"function\\\"!=typeof(t=e[B]))throw new TypeError('The \\\"util.promisify.custom\\\" argument must be of type Function');return Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),B&&Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=B,t.callbackify=function(e){if(\\\"function\\\"!=typeof e)throw new TypeError('The \\\"original\\\" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var o=t.pop();if(\\\"function\\\"!=typeof o)throw new TypeError(\\\"The last argument must be of type Function\\\");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,t).then((function(e){n.nextTick(a.bind(null,null,e))}),(function(e){n.nextTick(T.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,o(e)),t}},430:(e,t,r)=>{\\\"use strict\\\";var n=r(804),o=r(83),i=r(924),a=i(\\\"Object.prototype.toString\\\"),s=r(410)(),c=\\\"undefined\\\"==typeof globalThis?r.g:globalThis,u=o(),l=i(\\\"String.prototype.slice\\\"),f={},p=r(882),y=Object.getPrototypeOf;s&&p&&y&&n(u,(function(e){if(\\\"function\\\"==typeof c[e]){var t=new c[e];if(Symbol.toStringTag in t){var r=y(t),n=p(r,Symbol.toStringTag);if(!n){var o=y(r);n=p(o,Symbol.toStringTag)}f[e]=n.get}}}));var d=r(692);e.exports=function(e){return!!d(e)&&(s&&Symbol.toStringTag in e?function(e){var t=!1;return n(f,(function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(e){}})),t}(e):l(a(e),8,-1))}},83:(e,t,r)=>{\\\"use strict\\\";var n=[\\\"BigInt64Array\\\",\\\"BigUint64Array\\\",\\\"Float32Array\\\",\\\"Float64Array\\\",\\\"Int16Array\\\",\\\"Int32Array\\\",\\\"Int8Array\\\",\\\"Uint16Array\\\",\\\"Uint32Array\\\",\\\"Uint8Array\\\",\\\"Uint8ClampedArray\\\"],o=\\\"undefined\\\"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)\\\"function\\\"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}},882:(e,t,r)=>{\\\"use strict\\\";var n=r(210)(\\\"%Object.getOwnPropertyDescriptor%\\\",!0);if(n)try{n([],\\\"length\\\")}catch(e){n=null}e.exports=n},998:(e,t,r)=>{\\\"use strict\\\";r.r(t),r.d(t,{deleteDB:()=>b,openDB:()=>g,unwrap:()=>h,wrap:()=>d});const n=(e,t)=>t.some((t=>e instanceof t));let o,i;const a=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let f={get(e,t,r){if(e instanceof IDBTransaction){if(\\\"done\\\"===t)return s.get(e);if(\\\"objectStoreNames\\\"===t)return e.objectStoreNames||c.get(e);if(\\\"store\\\"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return d(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&(\\\"done\\\"===t||\\\"store\\\"===t)||t in e};function p(e){f=e(f)}function y(e){return\\\"function\\\"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||\\\"objectStoreNames\\\"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(h(this),e),d(a.get(this))}:function(...e){return d(t.apply(h(this),e))}:function(e,...r){const n=t.call(h(this),e,...r);return c.set(n,e.sort?e.sort():[e]),d(n)}:(e instanceof IDBTransaction&&function(e){if(s.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener(\\\"complete\\\",o),e.removeEventListener(\\\"error\\\",i),e.removeEventListener(\\\"abort\\\",i)},o=()=>{t(),n()},i=()=>{r(e.error||new DOMException(\\\"AbortError\\\",\\\"AbortError\\\")),n()};e.addEventListener(\\\"complete\\\",o),e.addEventListener(\\\"error\\\",i),e.addEventListener(\\\"abort\\\",i)}));s.set(e,t)}(e),n(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,f):e);var t}function d(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener(\\\"success\\\",o),e.removeEventListener(\\\"error\\\",i)},o=()=>{t(d(e.result)),n()},i=()=>{r(e.error),n()};e.addEventListener(\\\"success\\\",o),e.addEventListener(\\\"error\\\",i)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=y(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const h=e=>l.get(e);function g(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const a=indexedDB.open(e,t),s=d(a);return n&&a.addEventListener(\\\"upgradeneeded\\\",(e=>{n(d(a.result),e.oldVersion,e.newVersion,d(a.transaction),e)})),r&&a.addEventListener(\\\"blocked\\\",(e=>r(e.oldVersion,e.newVersion,e))),s.then((e=>{i&&e.addEventListener(\\\"close\\\",(()=>i())),o&&e.addEventListener(\\\"versionchange\\\",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}function b(e,{blocked:t}={}){const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener(\\\"blocked\\\",(e=>t(e.oldVersion,e))),d(r).then((()=>{}))}const v=[\\\"get\\\",\\\"getKey\\\",\\\"getAll\\\",\\\"getAllKeys\\\",\\\"count\\\"],m=[\\\"put\\\",\\\"add\\\",\\\"delete\\\",\\\"clear\\\"],w=new Map;function O(e,t){if(!(e instanceof IDBDatabase)||t in e||\\\"string\\\"!=typeof t)return;if(w.get(t))return w.get(t);const r=t.replace(/FromIndex$/,\\\"\\\"),n=t!==r,o=m.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!v.includes(r))return;const i=async function(e,...t){const i=this.transaction(e,o?\\\"readwrite\\\":\\\"readonly\\\");let a=i.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),o&&i.done]))[0]};return w.set(t,i),i}p((e=>({...e,get:(t,r,n)=>O(t,r)||e.get(t,r,n),has:(t,r)=>!!O(t,r)||e.has(t,r)})));const S=[\\\"continue\\\",\\\"continuePrimaryKey\\\",\\\"advance\\\"],j={},P=new WeakMap,A=new WeakMap,I={get(e,t){if(!S.includes(t))return e[t];let r=j[t];return r||(r=j[t]=function(...e){P.set(this,A.get(this)[t](...e))}),r}};async function*E(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const r=new Proxy(t,I);for(A.set(r,t),l.set(r,h(t));t;)yield r,t=await(P.get(r)||t.continue()),P.delete(r)}function D(e,t){return t===Symbol.asyncIterator&&n(e,[IDBIndex,IDBObjectStore,IDBCursor])||\\\"iterate\\\"===t&&n(e,[IDBIndex,IDBObjectStore])}p((e=>({...e,get:(t,r,n)=>D(t,r)?E:e.get(t,r,n),has:(t,r)=>D(t,r)||e.has(t,r)})))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if(\\\"object\\\"==typeof globalThis)return globalThis;try{return this||new Function(\\\"return this\\\")()}catch(e){if(\\\"object\\\"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\\\"undefined\\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(e,\\\"__esModule\\\",{value:!0})},(()=>{\\\"use strict\\\";const e=r(422),t=r(967),n=r(572),o=r(177),i=r(941),a=r(856),s=r(41),c=new e.Database,u=new n.LogFactory,l=new o.IDBDeviceKeysTable(new t.Table(c.get(),\\\"devicekeys\\\")),f=new i.IDBIssuesTable(new t.Table(c.get(),\\\"issues\\\")),p=new a.IDBLogsTable(new t.Table(c.get(),\\\"logs\\\"),u),y=new s.StorageWriter(l,f,u,p);self.addEventListener(\\\"message\\\",(e=>{y.handleMessage(e.data)}))})()})();\\n\", \"Worker\", undefined, undefined);\n}\n","\"use strict\";\n\n/* eslint-env browser */\n\n/* eslint-disable no-undef, no-use-before-define, new-cap */\nmodule.exports = function (content, workerConstructor, workerOptions, url) {\n  var globalScope = self || window;\n\n  try {\n    try {\n      var blob;\n\n      try {\n        // New API\n        blob = new globalScope.Blob([content]);\n      } catch (e) {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = globalScope.BlobBuilder || globalScope.WebKitBlobBuilder || globalScope.MozBlobBuilder || globalScope.MSBlobBuilder;\n        blob = new BlobBuilder();\n        blob.append(content);\n        blob = blob.getBlob();\n      }\n\n      var URL = globalScope.URL || globalScope.webkitURL;\n      var objectURL = URL.createObjectURL(blob);\n      var worker = new globalScope[workerConstructor](objectURL, workerOptions);\n      URL.revokeObjectURL(objectURL);\n      return worker;\n    } catch (e) {\n      return new globalScope[workerConstructor](\"data:application/javascript,\".concat(encodeURIComponent(content)), workerOptions);\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error(\"Inline worker is not supported\");\n    }\n\n    return new globalScope[workerConstructor](url, workerOptions);\n  }\n};","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict';\n\nvar possibleNames = [\n\t'BigInt64Array',\n\t'BigUint64Array',\n\t'Float32Array',\n\t'Float64Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Int8Array',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray'\n];\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\nmodule.exports = function availableTypedArrays() {\n\tvar out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { r as replaceTraps, a as reverseTransformCache, u as unwrap, i as instanceOfAny } from './wrap-idb-value.js';\n\nconst advanceMethodProps = ['continue', 'continuePrimaryKey', 'advance'];\nconst methodMap = {};\nconst advanceResults = new WeakMap();\nconst ittrProxiedCursorToOriginalProxy = new WeakMap();\nconst cursorIteratorTraps = {\n    get(target, prop) {\n        if (!advanceMethodProps.includes(prop))\n            return target[prop];\n        let cachedFunc = methodMap[prop];\n        if (!cachedFunc) {\n            cachedFunc = methodMap[prop] = function (...args) {\n                advanceResults.set(this, ittrProxiedCursorToOriginalProxy.get(this)[prop](...args));\n            };\n        }\n        return cachedFunc;\n    },\n};\nasync function* iterate(...args) {\n    // tslint:disable-next-line:no-this-assignment\n    let cursor = this;\n    if (!(cursor instanceof IDBCursor)) {\n        cursor = await cursor.openCursor(...args);\n    }\n    if (!cursor)\n        return;\n    cursor = cursor;\n    const proxiedCursor = new Proxy(cursor, cursorIteratorTraps);\n    ittrProxiedCursorToOriginalProxy.set(proxiedCursor, cursor);\n    // Map this double-proxy back to the original, so other cursor methods work.\n    reverseTransformCache.set(proxiedCursor, unwrap(cursor));\n    while (cursor) {\n        yield proxiedCursor;\n        // If one of the advancing methods was not called, call continue().\n        cursor = await (advanceResults.get(proxiedCursor) || cursor.continue());\n        advanceResults.delete(proxiedCursor);\n    }\n}\nfunction isIteratorProp(target, prop) {\n    return ((prop === Symbol.asyncIterator &&\n        instanceOfAny(target, [IDBIndex, IDBObjectStore, IDBCursor])) ||\n        (prop === 'iterate' && instanceOfAny(target, [IDBIndex, IDBObjectStore])));\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get(target, prop, receiver) {\n        if (isIteratorProp(target, prop))\n            return iterate;\n        return oldTraps.get(target, prop, receiver);\n    },\n    has(target, prop) {\n        return isIteratorProp(target, prop) || oldTraps.has(target, prop);\n    },\n}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(2853);\n"],"names":["root","factory","exports","module","define","amd","self","Object","defineProperty","value","__createBinding","this","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","__exportStar","p","prototype","hasOwnProperty","call","LogLevel","LOG_LEVELS","Debug","Warning","Error","Trace","Info","Fatal","__assign","assign","t","s","i","n","arguments","length","apply","removeUndefinedProperties","object","entries","forEach","_a","key","validate","prepareOptions","options","props","opt","option","trim","removeEmptyStringOptions","rules","urlValidator","RegExp","rule","concat","includes","test","PrintToConsole","util_1","log_1","console","printToConsole","init","error","parameters","_i","info","log","debug","trace","warn","printLog","method","level","tag","location_1","file","line","filter","join","message","format","text","RegisterErrorHandler","window","rejectionsMap","Map","bugfender","_this","addEventListener","e","msg","lineno","filename","logError","timeoutId","setTimeout","reason","set","promise","preventDefault","clearTimeout","delete","stack","sendCrash","__spreadArray","to","from","pack","ar","l","Array","slice","formatLogEntryText","type_mappers_1","textParams","textFormat","mapToString","isArray","isUnknownArray","mapToNumber","number","Number","isNaN","String","JSON","stringify","_b","UserFeedbackOptionsValidator","defaultUserFeedbackOptions","title","hint","subjectPlaceholder","feedbackPlaceholder","submitLabel","closeLabel","OPEN_BROADCAST_CHANNELS","BroadcastChannel","clearNodeFolder","_options","fillOptionsWithDefaults","_methodChooser","chooseMethod","type","then","_util","PROMISE_RESOLVED_FALSE","enforceOptions","ENFORCED_OPTIONS","Set","lastId","name","channel","maybePromise","id","add","_iL","_onML","_addEL","internal","_uMP","_befC","_prepP","isPromise","_state","_post","broadcastChannel","msgObj","time","microSeconds","data","PROMISE_RESOLVED_VOID","sendPromise","postMessage","_hasMessageListeners","_addListenerObject","obj","push","listenerFn","listenerObject","minMessageTime","fn","onMessage","_startListening","_removeListenerObject","_stopListening","_pubkey","closed","postInternal","onmessage","listenObj","removeEventListener","find","close","awaitPrepare","Promise","all","map","isClosed","_index","createLeaderElection","beLeader","_broadcastChannel","_leaderElection","_leaderElector","parse","fallbackInterval","responseTime","averageResponseTime","elector","LeaderElection","die","_unload","isLeader","hasLeader","isDead","token","randomToken","_aplQ","_aplQC","_unl","_lstns","_dpL","_dpLC","hasLeaderListener","context","action","_sendMessage","leaderElector","msgJson","unloadFn","isLeaderListener","applyOnce","isFromFallbackInterval","_this2","sleep","PROMISE_RESOLVED_TRUE","stopCriteriaPromiseResolve","stopCriteria","stopCriteriaPromise","res","handleMessage","waitForAnswerTime","race","reject","applyRun","awaitLeadership","_aLP","resolved","finish","whenDeathListener","tryOnFallBack","onduplicate","_this3","listener","uFn","remove","chooseMethods","methods","METHODS","Boolean","_simulate","SimulateMethod","ret","webWorkerSupport","useMethod","canBeUsed","_native","_indexedDb","_localstorage","NativeMethod","IndexedDBMethod","LocalstorageMethod","TRANSACTION_SETTINGS","cleanOldMessages","commitIndexedDBTransaction","createDatabase","getAllMessages","db","tx","transaction","OBJECT_STORE_ID","objectStore","openCursor","onsuccess","ev","cursor","target","result","getIdb","getMessagesHigherThan","getOldMessages","removeMessagesById","writeMessage","_obliviousSet","durability","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","commit","channelName","dbName","openRequest","open","onupgradeneeded","createObjectStore","keyPath","autoIncrement","rej","onerror","readerUuid","messageJson","writeObject","uuid","Date","getTime","oncomplete","lastCursorId","keyRangeValue","IDBKeyRange","bound","Infinity","getAll","getAllRequest","err","openCursorRequest","channelState","ids","resolve","deleteRequest","ttl","olderThen","msgObk","idb","tooOld","state","eMIs","ObliviousSet","writeBlockPromise","messagesCallback","readQueuePromises","onclose","_readLoop","readNewMessages","newerMessages","useMessages","has","messagesCallbackTime","_filterMessage","sort","msgObjA","msgObjB","randomInt","addStorageEventListener","getLocalStorage","removeStorageEventListener","storageKey","localStorage","writeObj","setItem","document","createEvent","initEvent","newValue","dispatchEvent","localstorage","removeTimeout","ls","removeItem","userAgent","navigator","toLowerCase","defaultTime","bc","subFns","SIMULATE_CHANNELS","originalOptions","node","maxParallelWrites","useFastPath","ms","lastMs","additional","min","max","Math","floor","random","toString","substring","resolveWith","GetIntrinsic","callBind","$indexOf","allowMissing","intrinsic","bind","$apply","$call","$reflectApply","$gOPD","$defineProperty","$max","originalFunction","func","applyBind","hasOwn","ctx","TypeError","ERROR_MESSAGE","toStr","funcType","that","args","binder","boundLength","boundArgs","Function","Empty","implementation","$SyntaxError","SyntaxError","$Function","$TypeError","getEvalledConstructor","expressionSyntax","throwTypeError","ThrowTypeError","calleeThrows","gOPDthrows","hasSymbols","getProto","getPrototypeOf","x","__proto__","needsEval","TypedArray","Uint8Array","INTRINSICS","AggregateError","ArrayBuffer","Symbol","iterator","Atomics","BigInt","DataView","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","EvalError","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","parseFloat","parseInt","Proxy","RangeError","ReferenceError","Reflect","SharedArrayBuffer","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakRef","WeakSet","doEval","gen","LEGACY_ALIASES","$concat","$spliceApply","splice","$replace","replace","$strSlice","rePropName","reEscapeChar","stringToPath","string","first","last","match","quote","subString","getBaseIntrinsic","alias","intrinsicName","parts","intrinsicBaseName","intrinsicRealName","skipFurtherCaching","isOwn","part","origSymbol","g","hasSymbolSham","getOwnPropertySymbols","sym","symObj","keys","getOwnPropertyNames","syms","propertyIsEnumerable","descriptor","toStringTag","ctor","superCtor","super_","constructor","TempCtor","hasToStringTag","$toString","callBound","isStandardArguments","isLegacyArguments","callee","supportsStandardArguments","GeneratorFunction","fnToStr","isFnRegex","generatorFunc","getGeneratorFunc","availableTypedArrays","globalThis","typedArrays","array","$slice","toStrTags","gOPD","typedArray","arr","proto","superProto","anyTrue","getter","tryTypedArrays","_to","now","removeTooOldValues","clear","obliviousSet","next","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","marker","runClearTimeout","Item","noop","nextTick","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","ApiClient","appKey","http","getDeviceStatus","deviceInfo","payload","app_token","device","post","response","hasError","isAppValid","code","isDeviceEnabled","logger_enabled","sendSession","session","sendLogs","sessionId","logs","session_id","sendIssue","issueURL","uid","app","setDeviceKey","deviceId","app_key","device_id","EventPrinter","utils_1","styles","bold","icon","italic","neutral","regular","print","xpath","getElByXPath","printDeviceKey","printJsEvent","event","hash","truncate","mapLabel","blur","click","focus","keyup","UnreachableCaseError","input","OverrideConsoleMethods","common_1","commands","methodToLevel","fromEntries","addLogMessage","RegisterBrowserEventsHandler","register_events_handler_base_1","RegisterEventsHandlerBase","super","supportsPassiveEvents","passive","capture","addJsEventLogEntry","performance","location","href","historyOverrideFnFactory","originalFn","url","override","history","overrideFactory","wrapped","getURL","addLogEntry","passiveSupported","RegisterUIEventsHandler","Element","getEventData","debounceByEl","DebounceByElement","ignoreList","HTMLInputElement","HTMLTextAreaElement","composedPath","path","sendKeyupLog","isPasswordEl","getAttribute","shouldSkipKeyLogging","el","HTMLElement","some","dataset","shouldOmitText","eventName","childElementCount","textContent","form","tagName","getXPath","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","done","Bugfender","issue_1","main_provider_1","preInitProvider","sdkUserAgent","initDeferred","createDeferred","provideCommandsQueue","operationModes","provideOperationModes","sdkOptionsValidator","provideSDKOptionsValidator","provider","MainProvider","processor","getStorageProcessor","apiFeatures","provideAPIFeatureDetection","getLogger","operation","mode","getMode","isMultiTab","isMultiThread","features","isBroadcastChannelSupported","isIndexedDBSupported","isLocalStorageSupported","sessionStorage","isSessionStorageSupported","worker","isWorkerSupported","resetStorage","getResetStorage","resetIfAppChanged","appID","storage","getStorageWriterHub","logBrowserEvents","getRegisterBrowserEventsHandler","logUIEvents","getRegisterUIEventsHandler","registerErrorHandler","getRegisterErrorHandler","overrideConsoleMethods","getOverrideConsoleMethods","getPrintToConsole","provideBrowser","getName","forceSendOnce","getDeviceURL","getDevice","baseURL","getUDID","getSessionURL","getCurrentSession","getUUID","getUserFeedback","provideUserFeedback","show","fatal","removeDeviceKey","sendLog","addIssue","IssueType","Issue","Crash","sendUserFeedback","Feedback","setForceEnabled","getStorageGuard","setDeviceForceEnabled","MonoChannel","Channel","createBroadcastChannel","MessageType","broadcast_channel_1","logger","leader","onForceSendCb","sessionsStatus","leaderPromise","setCurrentSession","ForceSend","Ping","toSessionUUID","Pong","fromSessionUUID","notifyForceSend","onForceSend","cb","onHasBecomeLeader","isSessionActive","sessionUUID","isSessionReady","CommandType","Connection","isOnline","onLine","CurrentSession","storage_keys_1","sessionsTable","uuidFactory","reset","initSession","deviceUDID","SessionStorageKey","SessionUUID","SessionUDID","getItem","addIfMissing","udid","__asyncValues","asyncIterator","__values","verb","v","d","settle","Database","with_async_ittr_1","Version","openDB","V2","upgrade","oldVersion","_newVersion","e_1","_c","New","createIndex","V1","issues","issues_1_1","_d","issues_1","issue","markdown","update","e_1_1","return","InMemoryDeviceKeysTable","IDBDeviceKeysTable","table","item","count","countBy","deleteBatch","batchSize","idCounter","getNextID","InMemoryStorage","inMemoryStorage","index","InMemoryIssuesTable","IDBIssuesTable","deleteById","deleteByIdx","getBatch","idx","findIndex","InMemoryLogsTable","IDBLogsTable","logFactory","deleteOldLogs","createGapLog","patchByIdx","storageLimit","counter","_sessionUUID","InMemorySessionsTable","IDBSessionsTable","entry","Table","dbPromise","store","range","only","continue","offset","limit","where","put","Device","sdkVersion","getDeviceData","LocalStorageKey","DeviceData","getInfo","deviceName","device_type","firebase_test_lab","key_values","language","getLanguage","os_version","getOSVersion","sdk_type","sdk_version","build","DeviceUDID","HttpClient","apiURL","endpoint","XMLHttpRequest","setRequestHeader","onreadystatechange","readyState","status","responseText","send","LogFactory","maxLogLength","createFromDeviceKey","callInfo","createFromEntry","_e","_f","_g","_h","_j","_k","iso","at","epoch","tg","f","ll","u","createFromIssue","issueUUID","bf_start_date","bf_end_date","NoopLogger","ConsoleLogger","getTagged","__decorate","decorators","c","r","decorate","__metadata","metadata","__importDefault","mod","api_client_1","override_console_methods_1","register_browser_events_handler_1","register_ui_events_handler_1","channel_1","connection_1","current_session_1","database_1","table_1","device_keys_table_1","in_memory_storage_1","issues_table_1","logs_table_1","sessions_table_1","device_1","http_client_1","log_factory_1","logger_1","reset_storage_1","session_factory_1","storage_guard_1","storage_processor_1","storage_writer_1","storage_writer_handler_1","storage_writer_hub_1","storage_writer_worker_1","event_printer_1","cache","Cached","CacheDecoratorFactory","commandsQueue","provideWindow","provideUUIDFactory","getApiClient","httpClient","getChannel","currentSession","getConnection","getSessionStorage","getSessionsTable","getDatabase","getInitDeferred","getDeviceKeysTable","getIssuesTable","getLogsTable","ResetStorage","StorageGuard","sessionFactory","SessionFactory","StorageProcessor","handler","default","MainThreadStorageWriterHandler","StorageWriter","StorageWriterHub","Storage","database","cachedAppID","AppID","localStorageKeys","sessionStorageKeys","orientation","batteryLevel","ram_total","ram_free","ram_used","toISOString","session_uid","app_version","api","deviceForceEnabled","checkIsDeviceEnabled","setInterval","canProcess","canWrite","connection","deviceKeysTable","issuesTable","logsTable","storageGuard","BATCH_SIZE","runIntervalMs","forceSend","isRunning","cleanupSessions","sessions","hasActiveTab","hasData","logsCount","issuesCount","deviceKeysCount","registerSession","sessionIDB","canRun","isForceSend","apiPromises","shouldProcess","hadIssues","a","b","partialSession","sessionHasIssues","sendIssues","sendDeviceData","deviceKeyChanges","deviceKeys","storageWriter","storage_writer_sanitizer_1","commands_1","eventPrinter","sanitizer","StorageWriterSanitizer","checkStorageGuard","sanitize","addDeviceKey","cmd","mapToLogEntryText","isJsEventLogEntry","AddLogEntry","issueType","isValidValue","strings","hasLine","isValidLine","hasLevel","isValidLevel","isClearingSpace","logsQueue","addLog","isQuotaExceededError","processLogsQueue","inner","shift","deferred","isFulfilled","isRejected","isResolved","_","propertyKey","val","wait","timers","nodeElem","currEl","nbOfPreviousSiblings","hasNextSiblings","sibling","previousSibling","nodeType","Node","DOCUMENT_TYPE_NODE","nodeName","nextSibling","prefix","nth","localName","parentNode","reverse","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","USE_METHOD","exit","WorkerGlobalScope","oldClose","LISTENERS","startedListening","runAll","promises","removeAll","getSize","size","arg","copy","fill","readUInt8","isArgumentsObject","isGeneratorFunction","whichTypedArray","isTypedArray","uncurryThis","BigIntSupported","SymbolSupported","ObjectToString","numberValue","valueOf","stringValue","booleanValue","bigIntValue","symbolValue","checkBoxedPrimitive","prototypeValueOf","isMapToString","isSetToString","isWeakMapToString","isWeakSetToString","isArrayBufferToString","isArrayBuffer","working","isDataViewToString","isDataView","catch","isArrayBufferView","isView","isUint8Array","isUint8ClampedArray","isUint16Array","isUint32Array","isInt8Array","isInt16Array","isInt32Array","isFloat32Array","isFloat64Array","isBigInt64Array","isBigUint64Array","isMap","isSet","isWeakMap","isWeakSet","SharedArrayBufferCopy","isSharedArrayBufferToString","isSharedArrayBuffer","isNumberObject","isStringObject","isBooleanObject","isBigIntObject","isSymbolObject","isAsyncFunction","isMapIterator","isSetIterator","isGeneratorObject","isWebAssemblyCompiledModule","isBoxedPrimitive","isAnyArrayBuffer","getOwnPropertyDescriptors","descriptors","formatRegExp","isString","objects","inspect","str","isNull","isObject","deprecate","noDeprecation","warned","throwDeprecation","traceDeprecation","debugs","debugEnvRegex","NODE_DEBUG","debugEnv","toUpperCase","opts","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","recurseTimes","isFunction","primitive","simple","isNumber","formatPrimitive","visibleKeys","arrayToHash","isError","indexOf","formatError","isRegExp","isDate","output","base","braces","toUTCString","formatProperty","formatArray","pop","reduce","prev","cur","reduceToSingleString","split","re","objectToString","pad","debuglog","pid","types","isNullOrUndefined","isSymbol","isNativeError","isPrimitive","isBuffer","months","timestamp","getHours","getMinutes","getSeconds","getDate","getMonth","prop","inherits","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","newReason","promisify","original","promiseResolve","promiseReject","setPrototypeOf","defineProperties","custom","callbackify","callbackified","maybeCb","foundName","Worker_fn","content","workerConstructor","workerOptions","globalScope","blob","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","URL","webkitURL","objectURL","createObjectURL","revokeObjectURL","_typeof","possibleNames","out","instanceOfAny","constructors","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","receiver","IDBTransaction","objectStoreNames","wrap","replaceTraps","callback","transformCachableValue","IDBDatabase","IDBCursor","advance","continuePrimaryKey","unwrap","storeNames","unlisten","complete","DOMException","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","IDBRequest","request","success","promisifyRequest","blocked","blocking","terminated","openPromise","newVersion","deleteDB","deleteDatabase","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","async","storeName","oldTraps","advanceMethodProps","methodMap","advanceResults","ittrProxiedCursorToOriginalProxy","cursorIteratorTraps","cachedFunc","iterate","proxiedCursor","isIteratorProp","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition"],"sourceRoot":""}