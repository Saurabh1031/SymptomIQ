{"version":3,"file":"utils.js","mappings":"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","sources":["webpack://@bugfender/sdk/webpack/universalModuleDefinition","webpack://@bugfender/sdk/./src/utils.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@bugfender/sdk\"] = factory();\n\telse\n\t\troot[\"@bugfender/sdk\"] = factory();\n})(self, () => {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElByXPath = exports.getXPath = exports.DebounceByElement = exports.UnreachableCaseError = exports.CacheDecoratorFactory = exports.createDeferred = void 0;\nfunction createDeferred() {\n    const deferred = {\n        isFulfilled: false,\n        isRejected: false,\n        isResolved: false,\n    };\n    deferred.promise = new Promise((resolve, reject) => {\n        deferred.resolve = (value) => {\n            const resolved = deferred;\n            resolved.isFulfilled = true;\n            resolved.isRejected = false;\n            resolved.isResolved = true;\n            resolved.value = value;\n            resolve(value);\n        };\n        deferred.reject = (reason) => {\n            const rejected = deferred;\n            rejected.isFulfilled = true;\n            rejected.isRejected = true;\n            rejected.isResolved = false;\n            rejected.err = reason;\n            reject(reason);\n        };\n    });\n    return deferred;\n}\nexports.createDeferred = createDeferred;\nfunction CacheDecoratorFactory(cache) {\n    return function CacheDecorator() {\n        return function (_, propertyKey, descriptor) {\n            const method = descriptor.value;\n            descriptor.value = function () {\n                if (!cache.has(propertyKey)) {\n                    cache.set(propertyKey, method.apply(this));\n                }\n                return cache.get(propertyKey);\n            };\n        };\n    };\n}\nexports.CacheDecoratorFactory = CacheDecoratorFactory;\nclass UnreachableCaseError extends Error {\n    constructor(val) {\n        super(`Unreachable case: ${JSON.stringify(val)}`);\n    }\n}\nexports.UnreachableCaseError = UnreachableCaseError;\nclass DebounceByElement {\n    constructor(wait) {\n        this.wait = wait;\n        this.timers = new Map();\n    }\n    run(el, cb) {\n        if (this.timers.has(el)) {\n            clearTimeout(this.timers.get(el));\n        }\n        this.timers.set(el, setTimeout(() => {\n            cb();\n            this.timers.delete(el);\n        }, this.wait));\n    }\n}\nexports.DebounceByElement = DebounceByElement;\nfunction getXPath(el) {\n    let nodeElem = el;\n    if (nodeElem instanceof Element && nodeElem.id) {\n        return `//*[@id=\"` + nodeElem.id + `\"]`;\n    }\n    const parts = [];\n    while (nodeElem && nodeElem instanceof Element) {\n        const currEl = nodeElem;\n        let nbOfPreviousSiblings = 0;\n        let hasNextSiblings = false;\n        let sibling = currEl.previousSibling;\n        while (sibling) {\n            if (sibling.nodeType !== Node.DOCUMENT_TYPE_NODE &&\n                sibling.nodeName === currEl.nodeName) {\n                nbOfPreviousSiblings++;\n            }\n            sibling = sibling.previousSibling;\n        }\n        sibling = currEl.nextSibling;\n        while (sibling) {\n            if (sibling.nodeName === currEl.nodeName) {\n                hasNextSiblings = true;\n                break;\n            }\n            sibling = sibling.nextSibling;\n        }\n        const prefix = currEl.prefix ? currEl.prefix + ':' : '';\n        const nth = nbOfPreviousSiblings || hasNextSiblings\n            ? `[${nbOfPreviousSiblings + 1}]`\n            : '';\n        parts.push(prefix + currEl.localName + nth);\n        nodeElem = currEl.parentNode;\n    }\n    return parts.length ? '/' + parts.reverse().join('/') : '';\n}\nexports.getXPath = getXPath;\nfunction getElByXPath(xpath) {\n    var _a;\n    return (_a = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue) !== null && _a !== void 0 ? _a : undefined;\n}\nexports.getElByXPath = getElByXPath;\n"],"names":["root","factory","exports","module","define","amd","self","Object","defineProperty","value","getElByXPath","getXPath","DebounceByElement","UnreachableCaseError","CacheDecoratorFactory","createDeferred","deferred","isFulfilled","isRejected","isResolved","promise","Promise","resolve","reject","resolved","reason","rejected","err","cache","_","propertyKey","descriptor","method","has","set","apply","this","get","Error","constructor","val","super","JSON","stringify","wait","timers","Map","run","el","cb","clearTimeout","setTimeout","delete","nodeElem","Element","id","parts","currEl","nbOfPreviousSiblings","hasNextSiblings","sibling","previousSibling","nodeType","Node","DOCUMENT_TYPE_NODE","nodeName","nextSibling","prefix","nth","push","localName","parentNode","length","reverse","join","xpath","_a","document","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","undefined"],"sourceRoot":""}