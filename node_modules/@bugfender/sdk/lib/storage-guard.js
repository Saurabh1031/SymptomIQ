/*! For license information please see storage-guard.js.LICENSE.txt */
!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports["@bugfender/sdk"]=i():e["@bugfender/sdk"]=i()}(self,(()=>(()=>{"use strict";var e={};return(()=>{var i=e;Object.defineProperty(i,"__esModule",{value:!0}),i.StorageGuard=void 0,i.StorageGuard=class{constructor(e,i,s,t){this.api=e,this.device=i,this.logger=s,this.options=t,this.deviceForceEnabled=!1,this.isAppValid=!0,this.isDeviceEnabled=!1,this.checkIsDeviceEnabled(),setInterval(this.checkIsDeviceEnabled.bind(this),3e5)}canProcess(){return this.logger.log("canProcess",{isAppValid:this.isAppValid,isDeviceEnabled:this.isDeviceEnabled,deviceForceEnabled:this.deviceForceEnabled}),this.isAppValid&&(this.isDeviceEnabled||this.deviceForceEnabled)}canWrite(){return this.isAppValid}checkIsDeviceEnabled(){const e=this.device.getInfo(this.options);return this.api.getDeviceStatus(e).then((e=>{this.isAppValid=e.isAppValid,this.isDeviceEnabled=e.isDeviceEnabled}),(()=>{}))}setDeviceForceEnabled(e){this.deviceForceEnabled=e}}})(),e})()));
//# sourceMappingURL=storage-guard.js.map